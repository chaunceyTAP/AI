{"guid":"10700487-a6cb-4f1f-b86a-d363520d2220","title":"Use the Deduplication activity's Merge functionality","path":"help\\workflow\\using\\deduplication-merge.md","fullText":"---\ntitle: Use the Deduplication activity's Merge functionality\ndescription: Learn how to use the Deduplication activity's Merge functionality\nfeature: Workflows, Data Management\nexl-id: a6b10585-7bf9-4fef-b886-db081b6d3acc\n---\n# Use the Deduplication activity's Merge functionality {#deduplication-merge}\n\n\n\n## About this use case {#about-this-use-case}\n\nThis use case describes how to use of the **[!UICONTROL Merge]** functionality in the **[!UICONTROL Deduplication]** activity.\n\nFor more information on this functionality, refer to [this section](deduplication.md#merging-fields-into-single-record).\n\nThe **[!UICONTROL Deduplication]** activity is used for removing duplicate rows from a data set. In this use case, the data shown below is duplicated based on the Email field. \n\n|Last modification date | First Name | Last Name | Email | Mobile Phone | Phone|\n|-----|------------|-----------|-------|--------------|------|\n|5/19/2020 | Robert | Tisner | bob@mycompany.com | 444-444-444 | 777-777-7777|\n|7/22/2020 | Bobby | Tisner | bob@mycompany.com | | 777-777-7777|\n|10/03/2020 | Bob |  | bob@mycompany.com | | 888-888-8888|\n\nWith the Deduplication activity's **[!UICONTROL Merge]** fonctionality, you can configure a set of rules for the deduplication to define a group of fields to merge into a single resulting data record. For example, with a set of duplicate records, you can choose to keep the oldest phone number or most recent name.\n\n## Activating the Merge functionality {#activating-merge}\n\n\nTo enable the merge functionality, you first need to configure the **[!UICONTROL Deduplication]** activity. To do this, follow these steps:\n\n1. Open the activity, then click the **[Edit configuration]** link.\n\n1. Select the reconciliation field to use for the deduplication, then click **[!UICONTROL Next]**. In this example, we want to deduplicate based on the email field.\n\n    ![](assets/uc_merge_edit.png)\n\n1. Click the **[!UICONTROL Advanced parameters]** link, then activate the **[!UICONTROL Merge records]** and **[!UICONTROL Use several record merging criteria]** options.\n\n    ![](assets/uc_merge_advanced_parameters.png)\n\n1. The **[!UICONTROL Merge]** tab is added to the **[!UICONTROL Deduplication]** configuration screen. We will use this tab to specify the data to merge when performing deduplication.\n\n## Configuring the fields to merge {#configuring-rules}\n\nHere are the rules we want to use to merge the data into a single record:\n\n* Keep the most recent name (first name and last name fields),\n* Keep the most recent mobile phone,\n* Keep the oldest phone number,\n* All fields in a group must be non-null to be eligible for the final record.\n\nTo configure these rules, follow these steps:\n\n1. Open the **[!UICONTROL Merge]** tab, then click the **[!UICONTROL Add]** button.\n\n    ![](assets/uc_merge_add.png)\n\n1. Specify the identifier and label of the group of fields to be merged.\n\n    ![](assets/uc_merge_identifier.png)\n\n1. Indicate the conditions for selecting the records to be taken into account.\n\n    ![](assets/uc_merge_filter.png)\n\n1. Sort on the last modification date in order to select the most recent name.\n\n    ![](assets/uc_merge_sort.png)\n\n1. Select the fields to merge. In this example, we want to keep the first name and last name fields.\n\n    ![](assets/uc_merge_keep.png)\n\n1. The fields are added to the set of data to merge and a new element is added to the workflow schema.\n\n    Repeat these steps to configure the mobile phone and phone fields.\n\n    ![](assets/dedup8.png)\n  \n    ![](assets/dedup9.png)\n\n## Results {#results}\n\nAfter configuring these rules, the following data is received at the end of the **[!UICONTROL Deduplication]** activity.\n\n| Modification date | First Name | Last Name | Email | Mobile Phone | Phone |\n|-----|------------|-----------|-------|--------------|------|\n|5/19/2020 | Robert | Tisner | bob@mycompany.com | 444-444-444 | 777-777-7777|\n|7/22/2020 | Bobby | Tisner | bob@mycompany.com | | 777-777-7777|\n|10/03/2020 | Bob |  | bob@mycompany.com | | 888-888-8888|\n\nThe result is merged from the three records according to the rules configured earlier. After comparison, it is concluded that the most recent name and mobile phone are used, along with the original phone number.\n\n| First Name | Last Name | Email | Mobile Phone | Phone|\n|------------|-----------|-------|--------------|------|\n| Bobby | Tisner | bob@mycompany.com | 444-444-4444 | 888-888-8888|\n\n>[!NOTE]\n>\n> Note that the first name that has been merged is \"Bobby\", because we configured a \"Name\" rule made of both the first name and last fields.\n>\n>As a result, \"Bob\" (the most recent first name) could not be taken into account because its associated last name field was empty. The most recent combination of first and last names was merged in the final record.\n","headers":[["title","Use the Deduplication activity's Merge functionality"],["description","Learn how to use the Deduplication activity's Merge functionality"],["feature","Workflows, Data Management"]],"sections":[{"section":"Use the Deduplication activity's Merge functionality","sectionId":"8755b14b-9d9b-4183-9de6-5e3ef60bc6f8","paragraphs":[]},{"section":"About this use case","sectionId":"d4983704-8657-4b0c-916f-cf4735244ddf","paragraphs":["This use case describes how to use of the Merge functionality in the Deduplication activity.","For more information on this functionality, refer to this section.","The Deduplication activity is used for removing duplicate rows from a data set. In this use case, the data shown below is duplicated based on the Email field.","Last modification date First Name Last Name Email Mobile Phone Phone\n5/19/2020 Robert Tisner &#98;&#x6f;&#x62;&#x40;&#x6d;&#121;&#x63;&#111;&#109;&#x70;&#97;&#x6e;&#121;&#46;&#99;&#111;&#x6d; 444-444-444 777-777-7777\n7/22/2020 Bobby Tisner &#x62;&#111;&#98;&#64;&#x6d;&#x79;&#x63;&#111;&#109;&#x70;&#x61;&#110;&#121;&#46;&#x63;&#x6f;&#109;  777-777-7777\n10/03/2020 Bob  &#98;&#x6f;&#98;&#64;&#109;&#x79;&#99;&#x6f;&#x6d;&#112;&#x61;&#x6e;&#x79;&#46;&#99;&#x6f;&#x6d;  888-888-8888","With the Deduplication activity's Merge fonctionality, you can configure a set of rules for the deduplication to define a group of fields to merge into a single resulting data record. For example, with a set of duplicate records, you can choose to keep the oldest phone number or most recent name."]},{"section":"Activating the Merge functionality","sectionId":"221e7d42-15a2-4dab-93ec-4a69c3483bd5","paragraphs":["To enable the merge functionality, you first need to configure the Deduplication activity. To do this, follow these steps:","Open the activity, then click the [Edit configuration] link.","Select the reconciliation field to use for the deduplication, then click Next. In this example, we want to deduplicate based on the email field.","","Click the Advanced parameters link, then activate the Merge records and Use several record merging criteria options.","","The Merge tab is added to the Deduplication configuration screen. We will use this tab to specify the data to merge when performing deduplication."]},{"section":"Configuring the fields to merge","sectionId":"dcdb4f9b-4e9f-46fe-8a26-73004a4355c8","paragraphs":["Here are the rules we want to use to merge the data into a single record:","Keep the most recent name (first name and last name fields),\nKeep the most recent mobile phone,\nKeep the oldest phone number,\nAll fields in a group must be non-null to be eligible for the final record.","To configure these rules, follow these steps:","Open the Merge tab, then click the Add button.","","Specify the identifier and label of the group of fields to be merged.","","Indicate the conditions for selecting the records to be taken into account.","","Sort on the last modification date in order to select the most recent name.","","Select the fields to merge. In this example, we want to keep the first name and last name fields.","","The fields are added to the set of data to merge and a new element is added to the workflow schema.","Repeat these steps to configure the mobile phone and phone fields."]},{"section":"Results","sectionId":"a5f3f222-f5c3-433f-ac06-2601cf7d2be5","paragraphs":["After configuring these rules, the following data is received at the end of the Deduplication activity.","Modification date First Name Last Name Email Mobile Phone Phone\n5/19/2020 Robert Tisner &#98;&#111;&#x62;&#64;&#109;&#121;&#x63;&#x6f;&#109;&#x70;&#97;&#110;&#121;&#x2e;&#99;&#x6f;&#x6d; 444-444-444 777-777-7777\n7/22/2020 Bobby Tisner &#x62;&#111;&#98;&#x40;&#109;&#121;&#99;&#111;&#109;&#112;&#97;&#110;&#x79;&#46;&#x63;&#x6f;&#109;  777-777-7777\n10/03/2020 Bob  &#x62;&#111;&#x62;&#x40;&#x6d;&#121;&#99;&#x6f;&#109;&#x70;&#x61;&#x6e;&#x79;&#46;&#99;&#111;&#109;  888-888-8888","The result is merged from the three records according to the rules configured earlier. After comparison, it is concluded that the most recent name and mobile phone are used, along with the original phone number.","First Name Last Name Email Mobile Phone Phone\nBobby Tisner &#98;&#x6f;&#x62;&#x40;&#109;&#121;&#99;&#x6f;&#109;&#x70;&#97;&#110;&#x79;&#46;&#99;&#x6f;&#x6d; 444-444-4444 888-888-8888","NOTE","Note that the first name that has been merged is \"Bobby\", because we configured a \"Name\" rule made of both the first name and last fields.","As a result, \"Bob\" (the most recent first name) could not be taken into account because its associated last name field was empty. The most recent combination of first and last names was merged in the final record."]}]}