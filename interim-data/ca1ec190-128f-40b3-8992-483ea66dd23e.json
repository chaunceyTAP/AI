{"guid":"ca1ec190-128f-40b3-8992-483ea66dd23e","title":"Tables to maintain","path":"help\\production\\using\\tables-to-maintain.md","fullText":"---\nproduct: campaign\ntitle: Tables to maintain\ndescription: Tables to maintain\nfeature: Monitoring\nbadge-v7-prem: label=\"On-premise/hybrid only\" type=\"Caution\" url=\"https://experienceleague.adobe.com/docs/campaign-classic/using/installing-campaign-classic/architecture-and-hosting-models/hosting-models-lp/hosting-models.html\" tooltip=\"Applies to on-premise and hybrid deployments only\"\naudience: production\ncontent-type: reference\ntopic-tags: database-maintenance\nexl-id: 194f12de-4671-4a56-8cdc-cd5e3dac147b\n---\n# Tables to maintain{#tables-to-maintain}\n\n\n\nThe list of tables to maintain depends on your version of Adobe Campaign, how you use it and on the datamodel configuration.\n\nThe following list contains only the tables most subject to fragmentation. The impacts are as follows:\n\n* overconsumption of disk space, thus affecting database access,\n* indexes which have not been regularly updated, which slows down query performance.\n\n## Adobe Campaign tables {#adobe-campaign-tables}\n\n<table> \n <thead> \n  <tr> \n   <th> <strong>Table name </strong><br /> </th> \n   <th> <strong>Size</strong><br /> </th> \n   <th> <strong>Main type of activity</strong><br /> </th> \n   <th> <strong>Comments</strong><br /> </th> \n  </tr> \n </thead> \n <tbody> \n  <tr> \n   <td> NmsDelivery<br /> </td> \n   <td> Small<br /> </td> \n   <td> Updates<br /> </td> \n   <td> There is one record per delivery action. A single record can be updated several times to reflect delivery progress, so indexes on this table tend to fragment rapidly. <br /> </td> \n  </tr> \n  <tr> \n   <td> NmsDeliveryPart<br /> </td> \n   <td> Medium<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> Work table which records are inserted into during delivery preparation. They are then updated during delivery and finally deleted once the delivery is complete.<br /> This table tends to fragment rapidly even though its average size is fairly limited.<br /> </td> \n  </tr> \n  <tr> \n   <td> NmsMirrorPageInfo<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, deletions<br /> </td> \n   <td> This table contains the information needed to generate personalized mirror pages. It contains a memo (CLOB) field, and as such will tend to be very large. The volume is directly proportional to the history of mirror pages kept. <br /> </td> \n  </tr> \n  <tr> \n   <td> NmsDeliveryStat<br /> </td> \n   <td> Medium<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> This table contains statistics on the delivery process. Its records are regularly updated. <br /> </td> \n  </tr> \n  <tr> \n   <td> NmsAddress<br /> </td> \n   <td> Medium<br /> </td> \n   <td> Updates, insertions<br /> </td> \n   <td> This table contains information on email addresses. It is frequently updated as part of the quarantine process (records are created at the first delivery error, updated when the counters change and deleted once delivery is successful). <br /> </td> \n  </tr> \n  <tr> \n   <td> XtkWorkflow<br /> </td> \n   <td> Small<br /> </td> \n   <td> Updates<br /> </td> \n   <td> There is one record per workflow instance, so very few records. However the table it is regularly updated to reflect status and progress.<br /> </td> \n  </tr> \n  <tr> \n   <td> XtkWorkflowTask<br /> </td> \n   <td> Small<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> Each execution of a workflow activity leads to the creation of a record in this table. The purge mechanism deletes them once they are expired.<br /> </td> \n  </tr> \n  <tr> \n   <td> XtkWorkflowEvent<br /> </td> \n   <td> Small<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> Each transition activated between tasks in a workflow leads to the creation of a record in this table. The purge mechanism deletes them once they are expired. <br /> </td> \n  </tr> \n  <tr> \n   <td> XtkWorkflowJob<br /> </td> \n   <td> Very small <br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> This table is specific to the workflow engine. It enables the sending of commands to workflows (Start, Stop, Pause, for instance). Although it is small, this table is taken into account during the purge of transactional tables linked to workflows.<br /> </td> \n  </tr> \n  <tr> \n   <td> NmsBroadLog<br /> </td> \n   <td> Largest<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> This is the largest table in the system. There is one record per message sent, and these records are inserted, updated to track the delivery status, and deleted when the history is purged. <br /> </td> \n  </tr> \n  <tr> \n   <td> NmsTrackingLog<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, deletions<br /> </td> \n   <td> Tracking logs are inserted and deleted when the history is purged, but they are not updated. <br /> </td> \n  </tr> \n  <tr> \n   <td> NmsBroadlogMsg <br /> </td> \n   <td> Small<br /> </td> \n   <td> Updates<br /> </td> \n   <td> This table contains information used for qualifying SMTP errors. It is fairly small, but will be massively updated, so indexes on this table tend to fragment rapidly. <br /> </td> \n  </tr> \n  <tr> \n   <td> NmsEmailErrorStat<br /> </td> \n   <td> Medium<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> This table contains the aggregates on SMTP errors sorted by domain. It initially contains detailed information which is aggregated by the cleanup task once it becomes outdated. <br /> </td> \n  </tr> \n  <tr> \n   <td> NmsBroadLogMid (on a mid-sourcing instance)<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> Only when the 5.10 (or later) instance is used as a mid-sourcing instance. This is one of the largest table in the database. There is one record per message sent, and these records are inserted, updated to track the delivery status, and deleted when the history is purged. When using mid-sourcing, the recommendation is to limit the history (usually less than two months), so this table remains reasonable in terms of size (less than 30 Go for 60 million rows, data+index), but it is very important to rebuild it from time to time. <br /> </td> \n  </tr> \n  <tr> \n   <td> NmsBroadLogRcp (when the NmsRecipient table is used) <br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> This is the largest table in the system. There is one record per message sent, and these records are inserted, updated to track the delivery status, and deleted when the history is purged. Note that in 5.10, this table is smaller than the equivalent in 4.05 (NmsBroadLog) since the SMTP message text is factorized in the NmsBroadLogMsg table in the 5.10 version. However, it remains essential to re-index this table regularly (every other week to start with), and completely rebuild it from time to time (once a month, or when performance is impacted). <br /> </td> \n  </tr> \n  <tr> \n   <td> YyyBroadLogXxx (when an external recipient table is used)<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> Same as NmsBroadLogRcp but with an external recipient table. Please adapt Yyy and Xxx with the values in your delivery mapping. <br /> </td> \n  </tr> \n  <tr> \n   <td> NmsTrackingLogRcp (when the NmsRecipient table is used) <br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, deletions<br /> </td> \n   <td> Tracking logs are inserted and deleted when the history is purged, but they are not updated. The volume depends on the length of data retention. <br /> </td> \n  </tr> \n  <tr> \n   <td> YyyTrackingLogXxx (when the external recipient table is used)<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, deletions<br /> </td> \n   <td> Same as NmsTrackingLogRcp but with an external recipient table. Please adapt Yyy and Xxx with the values used in your delivery mapping. <br /> </td> \n  </tr> \n  <tr> \n   <td> NmsBroadLogRtEvent (Message Center execution instance)<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> Similar to the other broadlog tables, but with the NmsRtEvent instead of NmsRecipient.<br /> </td> \n  </tr> \n  <tr> \n   <td> NmsTrackingLogRtEvent( Message Center execution instance)<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, deletions<br /> </td> \n   <td> Similar to the other trackingLog tables, but with the NmsRtEvent table instead of NmsRecipient.<br /> </td> \n  </tr> \n  <tr> \n   <td> NmsRtEvent (Message Center execution instance)<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> Table containing the Message Center event queue. The status of these events is updated by Message Center as they are processed. Deletions are carried out during the purge. We advise you to regularly recreate the index of this table and rebuild it.<br /> </td> \n  </tr> \n  <tr> \n   <td> NmsEventHisto (Message Center control instance)<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> Similar to NmsRtEvent. This table archives every event from all the execution instances. It is used by no real time process, only by reports.<br /> </td> \n  </tr> \n  <tr> \n   <td> NmsMobileApp<br /> </td> \n   <td> Very small<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> Tables that include mobile applications and their configuration.<br /> </td> \n  </tr> \n  <tr> \n   <td> NmsAppSubscriptionRcp<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, updates<br /> </td> \n   <td> Table that includes the identifiers of mobile devices (addresses) used to send the notification (similar to a recipient table).<br /> </td> \n  </tr> \n  <tr> \n   <td> NmsBroadLogAppSubRcp<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, updates, deletions<br /> </td> \n   <td> Similar to the other broadlog tables, but with the NmsappSubscriptionRcp instead of NmsRecipient.<br /> </td> \n  </tr> \n  <tr> \n   <td> NmsTrackingLogAppSubRcp<br /> </td> \n   <td> Large<br /> </td> \n   <td> Insertions, deletions<br /> </td> \n   <td> Similar to the other trackingLog tables, but with the NmsappSubscriptionRcp table instead of NmsRecipient.<br /> </td> \n  </tr> \n  <tr> \n   <td> XtkSessionInfo<br /> </td> \n   <td> Small<br /> </td> \n   <td> Insertions, deletions<br /> </td> \n   <td> Table that includes user sessions. The number of insertions and deletions is very important.<br /> </td> \n  </tr> \n </tbody> \n</table>\n\n## Customer tables {#customer-tables}\n\nIn addition to the list above, tables containing created by customers (which do not exist in the Adobe Campaign datamodel) during platform setup can also be subject to fragmentation, especially if they are frequently updated during data loading or synchronization procedures. These tables can be part of the default Adobe Campaign data model (for instance **NmsRecipient**). In this case, it is up to the administrator of the Adobe Campaign platform to conduct an audit of its specific database model to find these custom tables. These tables aren't necessarily mentioned explicitly in our maintenance procedures.\n","headers":[["title","Tables to maintain"],["description","Tables to maintain"],["feature","Monitoring"],["topic-tags","database-maintenance"]],"sections":[{"section":"Tables to maintain","sectionId":"d735640c-784f-4459-8b73-46b4172ec1ae","paragraphs":["The list of tables to maintain depends on your version of Adobe Campaign, how you use it and on the datamodel configuration.","The following list contains only the tables most subject to fragmentation. The impacts are as follows:","overconsumption of disk space, thus affecting database access,\nindexes which have not been regularly updated, which slows down query performance."]},{"section":"Adobe Campaign tables","sectionId":"06c327c8-e003-4725-83f5-a7d3d0be880d","paragraphs":["TABLE: Table name Size Main type of activity Comments NmsDelivery Small Updates There is one record per delivery action. A single record can be updated several times to reflect delivery progress, so indexes on this table tend to fragment rapidly. NmsDeliveryPart Medium Insertions, updates, deletions Work table which records are inserted into during delivery preparation. They are then updated during delivery and finally deleted once the delivery is complete. This table tends to fragment rapidly even though its average size is fairly limited. NmsMirrorPageInfo Large Insertions, deletions This table contains the information needed to generate personalized mirror pages. It contains a memo (CLOB) field, and as such will tend to be very large. The volume is directly proportional to the history of mirror pages kept. NmsDeliveryStat Medium Insertions, updates, deletions This table contains statistics on the delivery process. Its records are regularly updated. NmsAddress Medium Updates, insertions This table contains information on email addresses. It is frequently updated as part of the quarantine process (records are created at the first delivery error, updated when the counters change and deleted once delivery is successful). XtkWorkflow Small Updates There is one record per workflow instance, so very few records. However the table it is regularly updated to reflect status and progress. XtkWorkflowTask Small Insertions, updates, deletions Each execution of a workflow activity leads to the creation of a record in this table. The purge mechanism deletes them once they are expired. XtkWorkflowEvent Small Insertions, updates, deletions Each transition activated between tasks in a workflow leads to the creation of a record in this table. The purge mechanism deletes them once they are expired. XtkWorkflowJob Very small Insertions, updates, deletions This table is specific to the workflow engine. It enables the sending of commands to workflows (Start, Stop, Pause, for instance). Although it is small, this table is taken into account during the purge of transactional tables linked to workflows. NmsBroadLog Largest Insertions, updates, deletions This is the largest table in the system. There is one record per message sent, and these records are inserted, updated to track the delivery status, and deleted when the history is purged. NmsTrackingLog Large Insertions, deletions Tracking logs are inserted and deleted when the history is purged, but they are not updated. NmsBroadlogMsg Small Updates This table contains information used for qualifying SMTP errors. It is fairly small, but will be massively updated, so indexes on this table tend to fragment rapidly. NmsEmailErrorStat Medium Insertions, updates, deletions This table contains the aggregates on SMTP errors sorted by domain. It initially contains detailed information which is aggregated by the cleanup task once it becomes outdated. NmsBroadLogMid (on a mid-sourcing instance) Large Insertions, updates, deletions Only when the 5.10 (or later) instance is used as a mid-sourcing instance. This is one of the largest table in the database. There is one record per message sent, and these records are inserted, updated to track the delivery status, and deleted when the history is purged. When using mid-sourcing, the recommendation is to limit the history (usually less than two months), so this table remains reasonable in terms of size (less than 30 Go for 60 million rows, data+index), but it is very important to rebuild it from time to time. NmsBroadLogRcp (when the NmsRecipient table is used) Large Insertions, updates, deletions This is the largest table in the system. There is one record per message sent, and these records are inserted, updated to track the delivery status, and deleted when the history is purged. Note that in 5.10, this table is smaller than the equivalent in 4.05 (NmsBroadLog) since the SMTP message text is factorized in the NmsBroadLogMsg table in the 5.10 version. However, it remains essential to re-index this table regularly (every other week to start with), and completely rebuild it from time to time (once a month, or when performance is impacted). YyyBroadLogXxx (when an external recipient table is used) Large Insertions, updates, deletions Same as NmsBroadLogRcp but with an external recipient table. Please adapt Yyy and Xxx with the values in your delivery mapping. NmsTrackingLogRcp (when the NmsRecipient table is used) Large Insertions, deletions Tracking logs are inserted and deleted when the history is purged, but they are not updated. The volume depends on the length of data retention. YyyTrackingLogXxx (when the external recipient table is used) Large Insertions, deletions Same as NmsTrackingLogRcp but with an external recipient table. Please adapt Yyy and Xxx with the values used in your delivery mapping. NmsBroadLogRtEvent (Message Center execution instance) Large Insertions, updates, deletions Similar to the other broadlog tables, but with the NmsRtEvent instead of NmsRecipient. NmsTrackingLogRtEvent( Message Center execution instance) Large Insertions, deletions Similar to the other trackingLog tables, but with the NmsRtEvent table instead of NmsRecipient. NmsRtEvent (Message Center execution instance) Large Insertions, updates, deletions Table containing the Message Center event queue. The status of these events is updated by Message Center as they are processed. Deletions are carried out during the purge. We advise you to regularly recreate the index of this table and rebuild it. NmsEventHisto (Message Center control instance) Large Insertions, updates, deletions Similar to NmsRtEvent. This table archives every event from all the execution instances. It is used by no real time process, only by reports. NmsMobileApp Very small Insertions, updates, deletions Tables that include mobile applications and their configuration. NmsAppSubscriptionRcp Large Insertions, updates Table that includes the identifiers of mobile devices (addresses) used to send the notification (similar to a recipient table). NmsBroadLogAppSubRcp Large Insertions, updates, deletions Similar to the other broadlog tables, but with the NmsappSubscriptionRcp instead of NmsRecipient. NmsTrackingLogAppSubRcp Large Insertions, deletions Similar to the other trackingLog tables, but with the NmsappSubscriptionRcp table instead of NmsRecipient. XtkSessionInfo Small Insertions, deletions Table that includes user sessions. The number of insertions and deletions is very important."]},{"section":"Customer tables","sectionId":"3f84b366-a135-402a-b7a7-27e336c81202","paragraphs":["In addition to the list above, tables containing created by customers (which do not exist in the Adobe Campaign datamodel) during platform setup can also be subject to fragmentation, especially if they are frequently updated during data loading or synchronization procedures. These tables can be part of the default Adobe Campaign data model (for instance NmsRecipient). In this case, it is up to the administrator of the Adobe Campaign platform to conduct an audit of its specific database model to find these custom tables. These tables aren't necessarily mentioned explicitly in our maintenance procedures."]}]}