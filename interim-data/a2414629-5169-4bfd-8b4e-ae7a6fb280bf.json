{"guid":"a2414629-5169-4bfd-8b4e-ae7a6fb280bf","title":"Switching to Unicode","path":"help\\production\\using\\switching-to-unicode.md","fullText":"---\nproduct: campaign\ntitle: Switching to Unicode\ndescription: Switching to Unicode\nfeature: Monitoring\nbadge-v7-prem: label=\"On-premise/hybrid only\" type=\"Caution\" url=\"https://experienceleague.adobe.com/docs/campaign-classic/using/installing-campaign-classic/architecture-and-hosting-models/hosting-models-lp/hosting-models.html\" tooltip=\"Applies to on-premise and hybrid deployments only\"\naudience: production\ncontent-type: reference\ntopic-tags: updating-adobe-campaign\nexl-id: 4cfecf2f-cf98-42c1-b979-cdd26d5de48b\n---\n# Switching to Unicode{#switching-to-unicode}\n\n\n\nFor an existing **prod** instance in Linux/PostgreSQL, the steps for switching to unicode are as follows:\n\n1. Stop the processes writing to the database:\n\n   ```\n   su - neolane\n   nlserver shutdown\n   ```\n\n1. Dump the database:\n\n   ```\n   su - postgres\n   pg_dump mydatabase > mydatabase.sql\n   ```\n\n1. Create a Unicode database:\n\n   ```\n   createdb -E UNICODE mydatabase_unicode\n   ```\n\n1. Restore the database:\n\n   ```\n   psql mydatabase_unicode < mydatabase.sql\n   ```\n\n1. Update the option indicating that the database is Unicode:\n\n   ```\n   psql mydatabase_unicode\n   update XtkOption set sStringValue = 'u'||sStringValue where sName='XtkDatabaseId' and sStringValue not like 'u%';\n   ```\n\n1. On the tracking servers:\n\n   ```\n   su - neolane\n   cd nl6/conf\n   vi config-prod.xml\n   ```\n\n   Add the **u** character in front of the value relating to the database identifier (**databaseId**):\n\n   ```\n   <web>\n    <redirection databaseId=\"u7F0000010554364C\" trackingPassword=\"myPassword=\"/>\n   </web>\n   ```\n\n1. On servers calling the database:\n\n   ```\n   su - neolane\n   cd nl6/conf\n   vi config-prod.xml\n   ```\n\n   Modify the database reference:\n\n   ```\n   <dataSource name=\"default\">\n    <dbcnx encrypted=\"1\" \n    login=\"<dbuser>:<base_unicode>\" password=\"xxxx=\"\n    provider=\"postgresql\" server=\"yyyy\"/>\n   </dataSource>\n   ```\n\n1. Reboot all the machines:\n\n   ```\n   /etc/init.d/apache stop\n   /etc/init.d/nlserver6 stop\n   /etc/init.d/nlserver6 start\n   /etc/init.d/apache start\n   ```\n\n1. Confirm the switch. To do this, connect via the Adobe Campaign console and:\n\n    * check that the data is displayed correctly, in particular the accentuated characters: \n    * launch a delivery and check that the tracking retrieval works.\n","headers":[["title","Switching to Unicode"],["description","Switching to Unicode"],["feature","Monitoring"],["topic-tags","updating-adobe-campaign"]],"sections":[{"section":"Switching to Unicode","sectionId":"f9ab2d0b-6425-4b60-96a5-5fbd068f08f3","paragraphs":["For an existing prod instance in Linux/PostgreSQL, the steps for switching to unicode are as follows:","Stop the processes writing to the database:","su - neolane\nnlserver shutdown","Dump the database:","su - postgres\npg_dump mydatabase > mydatabase.sql","Create a Unicode database:","createdb -E UNICODE mydatabase_unicode","Restore the database:","psql mydatabase_unicode < mydatabase.sql","Update the option indicating that the database is Unicode:","psql mydatabase_unicode\nupdate XtkOption set sStringValue = 'u'||sStringValue where sName='XtkDatabaseId' and sStringValue not like 'u%';","On the tracking servers:","su - neolane\ncd nl6/conf\nvi config-prod.xml","Add the u character in front of the value relating to the database identifier (databaseId):","<web>\n <redirection databaseId=\"u7F0000010554364C\" trackingPassword=\"myPassword=\"/>\n</web>","On servers calling the database:","su - neolane\ncd nl6/conf\nvi config-prod.xml","Modify the database reference:","<dataSource name=\"default\">\n <dbcnx encrypted=\"1\" \n login=\"<dbuser>:<base_unicode>\" password=\"xxxx=\"\n provider=\"postgresql\" server=\"yyyy\"/>\n</dataSource>","Reboot all the machines:","/etc/init.d/apache stop\n/etc/init.d/nlserver6 stop\n/etc/init.d/nlserver6 start\n/etc/init.d/apache start","Confirm the switch. To do this, connect via the Adobe Campaign console and:","check that the data is displayed correctly, in particular the accentuated characters: \nlaunch a delivery and check that the tracking retrieval works."]}]}