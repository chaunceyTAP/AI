{"guid":"ee06fb50-8c73-4070-b177-d398b0856990","title":"Query the recipient table","path":"help\\workflow\\using\\querying-recipient-table.md","fullText":"---\nproduct: campaign\ntitle: Query the recipient table\ndescription: Learn how to query the recipient table\nfeature: Query Editor, Workflows\nexl-id: 5b037798-b092-4c98-9f6a-4af7fc7941c6\n---\n# Query the recipient table {#querying-recipient-table}\n\n\n\nIn this example, we want to recover the names and emails of recipients whose email domain is \"orange.co.uk\" and who don't live in London.\n\n* Which table should we select?\n\n  The recipient table (nms:recipient)\n\n* Fields to be selected as output columns\n\n  Email, Name, City and Account number\n\n* What are the filtering conditions of the recipients?\n\n  city and email domain\n\n* Is a sort configured?\n\n  Yes, based on **[!UICONTROL Account number]** and **[!UICONTROL Last name]**\n\nTo create this example, apply the following steps:\n\n1. Click **[!UICONTROL Tools > Generic query editor...]** and choose the **Recipients** (**nms:recipient**) table. Then click **[!UICONTROL Next]**.\n1. Choose: **[!UICONTROL Last name]**, **[!UICONTROL First name]**, **[!UICONTROL Email]**, **[!UICONTROL City]** and **[!UICONTROL Account number]**. These fields are added to **[!UICONTROL Output columns]**. Then click **[!UICONTROL Next]**.\n\n   ![](assets/query_editor_03.png)\n\n1. Sort the columns to display them in the right order. Here we want to sort account numbers in descending order and names in alphabetical order. Then click **[!UICONTROL Next]**.\n\n   ![](assets/query_editor_04.png)\n\n1. In the **[!UICONTROL Data filtering]** window, refine your search: choose **[!UICONTROL Filtering conditions]** and click **[!UICONTROL Next]**.\n1. The **[!UICONTROL Target element]** window lets you enter the filter settings.\n\n   Define the following filter condition: recipients with an email domain equal to \"orange.co.uk\". To do this, choose **Email domain (@email)** in the **[!UICONTROL Expression]** column, choose **equal to** in the **[!UICONTROL Operator]** column and enter \"orange.co.uk\" in the **[!UICONTROL Value]** column.\n\n   ![](assets/query_editor_05.png)\n\n1. If needed, click the **[!UICONTROL Distribution of values]** button to view a distribution based on the email domain of prospects. A percentage is available for each email domain in the database. Domains other than \"orange.co.uk\" are displayed until the filter is applied.\n\n   A summary of the query is displayed at the bottom of the window: **Email domain equal to 'orange.co.uk'**. \n\n1. Click the **[!UICONTROL Preview]** to get an idea of the query result: only \"orange.co.uk\" email domains are displayed.\n\n   ![](assets/query_editor_nveau_17.png)\n\n1. We will now change the query to find contacts not living in London.\n\n   Select **[!UICONTROL City (location/@city)]** in the **[!UICONTROL Expression]** column, **[!UICONTROL different from]** as an operator and enter **[!UICONTROL London]** in the **[!UICONTROL Value]** column.\n\n   ![](assets/query_editor_08.png)\n\n1. This will take you to the **[!UICONTROL Data formatting]** window. Check the column order. Move the \"City\" column up under the \"Account number\" column.\n\n   Uncheck the \"First name\" column to remove it from the list.\n\n   ![](assets/query_editor_nveau_15.png)\n\n1. In the **[!UICONTROL Data preview]** window, click **[!UICONTROL Start the preview of the data]**. This function calculates the result of the query.\n\n   The **[!UICONTROL Column results]** tab shows the query result in columns.\n\n   The result shows all recipients with an \"orange.co.uk\" email domain who do not live in London. The \"First name\" column is not shown because it was unchecked during the previous stage. Account numbers are sorted in descending order.\n\n   ![](assets/query_editor_nveau_12.png)\n\n   The **[!UICONTROL XML result]** tab shows the result in XML format.\n\n   ![](assets/query_editor_nveau_13.png)\n\n   The **[!UICONTROL Generated QSL queries]** tab shows the query result in SQL format.\n\n   ![](assets/query_editor_nveau_14.png)\n","headers":[["title","Query the recipient table"],["description","Learn how to query the recipient table"],["feature","Query Editor, Workflows"]],"sections":[{"section":"Query the recipient table","sectionId":"4a0f6af8-14c0-454d-ac5d-ba81cc866ca5","paragraphs":["In this example, we want to recover the names and emails of recipients whose email domain is \"orange.co.uk\" and who don't live in London.","Which table should we select?","The recipient table (nms:recipient)","Fields to be selected as output columns","Email, Name, City and Account number","What are the filtering conditions of the recipients?","city and email domain","Is a sort configured?","Yes, based on Account number and Last name","To create this example, apply the following steps:","Click Tools > Generic query editor... and choose the Recipients (nms:recipient) table. Then click Next.","Choose: Last name, First name, Email, City and Account number. These fields are added to Output columns. Then click Next.","Sort the columns to display them in the right order. Here we want to sort account numbers in descending order and names in alphabetical order. Then click Next.","In the Data filtering window, refine your search: choose Filtering conditions and click Next.","The Target element window lets you enter the filter settings.","Define the following filter condition: recipients with an email domain equal to \"orange.co.uk\". To do this, choose Email domain (@email) in the Expression column, choose equal to in the Operator column and enter \"orange.co.uk\" in the Value column.","If needed, click the Distribution of values button to view a distribution based on the email domain of prospects. A percentage is available for each email domain in the database. Domains other than \"orange.co.uk\" are displayed until the filter is applied.","A summary of the query is displayed at the bottom of the window: Email domain equal to 'orange.co.uk'.","Click the Preview to get an idea of the query result: only \"orange.co.uk\" email domains are displayed.","We will now change the query to find contacts not living in London.","Select City (location/@city) in the Expression column, different from as an operator and enter London in the Value column.","This will take you to the Data formatting window. Check the column order. Move the \"City\" column up under the \"Account number\" column.","Uncheck the \"First name\" column to remove it from the list.","In the Data preview window, click Start the preview of the data. This function calculates the result of the query.","The Column results tab shows the query result in columns.","The result shows all recipients with an \"orange.co.uk\" email domain who do not live in London. The \"First name\" column is not shown because it was unchecked during the previous stage. Account numbers are sorted in descending order.","The XML result tab shows the result in XML format.","The Generated QSL queries tab shows the query result in SQL format."]}]}