{"guid":"9a477f3c-7c68-42e4-b01f-4087230e863c","title":"Send transactional emails with attachments","path":"help\\message-center\\using\\transactional-email-with-attachments.md","fullText":"---\nproduct: campaign\ntitle: Send transactional emails with attachments\ndescription: Learn how to send transactional emails with individual and/or personalized attachments using Adobe Campaign\nfeature: Transactional Messaging, Message Center\nexl-id: 755d2364-f6c4-4943-97e8-3ed52a0f2665\n---\n# Use case: Send transactional emails with attachments {#transactional-email-with-attachments}\n\n\n\nThe purpose of this use case is to add email attachments on the fly to outbound dispatches.\n\n## Key steps {#key-steps}\n\nIn this scenario, you will learn how to send transactional emails with individual and/or personalized attachments. The attachments will not be pre-uploaded on the Transactional messaging server: instead they will be generated on the fly.\n\nWhen you capture customer interactions or details, you may need to send this information back to the customer at the end of the process, for example in a PDF file attached to an email.\n\nBelow are the main steps of this scenario:\n\n1. The customer enters the website, finds a product that they want to purchase.\n1. The customer selects the product and customizes some options.\n1. The customer completes the transaction.\n1. An email is sent to the customer confirming the transaction. Because it is not recommended to send PII (Personally Identifiable Information) out in the email, a secure PDF is generated and attached to the email.\n1. The customer receives the email and its attachment containing the relevant data.\n\nIn this scenario, the attachments are not pre-created, but added on the fly to the outbound emails, which offers the following benefits:\n\n* This allows you to personalize the content of the attachment.\n* If the attachment is associated with a transaction (as in the example scenario described above), it may contain dynamic data that is generated during the customer process.\n* Attaching PDF files optimizes security as you can encrypt them and send them over HTTPS.\n\n## Recommendations and guardrails {#important-notes}\n\nTo avoid performance issues, images included in emails cannot exceed 100 KB. This limit, set by default, can be changed from the `NmsDelivery_MaxDownloadedImageSize` option. However, Adobe strongly recommends to avoid large images in your email deliveries.\n\nAdobe also recommends to limit the size and number of attached files. By default, you can only add one file as an attachment to an email. This threshold can be configured from the `NmsDelivery_MaxRecommendedAttachments` option. \n\nLearn more in [the list of Campaign Classic options](../../installation/using/configuring-campaign-options.md#delivery). \n\nBefore implementing this scenario, read carefully the guidelines below:\n\n* The Transactional messaging instances should not be used to store, export, or upload files or data. They can only be used for event data and related information. They should not be considered as a file storage system.\n* Since there is no direct access to the Transactional messaging instances or servers outside of Adobe, there is no standard way to push such files on these servers (no FTP access). \n* It is not contractually correct to use the disk space on the Transactional messaging instances to store files of any sort, not even for attachments.\n* You need to use another online disk system to host these files. You need an FTP access to this system and you must be able to write and delete files.\n\n>[!NOTE]\n>\n>To avoid performance issue, it is recommended not to include more than one attachment per email. The recommended threshold can be configured from [the list of Campaign Classic options](../../installation/using/configuring-campaign-options.md#delivery).\n\n## Implementation {#implementation}\n\nThe diagram below shows the different steps when implementing this scenario:\n\n![](assets/message-center-uc1.png)\n\nTo add an email attachment on the fly to a transactional message, follow the steps below:\n\n1. Start by designing your attachment. For more on this, see [this section](../../delivery/using/attaching-files.md#attach-a-personalized-file).\n    \n    This allows you to have the files attached to an email, even if they are not hosted on the execution instance.\n\n1. You can send emails via a SOAP message trigger. In the SOAP call, there is a URL parameter (attachmentURL).\n\n    For more information on SOAP requests, see [Event description](../../message-center/using/event-description.md).\n\n1. When designing your email, click **[!UICONTROL Attachment]**.\n\n1. In the **[!UICONTROL Attachment definition]** screen, enter the SOAP attachment parameter:\n\n    ```\n    <%= rtEvent.ctx.attachmentUrl %>\n    ```\n\n1. When the message is processed, the system will get the file from the remote location (third-party server) and attach it to the individual message.\n\n    Since this parameter can be a variable, it should accept the fully formed remote URL variable of your file, sent via the SOAP call.\n\n    ![](assets/message-center-uc2.png)\n","headers":[["title","Send transactional emails with attachments"],["description","Learn how to send transactional emails with individual and/or personalized attachments using Adobe Campaign"],["feature","Transactional Messaging, Message Center"]],"sections":[{"section":"Use case: Send transactional emails with attachments","sectionId":"9ca4b83f-ecdd-4a28-9e60-64ec35704e83","paragraphs":["The purpose of this use case is to add email attachments on the fly to outbound dispatches."]},{"section":"Key steps","sectionId":"f2f11af4-9ac9-40a7-ac9f-edc5fc06eec1","paragraphs":["In this scenario, you will learn how to send transactional emails with individual and/or personalized attachments. The attachments will not be pre-uploaded on the Transactional messaging server: instead they will be generated on the fly.","When you capture customer interactions or details, you may need to send this information back to the customer at the end of the process, for example in a PDF file attached to an email.","Below are the main steps of this scenario:","The customer enters the website, finds a product that they want to purchase.\nThe customer selects the product and customizes some options.\nThe customer completes the transaction.\nAn email is sent to the customer confirming the transaction. Because it is not recommended to send PII (Personally Identifiable Information) out in the email, a secure PDF is generated and attached to the email.\nThe customer receives the email and its attachment containing the relevant data.","In this scenario, the attachments are not pre-created, but added on the fly to the outbound emails, which offers the following benefits:","This allows you to personalize the content of the attachment.\nIf the attachment is associated with a transaction (as in the example scenario described above), it may contain dynamic data that is generated during the customer process.\nAttaching PDF files optimizes security as you can encrypt them and send them over HTTPS."]},{"section":"Recommendations and guardrails","sectionId":"8b9712d5-571a-429a-9d50-b8747b9bd640","paragraphs":["To avoid performance issues, images included in emails cannot exceed 100 KB. This limit, set by default, can be changed from the NmsDelivery_MaxDownloadedImageSize option. However, Adobe strongly recommends to avoid large images in your email deliveries.","Adobe also recommends to limit the size and number of attached files. By default, you can only add one file as an attachment to an email. This threshold can be configured from the NmsDelivery_MaxRecommendedAttachments option.","Learn more in the list of Campaign Classic options.","Before implementing this scenario, read carefully the guidelines below:","The Transactional messaging instances should not be used to store, export, or upload files or data. They can only be used for event data and related information. They should not be considered as a file storage system.\nSince there is no direct access to the Transactional messaging instances or servers outside of Adobe, there is no standard way to push such files on these servers (no FTP access). \nIt is not contractually correct to use the disk space on the Transactional messaging instances to store files of any sort, not even for attachments.\nYou need to use another online disk system to host these files. You need an FTP access to this system and you must be able to write and delete files.","NOTE","To avoid performance issue, it is recommended not to include more than one attachment per email. The recommended threshold can be configured from the list of Campaign Classic options."]},{"section":"Implementation","sectionId":"5ae22cdd-6d00-44b2-bacf-5e929fdc900b","paragraphs":["The diagram below shows the different steps when implementing this scenario:","To add an email attachment on the fly to a transactional message, follow the steps below:","Start by designing your attachment. For more on this, see this section.","This allows you to have the files attached to an email, even if they are not hosted on the execution instance.","You can send emails via a SOAP message trigger. In the SOAP call, there is a URL parameter (attachmentURL).","For more information on SOAP requests, see Event description.","When designing your email, click Attachment.","In the Attachment definition screen, enter the SOAP attachment parameter:","<%= rtEvent.ctx.attachmentUrl %>","When the message is processed, the system will get the file from the remote location (third-party server) and attach it to the individual message.","Since this parameter can be a variable, it should accept the fully formed remote URL variable of your file, sent via the SOAP call."]}]}