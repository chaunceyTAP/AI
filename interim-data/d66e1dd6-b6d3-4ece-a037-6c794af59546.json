{"guid":"d66e1dd6-b6d3-4ece-a037-6c794af59546","title":"Automatic Privacy request process","path":"help\\platform\\using\\privacy-requests-api.md","fullText":"---\nproduct: campaign\ntitle: Automatic Privacy request process\ndescription: Learn how to setup an automatic Privacy request process\nfeature: Privacy, Privacy Tools\naudience: platform\ncontent-type: reference\ntopic-tags: starting-with-adobe-campaign\nexl-id: a93bac61-f615-4178-bc12-0f056e48687d\n---\n# Automatic Privacy request process {#automatic-privacy-request-api}\n\n\n\nAdobe Campaign provides an **API** which allows you to setup an automatic Privacy request process.\n\nWith the API, the general Privacy process is the same as [using the interface](privacy-requests-ui.md). The only difference is the creation of the Privacy request. Instead of creating the request in Adobe Campaign, a POST containing the request information is sent to Campaign. For every request, a new entry is added in the **[!UICONTROL Privacy Requests]** screen. The Privacy technical workflows then process the request, the same way as for a request added using the interface.\n\nIf you're using the API to submit Privacy requests, we recommend that you leave the **2-step process** activated for the first Delete requests, in order to test the returned data. When your tests are finished, you can deactivate the 2-step process so that the Delete request process can run automatically.\n\nThe **[!UICONTROL CreateRequestByName]** JS API is defined as follows.\n\n>[!NOTE]\n>\n>If you were using the **gdprRequest** API, you can still use it but it is recommended to use the new **privacyRequest** API.\n\n>[!IMPORTANT]\n>\n>The **[!UICONTROL Privacy Data Right]** named right is required to use the API.\n\n```\n<method library=\"nms:gdpr.js\" name=\"CreateRequestByName\" static=\"true\">\n <help>Create a new GDPR Request using namespace internal name</help>\n <parameters>\n  <param name=\"namespaceName\" type=\"string\" desc=\"Namespace internal name\"/>\n  <param name=\"reconciliationValue\" type=\"string\" desc=\"Reconciliation value\"/>\n  <param name=\"type\" type=\"long\" desc=\"Reconciliation value\"/>\n  <param name=\"confirmDeletePending\" type=\"boolean\" desc=\"Request confirm before deleting data\"/>\n  <param name=\"regulation\" type=\"long\" desc=\"regulation of newly created request\"/>\n  <param name=\"id\" type=\"long\" inout=\"out\" desc=\"ID of newly created request\"/>\n </parameters>\n</method>\n```\n\n>[!NOTE]\n>\n>The 'regulation' field is only available if you are using Campaign Classic 20.2 (build 9178+).\n>\n>If you are migrating to 20.2 and if you were already using the API, you must add the ‘regulation’ field as shown above. If you are using a previous build, you can continue to use the API without the ‘regulation’ field.\n\n## Invoking the API externally {#invoking-api-externally}\n\nHere is an example of how you can invoke the API externally (authentication via the API and details about the Privacy API specifically). For more information on the Privacy API, consult the [API documentation](https://experienceleague.adobe.com/developer/campaign-api/api/s-nms-privacyRequest.html). You can also consult the [Web service calls documentation](../../configuration/using/web-service-calls.md).\n\nFirst of all, you need to perform the authentication via the API:\n\n1. Download the **xtk:session** WSDL via this url: **`<server url>`/nl/jsp/schemawsdl.jsp?schema=xtk:session**.\n\n1. Use the \"Logon\" method and pass in a username and password as parameters in the request. You will get a response containing a session token. Here is an example using SoapUI.\n\n    ![](assets/do-not-localize/privacy-api.png)\n\n1. Use the returned Session Token as the authentication for all subsequence API calls. It expires after 24 hours.\n\nThen invoke the Privacy API:\n\n1. Download the WSDL from this URL: **`<server url>`/nl/jsp/schemawsdl.jsp?schema=nms:privacyRequest**.\n\n1. Use **[!UICONTROL CreateRequestByName]** to create a specific Privacy request.\n\n    Here is an example using the **[!UICONTROL CreateRequestByName]**. Note how we use the session token provided above as authentication. The response is the ID of the created request.\n\n    ![](assets/do-not-localize/privacy-api-2.png)\n\n    To help you perform the steps above, consider the following:\n\n    * You can use a **queryDef** on the **nms:gdprRequest** schema to check the status of the Access request.\n    * You can use a **queryDef** on the **nms:gdprRequestData** schema to get the result of the Access request.\n    * To be able to download the XML file from **\"$(serverUrl)'/nms/gdpr.jssp?id='@id\"**, you must be logged in and accessing it from an IP that is included in the allowlist. To do this, create a web application allowing you to access the file generated by the JSSP.\n\n## Invoking the API from a JS {#invoking-api-from-js}\n\nHere is an example of how you can invoke the API from a JS within Campaign Classic.\n\n>[!NOTE]\n>\n>The 'regulation' field is only available if you are using Campaign Classic 20.2 (build 9178+).\n>\n>If you are migrating to 20.2 and if you were already using the API, you must add the ‘regulation’ field. If you are using a previous build, you can continue to use the API without the ‘regulation’ field.\n\n* If you are **using a previous build (with GDPR package)**, you can continue to use the API without the ‘regulation’ field as shown below:\n\n    ```\n    loadLibrary(\"nms:gdpr.js\");\n    /**************************** \n    This code calls an API to create new Privacy request on the DB.\n    It requires 4 parameters below.\n    Feel free to change parameter values.\n    ****************************/\n    // 1. Namespace internal name\n    var namespaceName = \"defaultNamespace1\";\n    // 2. Reconciliation value for privacy request\n    var reconciliationValue = \"example@adobe.com\";\n    // 3. Privacy request type\n    // GDPR_REQUEST_TYPE_ACCESS = 1;\n    // GDPR_REQUEST_TYPE_DELETE = 2;\n    var requestType = GDPR_REQUEST_TYPE_ACCESS;\n    // 4. Confirm deleting data required.\n    // value : true or false\n    var ConfirmDeletePending = true;\n    // BEGIN\n    var requestId = nms.privacyRequest.CreateRequestByName(namespaceName, reconciliationValue, requestType, ConfirmDeletePending);\n    // User can use a simple queryDef with requestID as a parameter to check request status.\n    ```\n\n* If you are **migrating to 20.2** and if you were already using the API, you must add the ‘regulation’ field as shown below:\n\n    ```\n    loadLibrary(\"nms:gdpr.js\");\n    /**************************** \n    This code calls an API to create new Privacy request on the DB.\n    It requires 5 parameters below.\n    Feel free to change parameter values.\n    ****************************/\n    // 1. Namespace internal name\n    var namespaceName = \"defaultNamespace1\";\n    // 2. Reconciliation value for privacy request\n    var reconciliationValue = \"example@adobe.com\";\n    // 3. Privacy request type\n    // PRIVACY_REQUEST_TYPE_ACCESS = 1;\n    // PRIVACY_REQUEST_TYPE_DELETE = 2;\n    var requestType = PRIVACY_REQUEST_TYPE_ACCESS;\n    // 4. Confirm deleting data required.\n    // value : true or false\n    var ConfirmDeletePending = true;\n    // 5. Specify which regulation applies to newly created request. This is mandatory parameter.\n    // GDPR = 1\n    // CCPA = 2\n    // PDPA = 3\n    // LGPD = 4\n    var regulation = 1;\n    // BEGIN\n    var requestId = nms.privacyRequest.CreateRequestByName(namespaceName, reconciliationValue, requestType, ConfirmDeletePending, regulation);\n    // User can use a simple queryDef with requestID as a parameter to check request status.\n    ```\n\n* If you are **using Campaign Classic 20.2 (build 9178+) or above**, the 'regulation' field is optional, as shown below:\n\n    ```\n    loadLibrary(\"nms:gdpr.js\");\n    /**************************** \n    This code calls an API to create new Privacy request on the DB.\n    It requires 5 parameters below.\n    Feel free to change parameter values \n    ****************************/\n    // 1. Namespace internal name\n    var namespaceName = \"defaultNamespace1\";\n    // 2. Reconciliation value for privacy request\n    var reconciliationValue = \"example@adobe.com\";\n    // 3. Privacy request type\n    // PRIVACY_REQUEST_TYPE_ACCESS = 1;\n    // PRIVACY_REQUEST_TYPE_DELETE = 2;\n    var requestType = PRIVACY_REQUEST_TYPE_ACCESS;\n    // 4. Confirm deleting data required.\n    // value : true or false\n    var ConfirmDeletePending = true;\n    // 5. Specify which regulation applies to newly created request. This is optional parameter.\n    // GDPR = 1\n    // CCPA = 2\n    // PDPA = 3\n    // LGPD = 4\n    var regulation = 1;\n    // BEGIN\n    var requestId = nms.privacyRequest.CreateRequestByName(namespaceName, reconciliationValue, requestType, ConfirmDeletePending, regulation);\n    // User can use a simple queryDef with requestID as a parameter to check request status.\n    ```\n","headers":[["title","Automatic Privacy request process"],["description","Learn how to setup an automatic Privacy request process"],["feature","Privacy, Privacy Tools"],["topic-tags","starting-with-adobe-campaign"]],"sections":[{"section":"Automatic Privacy request process","sectionId":"546ecd88-c5ec-470d-b2cb-2cf0ce57fdb3","paragraphs":["Adobe Campaign provides an API which allows you to setup an automatic Privacy request process.","With the API, the general Privacy process is the same as using the interface. The only difference is the creation of the Privacy request. Instead of creating the request in Adobe Campaign, a POST containing the request information is sent to Campaign. For every request, a new entry is added in the Privacy Requests screen. The Privacy technical workflows then process the request, the same way as for a request added using the interface.","If you're using the API to submit Privacy requests, we recommend that you leave the 2-step process activated for the first Delete requests, in order to test the returned data. When your tests are finished, you can deactivate the 2-step process so that the Delete request process can run automatically.","The CreateRequestByName JS API is defined as follows.","NOTE","If you were using the gdprRequest API, you can still use it but it is recommended to use the new privacyRequest API.","IMPORTANT","The Privacy Data Right named right is required to use the API.","<method library=\"nms:gdpr.js\" name=\"CreateRequestByName\" static=\"true\">\n <help>Create a new GDPR Request using namespace internal name</help>\n <parameters>\n  <param name=\"namespaceName\" type=\"string\" desc=\"Namespace internal name\"/>\n  <param name=\"reconciliationValue\" type=\"string\" desc=\"Reconciliation value\"/>\n  <param name=\"type\" type=\"long\" desc=\"Reconciliation value\"/>\n  <param name=\"confirmDeletePending\" type=\"boolean\" desc=\"Request confirm before deleting data\"/>\n  <param name=\"regulation\" type=\"long\" desc=\"regulation of newly created request\"/>\n  <param name=\"id\" type=\"long\" inout=\"out\" desc=\"ID of newly created request\"/>\n </parameters>\n</method>","NOTE","The 'regulation' field is only available if you are using Campaign Classic 20.2 (build 9178+).","If you are migrating to 20.2 and if you were already using the API, you must add the ‘regulation’ field as shown above. If you are using a previous build, you can continue to use the API without the ‘regulation’ field."]},{"section":"Invoking the API externally","sectionId":"666549f0-456d-4196-9527-c678cce5747a","paragraphs":["Here is an example of how you can invoke the API externally (authentication via the API and details about the Privacy API specifically). For more information on the Privacy API, consult the API documentation. You can also consult the Web service calls documentation.","First of all, you need to perform the authentication via the API:","Download the xtk:session WSDL via this url: <server url>/nl/jsp/schemawsdl.jsp?schema=xtk:session.","Use the \"Logon\" method and pass in a username and password as parameters in the request. You will get a response containing a session token. Here is an example using SoapUI.","","Use the returned Session Token as the authentication for all subsequence API calls. It expires after 24 hours.","Then invoke the Privacy API:","Download the WSDL from this URL: <server url>/nl/jsp/schemawsdl.jsp?schema=nms:privacyRequest.","Use CreateRequestByName to create a specific Privacy request.","Here is an example using the CreateRequestByName. Note how we use the session token provided above as authentication. The response is the ID of the created request.","","To help you perform the steps above, consider the following:","You can use a queryDef on the nms:gdprRequest schema to check the status of the Access request.\nYou can use a queryDef on the nms:gdprRequestData schema to get the result of the Access request.\nTo be able to download the XML file from \"$(serverUrl)'/nms/gdpr.jssp?id='@id\", you must be logged in and accessing it from an IP that is included in the allowlist. To do this, create a web application allowing you to access the file generated by the JSSP."]},{"section":"Invoking the API from a JS","sectionId":"80465d01-0c1f-410c-82b8-2aea8980fd31","paragraphs":["Here is an example of how you can invoke the API from a JS within Campaign Classic.","NOTE","The 'regulation' field is only available if you are using Campaign Classic 20.2 (build 9178+).","If you are migrating to 20.2 and if you were already using the API, you must add the ‘regulation’ field. If you are using a previous build, you can continue to use the API without the ‘regulation’ field.","If you are using a previous build (with GDPR package), you can continue to use the API without the ‘regulation’ field as shown below:","loadLibrary(\"nms:gdpr.js\");\n/**************************** \nThis code calls an API to create new Privacy request on the DB.\nIt requires 4 parameters below.\nFeel free to change parameter values.\n****************************/\n// 1. Namespace internal name\nvar namespaceName = \"defaultNamespace1\";\n// 2. Reconciliation value for privacy request\nvar reconciliationValue = \"example@adobe.com\";\n// 3. Privacy request type\n// GDPR_REQUEST_TYPE_ACCESS = 1;\n// GDPR_REQUEST_TYPE_DELETE = 2;\nvar requestType = GDPR_REQUEST_TYPE_ACCESS;\n// 4. Confirm deleting data required.\n// value : true or false\nvar ConfirmDeletePending = true;\n// BEGIN\nvar requestId = nms.privacyRequest.CreateRequestByName(namespaceName, reconciliationValue, requestType, ConfirmDeletePending);\n// User can use a simple queryDef with requestID as a parameter to check request status.","If you are migrating to 20.2 and if you were already using the API, you must add the ‘regulation’ field as shown below:","loadLibrary(\"nms:gdpr.js\");\n/**************************** \nThis code calls an API to create new Privacy request on the DB.\nIt requires 5 parameters below.\nFeel free to change parameter values.\n****************************/\n// 1. Namespace internal name\nvar namespaceName = \"defaultNamespace1\";\n// 2. Reconciliation value for privacy request\nvar reconciliationValue = \"example@adobe.com\";\n// 3. Privacy request type\n// PRIVACY_REQUEST_TYPE_ACCESS = 1;\n// PRIVACY_REQUEST_TYPE_DELETE = 2;\nvar requestType = PRIVACY_REQUEST_TYPE_ACCESS;\n// 4. Confirm deleting data required.\n// value : true or false\nvar ConfirmDeletePending = true;\n// 5. Specify which regulation applies to newly created request. This is mandatory parameter.\n// GDPR = 1\n// CCPA = 2\n// PDPA = 3\n// LGPD = 4\nvar regulation = 1;\n// BEGIN\nvar requestId = nms.privacyRequest.CreateRequestByName(namespaceName, reconciliationValue, requestType, ConfirmDeletePending, regulation);\n// User can use a simple queryDef with requestID as a parameter to check request status.","If you are using Campaign Classic 20.2 (build 9178+) or above, the 'regulation' field is optional, as shown below:","loadLibrary(\"nms:gdpr.js\");\n/**************************** \nThis code calls an API to create new Privacy request on the DB.\nIt requires 5 parameters below.\nFeel free to change parameter values \n****************************/\n// 1. Namespace internal name\nvar namespaceName = \"defaultNamespace1\";\n// 2. Reconciliation value for privacy request\nvar reconciliationValue = \"example@adobe.com\";\n// 3. Privacy request type\n// PRIVACY_REQUEST_TYPE_ACCESS = 1;\n// PRIVACY_REQUEST_TYPE_DELETE = 2;\nvar requestType = PRIVACY_REQUEST_TYPE_ACCESS;\n// 4. Confirm deleting data required.\n// value : true or false\nvar ConfirmDeletePending = true;\n// 5. Specify which regulation applies to newly created request. This is optional parameter.\n// GDPR = 1\n// CCPA = 2\n// PDPA = 3\n// LGPD = 4\nvar regulation = 1;\n// BEGIN\nvar requestId = nms.privacyRequest.CreateRequestByName(namespaceName, reconciliationValue, requestType, ConfirmDeletePending, regulation);\n// User can use a simple queryDef with requestID as a parameter to check request status."]}]}