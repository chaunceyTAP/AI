{"guid":"91f07252-7590-4557-a6c2-0497352b499f","title":"Database mapping","path":"help\\configuration\\using\\database-mapping.md","fullText":"---\nproduct: campaign\ntitle: Database mapping\ndescription: Database mapping\nfeature: Configuration, Instance Settings\nrole: Data Engineer, Developer\nexl-id: 728b509f-2755-48df-8b12-449b7044e317\n---\n# Database mapping{#database-mapping}\n\nThe SQL mapping of the sample schema described [in this page](schema-structure.md) generates the following XML document:\n\n```sql\n<schema mappingType=\"sql\" name=\"recipient\" namespace=\"cus\" xtkschema=\"xtk:schema\">\n  <enumeration basetype=\"byte\" name=\"gender\">    \n    <value label=\"Not specified\" name=\"unknown\" value=\"0\"/>    \n    <value label=\"Male\" name=\"male\" value=\"1\"/>    \n    <value label=\"Female\" name=\"female\" value=\"2\"/> \n  </enumeration>  \n\n  <element name=\"recipient\" sqltable=\"CusRecipient\">    \n    <attribute desc=\"Recipient email address\" label=\"Email\" length=\"80\" name=\"email\" sqlname=\"sEmail\" type=\"string\"/>    \n    <attribute default=\"GetDate()\" label=\"Date of creation\" name=\"created\" sqlname=\"tsCreated\" type=\"datetime\"/>    \n    <attribute enum=\"gender\" label=\"Gender\" name=\"gender\" sqlname=\"iGender\" type=\"byte\"/>    \n    <element label=\"Location\" name=\"location\">      \n      <attribute label=\"City\" length=\"50\" name=\"city\" sqlname=\"sCity\" type=\"string\" userEnum=\"city\"/>    \n    </element>  \n  </element>\n</schema>\n```\n\nThe root element of the schema changed to **`<srcschema>`** to **`<schema>`**.\n\nThis other type of document is generated automatically from the source schema, and simply referred to as the schema.\n\nThe SQL names are determined automatically based on element name and type.\n\nThe SQL naming rules are as follows:\n\n* **table**: concatenation of the schema namespace and name\n\n  In our example, the name of the table is entered via the main element of the schema in the **sqltable** attribute:\n\n  ```sql\n  <element name=\"recipient\" sqltable=\"CusRecipient\">\n  ```\n\n* **field**: name of the element preceded by a prefix defined according to type: 'i' for integer, 'd' for double, 's' for string, 'ts' for dates, etc.\n\n  The field name is entered via the **sqlname** attribute for each typed **`<attribute>`** and **`<element>`**:\n\n  ```sql\n  <attribute desc=\"Email address of recipient\" label=\"Email\" length=\"80\" name=\"email\" sqlname=\"sEmail\" type=\"string\"/> \n  ```\n\n>[!NOTE]\n>\n>SQL names can be overloaded from the source schema. To do this, populate the \"sqltable\" or \"sqlname\" attributes on the element concerned.\n\nThe SQL script to create the table generated from the extended schema is as follows:\n\n```sql\nCREATE TABLE CusRecipient(\n  iGender NUMERIC(3) NOT NULL Default 0,   \n  sCity VARCHAR(50),   \n  sEmail VARCHAR(80),\n  tsCreated TIMESTAMP Default NULL);\n```\n\nThe SQL field constraints are as follows:\n\n* no null values in numeric and date fields\n* numeric fields are initialized to 0\n\n## XML fields {#xml-fields}\n\nBy default, any  **`<attribute>`** and **`<element>`** -typed element is mapped onto an SQL field of the data schema table. You can, however, reference this field in XML instead of SQL, which means that the data is stored in a memo field (\"mData\") of the table containing the values of all XML fields. The storage of these data is an XML document that observes the schema structure.\n\nTo populate a field in XML, you must add the **xml** attribute with the value \"true\" to the element concerned.\n\n**Example**: here are two examples of XML field use.\n\n* Multi-line comment field:\n\n  ```sql\n  <element name=\"comment\" xml=\"true\" type=\"memo\" label=\"Comment\"/>\n  ```\n\n* Description of data in HTML format:\n\n  ```sql\n  <element name=\"description\" xml=\"true\" type=\"html\" label=\"Description\"/>\n  ```\n\n  The \"html\" type lets you store the HTML content in a CDATA tag and display a special HTML edit check in the Adobe Campaign client interface.\n\nUse XML fields to add new fields without modifying the physical structure of the database. Another advantage is that you use less resources (size allocated to SQL fields, limit on the number of fields per table, etc.). However, note that you cannot index or filter an XML field.\n\n## Indexed fields {#indexed-fields}\n\nIndexes let you optimize the performance of the SQL queries used in the application.\n\nAn index is declared from the main element of the data schema.\n\n```sql\n<dbindex name=\"name_of_index\" unique=\"true/false\">\n  <keyfield xpath=\"xpath_of_field1\"/>\n  <keyfield xpath=\"xpath_of_field2\"/>\n  ...\n</key>\n```\n\nIndexes obey the following rules:\n\n* An index can reference one or more fields in the table\n* An index can be unique (to avoid duplicates) in all of the fields if the **unique** attribute contains the value \"true\"\n* The SQL name of the index is determined from the SQL name of the table and the name of the index\n\n>[!NOTE]\n>\n>* As a standard, indexes are the first elements declared from the main element of the schema.\n>\n>* Indexes are created automatically during table mapping (standard or FDA).\n\n**Example**:\n\n* Adding an index to the email address and city:\n\n  ```sql\n  <srcSchema name=\"recipient\" namespace=\"cus\">\n    <element name=\"recipient\">\n      <dbindex name=\"email\">\n        <keyfield xpath=\"@email\"/> \n        <keyfield xpath=\"location/@city\"/> \n      </dbindex>\n  \n      <attribute name=\"email\" type=\"string\" length=\"80\" label=\"Email\" desc=\"Email address of recipient\"/>\n      <element name=\"location\" label=\"Location\">\n        <attribute name=\"city\" type=\"string\" length=\"50\" label=\"City\" userEnum=\"city\"/>\n      </element>\n    </element>\n  </srcSchema>\n  ```\n\n* Adding a unique index to the \"id\" name field:\n\n  ```sql\n  <srcSchema name=\"recipient\" namespace=\"cus\">\n    <element name=\"recipient\">\n      <dbindex name=\"id\" unique=\"true\">\n        <keyfield xpath=\"@id\"/> \n      </dbindex>\n  \n      <dbindex name=\"email\">\n        <keyfield xpath=\"@email\"/> \n      </dbindex>\n  \n      <attribute name=\"id\" type=\"long\" label=\"Identifier\"/>\n      <attribute name=\"email\" type=\"string\" length=\"80\" label=\"Email\" desc=\"Email address of recipient\"/>\n    </element>\n  </srcSchema>\n  ```\n\n## Learn more\n\nBrowse the following links to learn more:\n\n* [Get started with schemas](about-schema-reference.md)\n* [Schema structure](schema-structure.md)\n* [Key management](database-keys.md)\n* [Link management](database-links.md)\n* [Campaign datamodel](about-data-model.md)","headers":[["title","Database mapping"],["description","Database mapping"],["feature","Configuration, Instance Settings"]],"sections":[{"section":"Database mapping","sectionId":"b6654ef6-edb3-402c-8cf9-a22f68ee53ec","paragraphs":["The SQL mapping of the sample schema described in this page generates the following XML document:","<schema mappingType=\"sql\" name=\"recipient\" namespace=\"cus\" xtkschema=\"xtk:schema\">\n  <enumeration basetype=\"byte\" name=\"gender\">    \n    <value label=\"Not specified\" name=\"unknown\" value=\"0\"/>    \n    <value label=\"Male\" name=\"male\" value=\"1\"/>    \n    <value label=\"Female\" name=\"female\" value=\"2\"/> \n  </enumeration>","<element name=\"recipient\" sqltable=\"CusRecipient\">    \n    <attribute desc=\"Recipient email address\" label=\"Email\" length=\"80\" name=\"email\" sqlname=\"sEmail\" type=\"string\"/>    \n    <attribute default=\"GetDate()\" label=\"Date of creation\" name=\"created\" sqlname=\"tsCreated\" type=\"datetime\"/>    \n    <attribute enum=\"gender\" label=\"Gender\" name=\"gender\" sqlname=\"iGender\" type=\"byte\"/>    \n    <element label=\"Location\" name=\"location\">      \n      <attribute label=\"City\" length=\"50\" name=\"city\" sqlname=\"sCity\" type=\"string\" userEnum=\"city\"/>    \n    </element>  \n  </element>\n</schema>","The root element of the schema changed to <srcschema> to <schema>.","This other type of document is generated automatically from the source schema, and simply referred to as the schema.","The SQL names are determined automatically based on element name and type.","The SQL naming rules are as follows:","table: concatenation of the schema namespace and name","In our example, the name of the table is entered via the main element of the schema in the sqltable attribute:","<element name=\"recipient\" sqltable=\"CusRecipient\">","field: name of the element preceded by a prefix defined according to type: 'i' for integer, 'd' for double, 's' for string, 'ts' for dates, etc.","The field name is entered via the sqlname attribute for each typed <attribute> and <element>:","<attribute desc=\"Email address of recipient\" label=\"Email\" length=\"80\" name=\"email\" sqlname=\"sEmail\" type=\"string\"/>","NOTE","SQL names can be overloaded from the source schema. To do this, populate the \"sqltable\" or \"sqlname\" attributes on the element concerned.","The SQL script to create the table generated from the extended schema is as follows:","CREATE TABLE CusRecipient(\n  iGender NUMERIC(3) NOT NULL Default 0,   \n  sCity VARCHAR(50),   \n  sEmail VARCHAR(80),\n  tsCreated TIMESTAMP Default NULL);","The SQL field constraints are as follows:","no null values in numeric and date fields\nnumeric fields are initialized to 0"]},{"section":"XML fields","sectionId":"a92d1511-e99a-4bac-9a14-4870e07a886f","paragraphs":["By default, any  <attribute> and <element> -typed element is mapped onto an SQL field of the data schema table. You can, however, reference this field in XML instead of SQL, which means that the data is stored in a memo field (\"mData\") of the table containing the values of all XML fields. The storage of these data is an XML document that observes the schema structure.","To populate a field in XML, you must add the xml attribute with the value \"true\" to the element concerned.","Example: here are two examples of XML field use.","Multi-line comment field:","<element name=\"comment\" xml=\"true\" type=\"memo\" label=\"Comment\"/>","Description of data in HTML format:","<element name=\"description\" xml=\"true\" type=\"html\" label=\"Description\"/>","The \"html\" type lets you store the HTML content in a CDATA tag and display a special HTML edit check in the Adobe Campaign client interface.","Use XML fields to add new fields without modifying the physical structure of the database. Another advantage is that you use less resources (size allocated to SQL fields, limit on the number of fields per table, etc.). However, note that you cannot index or filter an XML field."]},{"section":"Indexed fields","sectionId":"5a73b347-c85f-4b6f-a276-d5f2bc59441d","paragraphs":["Indexes let you optimize the performance of the SQL queries used in the application.","An index is declared from the main element of the data schema.","<dbindex name=\"name_of_index\" unique=\"true/false\">\n  <keyfield xpath=\"xpath_of_field1\"/>\n  <keyfield xpath=\"xpath_of_field2\"/>\n  ...\n</key>","Indexes obey the following rules:","An index can reference one or more fields in the table\nAn index can be unique (to avoid duplicates) in all of the fields if the unique attribute contains the value \"true\"\nThe SQL name of the index is determined from the SQL name of the table and the name of the index","NOTE","As a standard, indexes are the first elements declared from the main element of the schema.","Indexes are created automatically during table mapping (standard or FDA).","Example:","Adding an index to the email address and city:","<srcSchema name=\"recipient\" namespace=\"cus\">\n  <element name=\"recipient\">\n    <dbindex name=\"email\">\n      <keyfield xpath=\"@email\"/> \n      <keyfield xpath=\"location/@city\"/> \n    </dbindex>","<attribute name=\"email\" type=\"string\" length=\"80\" label=\"Email\" desc=\"Email address of recipient\"/>\n    <element name=\"location\" label=\"Location\">\n      <attribute name=\"city\" type=\"string\" length=\"50\" label=\"City\" userEnum=\"city\"/>\n    </element>\n  </element>\n</srcSchema>","Adding a unique index to the \"id\" name field:","<srcSchema name=\"recipient\" namespace=\"cus\">\n  <element name=\"recipient\">\n    <dbindex name=\"id\" unique=\"true\">\n      <keyfield xpath=\"@id\"/> \n    </dbindex>","<dbindex name=\"email\">\n      <keyfield xpath=\"@email\"/> \n    </dbindex>","<attribute name=\"id\" type=\"long\" label=\"Identifier\"/>\n    <attribute name=\"email\" type=\"string\" length=\"80\" label=\"Email\" desc=\"Email address of recipient\"/>\n  </element>\n</srcSchema>"]},{"section":"Learn more","sectionId":"53389093-7f08-4725-87c2-860b73e10d29","paragraphs":["Browse the following links to learn more:","Get started with schemas\nSchema structure\nKey management\nLink management\nCampaign datamodel"]}]}