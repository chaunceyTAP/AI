{"guid":"c249f2f6-6267-4445-acc2-cb28d50851d6","title":"Email enrichment with custom date fields","path":"help\\workflow\\using\\email-enrichment-with-custom-date-fields.md","fullText":"---\nproduct: campaign\ntitle: Email enrichment with custom date fields\ndescription: Learn how to enrich emails with custom date fields\nfeature: Workflows\nexl-id: 85e0ec2a-b7cb-4d0b-a281-9ad72594403a\n---\n# Email enrichment with custom date fields{#email-enrichment-with-custom-date-fields}\n\n\n\nIn this example, we want to send an email with custom data fields to recipients who will celebrate their birthdays this month. The email will include a coupon valid one week before and after their birthdays.\n\nWe need to target recipients from a list who will celebrate their birthdays this month with a **[!UICONTROL Split]** activity. Then, using the **[!UICONTROL Enrichment]** activity, the custom data field will act as validity dates in the email for the customer's special offer.\n\n![](assets/uc_enrichment.png)\n\nTo create this example, apply the following steps:\n\n1. In the **[!UICONTROL Targeting and workflows]** tab of your campaign, drag and drop a **[!UICONTROL Read list]** activity to target your list of recipients.\n1. The list to be processed can be specified explicitly, computed by a script or localized dynamically, according to options selected and parameters defined here.\n\n   ![](assets/uc_enrichment_1.png)\n\n1. Add a **[!UICONTROL Split]** activity to differentiate recipients who will celebrate their birthdays this month from other recipients.\n1. To split your list, in the **[!UICONTROL Filtering of selected records]** category, select **[!UICONTROL Add a filtering condition on the inbound population]**. Then, click **[!UICONTROL Edit]**.\n\n   ![](assets/uc_enrichment_2.png)\n\n1. Select **[!UICONTROL Filtering conditions]** then click the **[!UICONTROL Edit expression]** button to filter the month of the recipient's birthday.\n\n   ![](assets/uc_enrichment_3.png)\n\n1. Click **[!UICONTROL Advanced Selection]** then **[!UICONTROL Edit the formula using an expression]** and add the following expression: Month(@birthDate).\n1. In the **[!UICONTROL Operator]** column, select the **[!UICONTROL equal to]**.\n1. Further filter your condition, by adding the **[!UICONTROL Value]** month of the current date: Month(GetDate()).\n\n   This will query recipients whose birthday's month corresponds to the current month.\n\n   ![](assets/uc_enrichment_4.png)\n\n1. Click **[!UICONTROL Finish]**. Then, in the **[!UICONTROL General]** tab of your **[!UICONTROL Split]** activity, click the **[!UICONTROL Generate complement]** in the **[!UICONTROL Results]** category.\n\n   With the **[!UICONTROL Complement]** result, you can add a delivery activity or update a list. Here, we just added an **[!UICONTROL End]** activity.\n\n   ![](assets/uc_enrichment_6.png)\n\nYou now need to configure your **[!UICONTROL Enrichment]** activity:\n\n1. Add an **[!UICONTROL Enrichment]** activity after your subset to add your custom date fields.\n\n   ![](assets/uc_enrichment_7.png)\n\n1. Open your **[!UICONTROL Enrichment]** activity. In the **[!UICONTROL Complementary information]** category, click **[!UICONTROL Add data]**.\n\n   ![](assets/uc_enrichment_8.png)\n\n1. Select **[!UICONTROL Data linked to the filtering dimension]** then **[!UICONTROL Data of the filtering dimension]**.\n1. Click the **[!UICONTROL Add]** button. \n\n   ![](assets/uc_enrichment_9.png)\n\n1. Add a **[!UICONTROL Label]**. Then, in the **[!UICONTROL Expression]** column, click **[!UICONTROL Edit expression]**.\n\n   ![](assets/uc_enrichment_10.png)\n\n1. First, we need to target the week before the birthdate as the **Validity start date** with the following **[!UICONTROL Expression]**: `SubDays([target/@birthDate], 7)`.\n\n   ![](assets/uc_enrichment_11.png)\n\n1. Then, to create the custom date field **Validity end date** which will target the week after the birthdate, you need to add the **[!UICONTROL Expression]**: `AddDays([target/@birthDate], 7)`.\n\n   You can add a label to your expression.\n\n   ![](assets/uc_enrichment_12.png)\n\n1. Click **[!UICONTROL Ok]**. Your enrichment is now ready.\n\nAfter your **[!UICONTROL Enrichment]** activity, you can add a delivery. In this case, we added an email delivery to send recipients a special offer with validity dates to customers celebrating their birthdays this month.\n\n1. Drag and drop an **[!UICONTROL Email delivery]** activity after your **[!UICONTROL Enrichment]** activity.\n\n   ![](assets/uc_enrichment_15.png)\n\n1. Double-click your **[!UICONTROL Email delivery]** activity to start personalizing your delivery.\n1. Add a **[!UICONTROL Label]** to your delivery and click **[!UICONTROL Continue]**.\n1. Click **[!UICONTROL Save]** to create your email delivery.\n1. Check in the **[!UICONTROL Approval]** tab of the email delivery **[!UICONTROL Properties]** that the **[!UICONTROL Confirm delivery before sending option]** is checked.\n\n   Then, start your workflow to enrich your outbound transition with the targeted information.\n\n   ![](assets/uc_enrichment_18.png)\n\nYou can now start designing your email delivery with the custom date fields created in the **[!UICONTROL Enrichment]** activity.\n\n1. Double-click your **[!UICONTROL Email delivery]** activity.\n1. Add your target extensions to your email. It should be inside the following expression in order to configure the format of your validity dates:\n\n   ```\n   <%=\n           formatDate(targetData.alias of your expression,\"%2D.%2M\")  %>\n   ```\n\n1. Click ![](assets/uc_enrichment_16.png) . Select **[!UICONTROL Target extension]** then the previously created custom validity dates with the **[!UICONTROL Enrichment]** activity to add your extension to the formatDate expression.\n\n   ![](assets/uc_enrichment_19.png)\n\n1. Configure your email content as needed.\n\n   ![](assets/uc_enrichment_17.png)\n\n1. Preview your email to check if your custom date fields were correctly configured\n\n   ![](assets/uc_enrichment_20.png)\n\nYour email is now ready. You can start sending your proofs and confirm your delivery to send your birthday emails.\n","headers":[["title","Email enrichment with custom date fields"],["description","Learn how to enrich emails with custom date fields"],["feature","Workflows"]],"sections":[{"section":"Email enrichment with custom date fields","sectionId":"dd89b84d-3594-45be-ab5d-3271c9a11319","paragraphs":["In this example, we want to send an email with custom data fields to recipients who will celebrate their birthdays this month. The email will include a coupon valid one week before and after their birthdays.","We need to target recipients from a list who will celebrate their birthdays this month with a Split activity. Then, using the Enrichment activity, the custom data field will act as validity dates in the email for the customer's special offer.","To create this example, apply the following steps:","In the Targeting and workflows tab of your campaign, drag and drop a Read list activity to target your list of recipients.","The list to be processed can be specified explicitly, computed by a script or localized dynamically, according to options selected and parameters defined here.","Add a Split activity to differentiate recipients who will celebrate their birthdays this month from other recipients.","To split your list, in the Filtering of selected records category, select Add a filtering condition on the inbound population. Then, click Edit.","Select Filtering conditions then click the Edit expression button to filter the month of the recipient's birthday.","Click Advanced Selection then Edit the formula using an expression and add the following expression: Month(@birthDate).","In the Operator column, select the equal to.","Further filter your condition, by adding the Value month of the current date: Month(GetDate()).","This will query recipients whose birthday's month corresponds to the current month.","Click Finish. Then, in the General tab of your Split activity, click the Generate complement in the Results category.","With the Complement result, you can add a delivery activity or update a list. Here, we just added an End activity.","You now need to configure your Enrichment activity:","Add an Enrichment activity after your subset to add your custom date fields.","Open your Enrichment activity. In the Complementary information category, click Add data.","Select Data linked to the filtering dimension then Data of the filtering dimension.","Click the Add button.","Add a Label. Then, in the Expression column, click Edit expression.","First, we need to target the week before the birthdate as the Validity start date with the following Expression: SubDays([target/@birthDate], 7).","Then, to create the custom date field Validity end date which will target the week after the birthdate, you need to add the Expression: AddDays([target/@birthDate], 7).","You can add a label to your expression.","Click Ok. Your enrichment is now ready.","After your Enrichment activity, you can add a delivery. In this case, we added an email delivery to send recipients a special offer with validity dates to customers celebrating their birthdays this month.","Drag and drop an Email delivery activity after your Enrichment activity.","Double-click your Email delivery activity to start personalizing your delivery.","Add a Label to your delivery and click Continue.","Click Save to create your email delivery.","Check in the Approval tab of the email delivery Properties that the Confirm delivery before sending option is checked.","Then, start your workflow to enrich your outbound transition with the targeted information.","You can now start designing your email delivery with the custom date fields created in the Enrichment activity.","Double-click your Email delivery activity.","Add your target extensions to your email. It should be inside the following expression in order to configure the format of your validity dates:","<%=\n        formatDate(targetData.alias of your expression,\"%2D.%2M\")  %>","Click  . Select Target extension then the previously created custom validity dates with the Enrichment activity to add your extension to the formatDate expression.","Configure your email content as needed.","Preview your email to check if your custom date fields were correctly configured","Your email is now ready. You can start sending your proofs and confirm your delivery to send your birthday emails."]}]}