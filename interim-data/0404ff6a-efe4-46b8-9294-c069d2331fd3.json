{"guid":"0404ff6a-efe4-46b8-9294-c069d2331fd3","title":"Campaign Tomcat configuration","path":"help\\installation\\using\\configure-tomcat.md","fullText":"---\nproduct: campaign\ntitle: Campaign Tomcat configuration\ndescription: Campaign Tomcat configuration\nfeature: Installation, Instance Settings\nbadge-v7-prem: label=\"On-premise/hybrid only\" type=\"Caution\" url=\"https://experienceleague.adobe.com/docs/campaign-classic/using/installing-campaign-classic/architecture-and-hosting-models/hosting-models-lp/hosting-models.html\" tooltip=\"Applies to on-premise and hybrid deployments only\"\naudience: installation\ncontent-type: reference\ntopic-tags: initial-configuration\nexl-id: a2126458-2ae5-47c6-ad13-925f0e067ecf\n---\n# Configure Apache Tomcat {#configuring-tomcat}\n\nAdobe Campaign uses an **embedded web servlet called Apache Tomcat** to process HTTP/HTTPS requests between the application and any external interface (including Client Console, tracked URL links, SOAP calls, and others). There is often an external web server (usually IIS or Apache) in front of this for any external-facing Adobe Campaign instances.\n\nLearn more about Tomcat in Campaign and how to locate your Tomcat version in [this page](../../production/using/locate-tomcat-version.md).\n\n>[!AVAILABILITY]\n>\n> Starting v7.4.1, Tomcat 10.1 is the default version.\n>\n\n\n## Default port for Apache Tomcat {#default-port-for-tomcat}\n\n\n>[!NOTE]\n>\n>This procedure is restricted to **on-premise** deployments. \n>\n\nWhen the 8080 listening port of the Tomcat server is already busy with another application required for your configuration, you need to replace the 8080 port with a free one (8090 for instance). To change it, edit the **server.xml** file saved in the **/tomcat-X/conf** directory of the Adobe Campaign installation folder.\n\nThen modify the port of the JSP relay pages. To do this, change the **serverConf.xml** file saved in the **/conf** directory of the Adobe Campaign installation directory.\n\n```xml\n<serverConf>\n   ...\n   <web controlPort=\"8005\" httpPort=\"8090\"...\n   <url ... targetUrl=\"http://localhost:8090\"...\n\n```\n\n## Map a folder in Apache Tomcat {#mapping-a-folder-in-tomcat}\n\n\n>[!NOTE]\n>\n>This procedure is restricted to **on-premise** deployments. \n>\n\nTo define customer specific settings, you can create a **user_contexts.xml** file in the **/tomcat-X/conf** folder, which also contains the **contexts.xml** file.\n\nThis file will contain the following type of information:\n\n```xml\n <Context path='/foo' docBase='../customers/foo'   crossContext='true' debug='0' reloadable='true' trusted='false'/>\n```\n\nIf necessary, this operation can be reproduced on the server-side.\n\n## Hide the Tomcat error report {#hide-tomcat-error-report}\n\n\n>[!NOTE]\n>\n>This procedure is restricted to **on-premise** deployments.\n>\n>This change is no longer needed starting Campaign v7.4.1.\n>\n\nFor security reasons, we strongly recommend that you hide the Tomcat error report. Follow these steps:\n\n1. Open the **server.xml** file located in the **/tomcat-X/conf** directory of the Adobe Campaign installation folder:  `/usr/local/neolane/nl6/tomcat-X/conf`\n1. Add the following element at the bottom after all existing context elements:\n\n    ```xml\n    <Valve className=\"org.apache.catalina.valves.ErrorReportValve\" showReport=\"false\" showServerInfo=\"false\"/>\n    ```\n    \n1. Restart the nlserver and Apache web servers.\n","headers":[["title","Campaign Tomcat configuration"],["description","Campaign Tomcat configuration"],["feature","Installation, Instance Settings"],["topic-tags","initial-configuration"]],"sections":[{"section":"Configure Apache Tomcat","sectionId":"3845f953-aa67-4706-9978-8e210a46c43c","paragraphs":["Adobe Campaign uses an embedded web servlet called Apache Tomcat to process HTTP/HTTPS requests between the application and any external interface (including Client Console, tracked URL links, SOAP calls, and others). There is often an external web server (usually IIS or Apache) in front of this for any external-facing Adobe Campaign instances.","Learn more about Tomcat in Campaign and how to locate your Tomcat version in this page.","AVAILABILITY","Starting v7.4.1, Tomcat 10.1 is the default version."]},{"section":"Default port for Apache Tomcat","sectionId":"9884b215-ac00-4a08-95eb-0bd968cd6fe1","paragraphs":["NOTE","This procedure is restricted to on-premise deployments.","When the 8080 listening port of the Tomcat server is already busy with another application required for your configuration, you need to replace the 8080 port with a free one (8090 for instance). To change it, edit the server.xml file saved in the /tomcat-X/conf directory of the Adobe Campaign installation folder.","Then modify the port of the JSP relay pages. To do this, change the serverConf.xml file saved in the /conf directory of the Adobe Campaign installation directory.","<serverConf>\n   ...\n   <web controlPort=\"8005\" httpPort=\"8090\"...\n   <url ... targetUrl=\"http://localhost:8090\"..."]},{"section":"Map a folder in Apache Tomcat","sectionId":"56786fde-e9c7-441e-b20c-c47010239552","paragraphs":["NOTE","This procedure is restricted to on-premise deployments.","To define customer specific settings, you can create a user_contexts.xml file in the /tomcat-X/conf folder, which also contains the contexts.xml file.","This file will contain the following type of information:","<Context path='/foo' docBase='../customers/foo'   crossContext='true' debug='0' reloadable='true' trusted='false'/>","If necessary, this operation can be reproduced on the server-side."]},{"section":"Hide the Tomcat error report","sectionId":"bbb371bc-3809-4583-b754-cbb274cf5ba0","paragraphs":["NOTE","This procedure is restricted to on-premise deployments.","This change is no longer needed starting Campaign v7.4.1.","For security reasons, we strongly recommend that you hide the Tomcat error report. Follow these steps:","Open the server.xml file located in the /tomcat-X/conf directory of the Adobe Campaign installation folder:  /usr/local/neolane/nl6/tomcat-X/conf","Add the following element at the bottom after all existing context elements:","<Valve className=\"org.apache.catalina.valves.ErrorReportValve\" showReport=\"false\" showServerInfo=\"false\"/>","Restart the nlserver and Apache web servers."]}]}