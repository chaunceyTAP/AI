{"guid":"4f8de150-e124-4397-864e-35ac2e5c0cd8","title":"Query using grouping management","path":"help\\workflow\\using\\querying-using-grouping-management.md","fullText":"---\nproduct: campaign\ntitle: Query using grouping management\ndescription: Learn how to perform queries using grouping management\nfeature: Query Editor, Workflows\nexl-id: 23bccb48-60ab-46c9-be26-2fa35243d61e\n---\n# Query using grouping management {#querying-using-grouping-management}\n\n\n\nIn this example, we want to run a query to find all email domains targeted over 30 times during previous deliveries.\n\n* Which table needs to be selected?\n\n  The recipient table (nms:recipient)\n\n* Fields to be selected in output columns?\n\n  Email domain and primary key (with count)\n\n* Data grouping?\n\n  Based on email domain with a count of primary keys above 30. This operation is carried out with the **[!UICONTROL Group by + Having]** option. **[!UICONTROL Group by + Having]** lets you group data (\"group by\") and make a selection of what was grouped (\"having\").\n\nTo create this example, apply the following steps:\n\n1. Open the **[!UICONTROL Generic query editor]** and choose the Recipient table (**nms:recipient**).\n\n   ![](assets/query_editor_02.png)\n\n1. In the **[!UICONTROL Data to extract]** window, select the **[!UICONTROL Email domain]** and **[!UICONTROL Primary key]** fields. Run a count on the **[!UICONTROL Primary key]** field.\n\n   For more on primary key counts, refer to [this section](../../platform/using/defining-filter-conditions.md#building-expressions).\n\n1. Check the **[!UICONTROL Handle groupings (GROUP BY + HAVING)]** box.\n\n   ![](assets/query_editor_nveau_29.png)\n\n1. In the **[!UICONTROL Sorting]** window, sort email domains in descending order. To do this, check **[!UICONTROL Yes]** in the **[!UICONTROL Descending sort]** column. Click **[!UICONTROL Next]**.\n\n   ![](assets/query_editor_nveau_70.png)\n\n1. In **[!UICONTROL Data filtering]**, select **[!UICONTROL Filtering conditions]**. Go to the **[!UICONTROL Target elements]** window and click **[!UICONTROL Next]**.\n1. In the **[!UICONTROL Data grouping]** window, select the **[!UICONTROL Email domain]** by clicking **[!UICONTROL Add]**.\n\n   This data grouping window is only displayed if the **[!UICONTROL Handle groupings (GROUP BY + HAVING]**) box was checked.\n\n   ![](assets/query_editor_blocklist_04.png)\n\n1. In the **[!UICONTROL Grouping condition]** window, indicate a primary key count greater than 30 since we only want email domains targeted more than 30 times to be returned as results.\n\n   This window appears when the **[!UICONTROL Manage groupings (GROUP BY + HAVING)]** box was checked: this is where the grouping result is filtered (HAVING).\n\n   ![](assets/query_editor_blocklist_05.png)\n\n1. In the **[!UICONTROL Data formatting]** window, click **[!UICONTROL Next]**: no formatting is necessary here.\n1. In the data preview window, click **[!UICONTROL Launch data preview]**: here, three different email domains targeted over 30 times are returned.\n\n   ![](assets/query_editor_blocklist_06.png)\n","headers":[["title","Query using grouping management"],["description","Learn how to perform queries using grouping management"],["feature","Query Editor, Workflows"]],"sections":[{"section":"Query using grouping management","sectionId":"4d876475-317b-447c-8e82-57824c8d912d","paragraphs":["In this example, we want to run a query to find all email domains targeted over 30 times during previous deliveries.","Which table needs to be selected?","The recipient table (nms:recipient)","Fields to be selected in output columns?","Email domain and primary key (with count)","Data grouping?","Based on email domain with a count of primary keys above 30. This operation is carried out with the Group by + Having option. Group by + Having lets you group data (\"group by\") and make a selection of what was grouped (\"having\").","To create this example, apply the following steps:","Open the Generic query editor and choose the Recipient table (nms:recipient).","In the Data to extract window, select the Email domain and Primary key fields. Run a count on the Primary key field.","For more on primary key counts, refer to this section.","Check the Handle groupings (GROUP BY + HAVING) box.","In the Sorting window, sort email domains in descending order. To do this, check Yes in the Descending sort column. Click Next.","In Data filtering, select Filtering conditions. Go to the Target elements window and click Next.","In the Data grouping window, select the Email domain by clicking Add.","This data grouping window is only displayed if the Handle groupings (GROUP BY + HAVING) box was checked.","In the Grouping condition window, indicate a primary key count greater than 30 since we only want email domains targeted more than 30 times to be returned as results.","This window appears when the Manage groupings (GROUP BY + HAVING) box was checked: this is where the grouping result is filtered (HAVING).","In the Data formatting window, click Next: no formatting is necessary here.","In the data preview window, click Launch data preview: here, three different email domains targeted over 30 times are returned."]}]}