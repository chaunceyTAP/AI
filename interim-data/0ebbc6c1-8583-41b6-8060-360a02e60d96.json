{"guid":"0ebbc6c1-8583-41b6-8060-360a02e60d96","title":"Configuring Campaign server","path":"help\\installation\\using\\configuring-campaign-server.md","fullText":"---\nproduct: campaign\ntitle: Configuring Campaign server\ndescription: Configuring Campaign server\nfeature: Installation, Instance Settings\nbadge-v7-prem: label=\"On-premise/hybrid only\" type=\"Caution\" url=\"https://experienceleague.adobe.com/docs/campaign-classic/using/installing-campaign-classic/architecture-and-hosting-models/hosting-models-lp/hosting-models.html\" tooltip=\"Applies to on-premise and hybrid deployments only\"\naudience: installation\ncontent-type: reference\ntopic-tags: additional-configurations\nexl-id: 46c8ed46-0947-47fb-abda-6541b12b6f0c\n---\n# Get started with Campaign server configuration{#gs-campaign-server-config}\n\n\n\nThis chapter details server-side configurations that can be performed to match your needs and your environment specificities.\n\n## Restrictions\n\nThese procedures are restricted to **on-premise**/**hybrid** deployments and require Administration permissions. \n\nFor **hosted** deployments, server-side settings can be configured by Adobe only. However, some settings can be set up within [Campaign Control Panel](https://experienceleague.adobe.com/docs/control-panel/using/discover-control-panel/key-features.html), such as IP allowlist management or URL permissions. [Learn more](https://experienceleague.adobe.com/docs/control-panel/using/instances-settings/ip-allow-listing-instance-access.html).\n\nFor more information, refer to these sections:\n\n* [Control Panel documentation](https://experienceleague.adobe.com/docs/control-panel/using/control-panel-home.html)\n* [Hosting models](../../installation/using/hosting-models.md)\n* [Campaign Classic On-premise & Hosted capability matrix](../../installation/using/capability-matrix.md)\n\n## Configuration files\n\nCampaign Classic configuration files are stored in the **conf** folder of the Adobe Campaign installation folder. The configuration is spread over two files:\n\n* **serverConf.xml**: general configuration for all instances. This file combines the technical parameters of the Adobe Campaign server: these are shared by all instances. The description of some of these parameters is detailed below. The different nodes and parameters and listed in this [section](../../installation/using/the-server-configuration-file.md).\n* **config-`<instance>`.xml** (where **instance** is the name of the instance): specific configuration of the instance. If you share your server among several instances, please enter the parameters specific to each instance in their relevant file.\n\n## Configuration scope\n\nConfigure or adapt Campaign server depending on your needs and configuration. You can:\n\n* Secure the [Internal identifier](#internal-identifier)\n* Enable [Campaign processes](#enabling-processes)\n* Configure [URL Permissions](url-permissions.md)\n* Define [Security Zones](security-zones.md)\n* Configure [Tomcat settings](configure-tomcat.md)\n* Customize [Delivery parameters](configure-delivery-settings.md)\n* Define [Dynamic page security and relays](#dynamic-page-security-and-relays)\n* Restrict the list of [Allowed external commands](#restricting-authorized-external-commands)\n* Set up [Redundant tracking](#redundant-tracking)\n* Manage [High availability and workflow affinities](#high-availability-workflows-and-affinities)\n* Configure file management - [Learn more](file-res-management.md)\n   * Limit upload files format\n   * Enable access to public resources\n   * Configure Proxy connection\n* [Automatic process restart](#automatic-process-restart)\n\n\n## Internal identifier {#internal-identifier}\n\nThe **internal** identifier is a technical login to be used for installation, administration and maintenance purposes. This login is not associated with an instance.\n\nOperators connected using this login will have all the rights on all instances. This login won't have a password in the case of a new installation. You must manually define this password.\n\nUse the following command:\n\n```sql\nnlserver config -internalpassword\n```\n\nThe following information is then displayed. Enter and confirm the password:\n\n```sql\n17:33:57 >   Application server for Adobe Campaign Classic (7.X YY.R build XXX@SHA1) of DD/MM/YYYY\nEnter the current password.\nPassword:\nEnter the new password.\nPassword: XXXX\nConfirmation: XXXX\n17:34:02 >   Password successfully changed for account 'internal' (authentication mode 'nl')\n```\n\n## Enable processes {#enabling-processes}\n\nAdobe Campaign processes on the server are enabled (and disabled) via the **config-default.xml** and **`config-<instance>.xml`** files.\n\nTo apply the changes to these files, if the Adobe Campaign service is started, you must run the **nlserver config -reload** command.\n\nThere are two types of processes: multi-instance and single instance.\n\n* **multi-instance**: one single process is started for all instances. This is the case for **web**, **syslogd** and **trackinglogd** processes.\n\n  Enablement can be configured from the **config-default.xml** file.\n\n  Declaring an Adobe Campaign server to access client consoles and for redirection (tracking):\n\n  ```\n  vi nl6/conf/config-default.xml\n  <web args=\"-tomcat\" autoStart=\"true\"/>  \n  <!-- to start if the machine is also a redirection server -->  \n  <trackinglogd autoStart=\"true\"/>\n  ```\n\n  In this example, the file is edited using a **vi** command in Linux. It can be edited using any **.txt** or **.xml** editor.\n\n* **mono-instance**: one process is started for each instance (modules: **mta**, **wfserver**, **inMail**, **sms** and **stat**).\n\n  Enablement can be configured using the configuration file of the instance:\n\n  ```\n  config-<instance>.xml\n  ```\n\n  Declaring a server for delivery, executing workflow instances and recovering bounce mail:\n\n  ```\n  <mta autoStart=\"true\" statServerAddress=\"localhost\"/>\n  <wfserver autoStart=\"true\"/>  \n  <inMail autoStart=\"true\"/>\n  <stat autoStart=\"true\"/>\n  ```\n\n**Campaign data storage**\n\nYou can configure the storage directory (**var** directory) of Adobe Campaign data (logs, downloads, redirections, etc.). To do this, use the **XTK_VAR_DIR** system variable:\n\n* In Windows, indicate the following value value in the **XTK_VAR_DIR** system variable\n\n  ```\n  D:\\log\\AdobeCampaign\n  ```\n\n* In Linux, go to the **customer.sh** file and indicate: **export XTK_VAR_DIR=/app/log/AdobeCampaign**.\n\n  For more on this, refer to [Personalize parameters](../../installation/using/installing-packages-with-linux.md#personalizing-parameters).\n\n\n## Dynamic page security and relays {#dynamic-page-security-and-relays}\n\nBy default, all dynamic pages are automatically related to the **local** Tomcat server of the machine whose Web module has started. This configuration is entered in the **`<url>`** section of the query relay configuration for the **ServerConf.xml** file. \n\nYou can relay execution of the dynamic page on a **remote** server; if the Web module is not activated on the computer. To do this, you must replace the **localhost** with the name of the remote computer for JSP and JSSP, Web applications, reports and strings.\n\nFor more on the various parameters available, refer to the **serverConf.xml** configuration file.\n\nFor JSP pages, the default configuration is:\n\n```\n<url relayHost=\"true\" relayPath=\"true\" targetUrl=\"http://localhost:8080\" urlPath=\"*.jsp\"/>\n```\n\nAdobe Campaign uses the following JSP pages:\n\n* /nl/jsp/**soaprouter.jsp**: client console and Web services connections (SOAP APIs),\n* /nl/jsp/**m.jsp**: mirror pages,\n* /nl/jsp/**logon.jsp**: Web-based access to reports and to deployment of the client console,\n* /nl/jsp/**s.jsp** : Using viral marketing (sponsoring and social networks).\n\nThe JSSPs used for the Mobile App Channel are as follows:\n\n* nms/mobile/1/registerIOS.jssp\n* nms/mobile/1/registerAndroid.jssp\n\n**Example:**\n\nIt's possible to prevent client machine connections from the outside. To do this, simply restrict the execution of **soaprouter.jsp** and only authorize the execution of mirror pages, viral links, web forms and public resources.\n\nThe parameters are as follows:\n\n```\n<url IPMask=\"<IP_addresses>\" deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"*.jsp\"/>\n<url IPMask=\"<IP_addresses>\" deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"*.jssp\"/> \n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\" relayPath=\"true\" targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"m.jsp\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\" relayPath=\"true\" targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"s.jsp\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\" relayPath=\"true\" targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"webForm.jsp\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"/webApp/pub*\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"/jssp/pub*\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"/strings/pub*\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"/interaction/pub*\"/>\n<url IPMask=\"\"               deny=\"true\" hostMask=\"\" relayHost=\"false\" relayPath=\"false\" targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"*.jsp\"/>\n<url IPMask=\"\"               deny=\"true\" hostMask=\"\" relayHost=\"false\" relayPath=\"false\" targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"*.jssp\"/>\n```\n\nIn this example, the **`<IP_addresses>`** value coincides with the list of IP addresses (separated by comas) authorized to use the relay module for this mask.\n\n>[!NOTE]\n>\n>Values shall be adapted according to your configuration and your network constraints, especially if specific configurations have been developed for your installation.\n\n### Manage HTTP headers {#managing-http-headers}\n\nBy default, all HTTP headers are not relayed. You can add specific headers in the replies sent by relay. To do this:\n\n1. Go to the **serverConf.xml** file.\n1. In the **`<relay>`** node, go to the list of relayed HTTP headers.\n1. Add a **`<responseheader>`** element with the following attributes:\n\n    * **name**: header name\n    * **value**: value name.\n\n   For example:\n\n   ```\n   <responseHeader name=\"Strict-Transport-Security\" value=\"max-age=16070400; includeSubDomains\"/>\n   ```\n\n## Restrict authorized external commands {#restricting-authorized-external-commands}\n\nFrom build 8780, technical administrators can restrict the list of authorized external commands that can be used in Adobe Campaign.\n\nTo do that, you need to create a text file with the list of commands that you want to prevent from using, for example:\n\n```\nln\ndd\nopenssl\ncurl\nwget\npython\npython3\nperl\nruby\nsh\n```\n\n>[!IMPORTANT]\n>\n>This list is not exhaustive.\n\nIn the **exec** node of the server configuration file, you need to reference the previously created file in the **blacklistFile** attribute.\n\n**For Linux only**: in the server configuration file, we recommend that you specify a user dedicated to executing external commands to enhance your security configuration. This user is set in the **exec** node of the configuration file. All the parameters available in the **serverConf.xml** are listed in this [section](../../installation/using/the-server-configuration-file.md).\n\n>[!NOTE]\n>\n>If no user is specified, all commands are executed in the user context of the Adobe Campaign instance. The user must be different than the user running Adobe Campaign.\n\nFor example:\n\n```\n<serverConf>\n <exec user=\"theUnixUser\" blacklistFile=\"/pathtothefile/blacklist\"/>\n</serverConf>\n```\n\nThis user needs to be added to the sudoer list of the 'neolane' Adobe Campaign operator.\n\n>[!IMPORTANT]\n>\n>You should not use a custom sudo. A standard sudo needs to be installed on the system.\n\n\n## Redundant tracking {#redundant-tracking}\n\nWhen multiple servers are used for redirection, they must be able to communicate with each other via SOAP calls in order to share information from the URLs to be redirected. At the time of delivery start-up, it is possible that not all the redirection servers will be available; therefore they might not have the same level of information.\n\n>[!NOTE]\n>\n>When using the standard or enterprise architecture, the main application server must be authorized to upload tracking information on each computer.\n\nThe URLs of the redundant servers must be specified in the redirection configuration, via the **serverConf.xml** file.\n\n**Example:**\n\n```\n<spareserver enabledIf=\"$(hostname)!='front_srv1'\" id=\"1\" url=\"http://front_srv1:8080\" />\n<spareserver enabledIf=\"$(hostname)!='front_srv2'\" id=\"2\" url=\"http://front_srv2:8080\" />\n```\n\nThe **enableIf** property is optional (empty by default) and allows you to enable the connection only if the result is true. This lets you obtain an identical configuration on all redirection servers.\n\nTo obtain the hostname of the computer, run the following command: **hostname -s**.\n\n\n\n## High availability workflows and affinities {#high-availability-workflows-and-affinities}\n\nYou can configure several workflow servers (wfserver) and distribute them on two or more machines. If you choose this type of architecture, configure the connection mode of the load balancers according to the Adobe Campaign access.\n\nFor access from the web, select the **load balancer** mode to limit connection times.\n\nIf accessing via the Adobe Campaign console, choose **hash** or **sticky ip** mode. This lets you maintain the connection between the rich client and the server and prevent a user session from being interrupted during an import or export operation, for example.\n\nYou can choose to force the execution of a workflow or a workflow activity on a particular machine. To do this, you must define one or more affinities for the concerned workflow or activity.\n\n1. Create the affinities of the workflow or activity by entering them in the **[!UICONTROL Affinity]** field.\n\n   You can choose any affinity name, but make sure you do not use spaces or punctuation marks. If you use different servers, specify different names.\n\n   ![](assets/s_ncs_install_server_wf_affinity01.png)\n\n   ![](assets/s_ncs_install_server_wf_affinity02.png)\n\n   The drop-down list contains formerly used affinities. It is completed over time with the different entered values.\n\n1. Open the **nl6/conf/config-`<instance>.xml`** file.\n1. Modify the line which matches the **[!UICONTROL wfserver]** module as follows:\n\n   ```\n   <wfserver autoStart=\"true\" affinity=\"XXX,\"/>\n   ```\n\n   If you define several affinities, they must be separated by commas without any spaces:\n\n   ```\n   <wfserver autoStart=\"true\" affinity=\"XXX,YYY,\"/>\n   ```\n\n   The comma following the name of the affinity is necessary for the execution of workflows for which no affinity is defined.\n\n   If you wish to execute only workflows for which an affinity is defined, do not add a comma at the end of the list of your affinities. For example, modify the line as follows:\n\n   ```\n   <wfserver autoStart=\"true\" affinity=\"XXX\"/>\n   ```\n\n## Automatic restart {#automatic-process-restart}\n\nBy default, the different Adobe Campaign processes restart automatically at 6am (server time) every day.\n\nHowever, you can change this configuration.\n\nTo do this, go to the **serverConf.xml** file, located in the **conf** repository of your installation.\n\nEach process configured in this file has a **processRestartTime** attribute. You can modify the value of this attribute to adapt the restart time of each process according to your needs.\n\n>[!IMPORTANT]\n>\n>Do not delete this attribute. All processes must be restarted every day.\n","headers":[["title","Configuring Campaign server"],["description","Configuring Campaign server"],["feature","Installation, Instance Settings"],["topic-tags","additional-configurations"]],"sections":[{"section":"Get started with Campaign server configuration","sectionId":"9cfcc9ac-4dac-45f0-82cf-8c6fda21fca0","paragraphs":["This chapter details server-side configurations that can be performed to match your needs and your environment specificities."]},{"section":"Restrictions","sectionId":"45472753-2e9c-40b6-9873-465417b9d290","paragraphs":["These procedures are restricted to on-premise/hybrid deployments and require Administration permissions.","For hosted deployments, server-side settings can be configured by Adobe only. However, some settings can be set up within Campaign Control Panel, such as IP allowlist management or URL permissions. Learn more.","For more information, refer to these sections:","Control Panel documentation\nHosting models\nCampaign Classic On-premise & Hosted capability matrix"]},{"section":"Configuration files","sectionId":"23cd4590-8e7f-49d9-b352-b90c2ce617d3","paragraphs":["Campaign Classic configuration files are stored in the conf folder of the Adobe Campaign installation folder. The configuration is spread over two files:","serverConf.xml: general configuration for all instances. This file combines the technical parameters of the Adobe Campaign server: these are shared by all instances. The description of some of these parameters is detailed below. The different nodes and parameters and listed in this section.\nconfig-<instance>.xml (where instance is the name of the instance): specific configuration of the instance. If you share your server among several instances, please enter the parameters specific to each instance in their relevant file."]},{"section":"Configuration scope","sectionId":"074ddf6c-6719-4e5a-9d23-c12065e4bea8","paragraphs":["Configure or adapt Campaign server depending on your needs and configuration. You can:","Secure the Internal identifier\nEnable Campaign processes\nConfigure URL Permissions\nDefine Security Zones\nConfigure Tomcat settings\nCustomize Delivery parameters\nDefine Dynamic page security and relays\nRestrict the list of Allowed external commands\nSet up Redundant tracking\nManage High availability and workflow affinities\nConfigure file management - Learn moreLimit upload files format\nEnable access to public resources\nConfigure Proxy connection","Automatic process restart"]},{"section":"Internal identifier","sectionId":"42de79f7-fa27-4d65-b6ed-b2ec6880e7ff","paragraphs":["The internal identifier is a technical login to be used for installation, administration and maintenance purposes. This login is not associated with an instance.","Operators connected using this login will have all the rights on all instances. This login won't have a password in the case of a new installation. You must manually define this password.","Use the following command:","nlserver config -internalpassword","The following information is then displayed. Enter and confirm the password:","17:33:57 >   Application server for Adobe Campaign Classic (7.X YY.R build XXX@SHA1) of DD/MM/YYYY\nEnter the current password.\nPassword:\nEnter the new password.\nPassword: XXXX\nConfirmation: XXXX\n17:34:02 >   Password successfully changed for account 'internal' (authentication mode 'nl')"]},{"section":"Enable processes","sectionId":"4582f4fe-3a5c-455b-8e24-ea4108abb2fe","paragraphs":["Adobe Campaign processes on the server are enabled (and disabled) via the config-default.xml and config-<instance>.xml files.","To apply the changes to these files, if the Adobe Campaign service is started, you must run the nlserver config -reload command.","There are two types of processes: multi-instance and single instance.","multi-instance: one single process is started for all instances. This is the case for web, syslogd and trackinglogd processes.","Enablement can be configured from the config-default.xml file.","Declaring an Adobe Campaign server to access client consoles and for redirection (tracking):","vi nl6/conf/config-default.xml\n<web args=\"-tomcat\" autoStart=\"true\"/>  \n<!-- to start if the machine is also a redirection server -->  \n<trackinglogd autoStart=\"true\"/>","In this example, the file is edited using a vi command in Linux. It can be edited using any .txt or .xml editor.","mono-instance: one process is started for each instance (modules: mta, wfserver, inMail, sms and stat).","Enablement can be configured using the configuration file of the instance:","config-<instance>.xml","Declaring a server for delivery, executing workflow instances and recovering bounce mail:","<mta autoStart=\"true\" statServerAddress=\"localhost\"/>\n<wfserver autoStart=\"true\"/>  \n<inMail autoStart=\"true\"/>\n<stat autoStart=\"true\"/>","Campaign data storage","You can configure the storage directory (var directory) of Adobe Campaign data (logs, downloads, redirections, etc.). To do this, use the XTK_VAR_DIR system variable:","In Windows, indicate the following value value in the XTK_VAR_DIR system variable","D:\\log\\AdobeCampaign","In Linux, go to the customer.sh file and indicate: export XTK_VAR_DIR=/app/log/AdobeCampaign.","For more on this, refer to Personalize parameters."]},{"section":"Dynamic page security and relays","sectionId":"ffb1564d-8f93-40a3-9398-ae4913359dd0","paragraphs":["By default, all dynamic pages are automatically related to the local Tomcat server of the machine whose Web module has started. This configuration is entered in the <url> section of the query relay configuration for the ServerConf.xml file.","You can relay execution of the dynamic page on a remote server; if the Web module is not activated on the computer. To do this, you must replace the localhost with the name of the remote computer for JSP and JSSP, Web applications, reports and strings.","For more on the various parameters available, refer to the serverConf.xml configuration file.","For JSP pages, the default configuration is:","<url relayHost=\"true\" relayPath=\"true\" targetUrl=\"http://localhost:8080\" urlPath=\"*.jsp\"/>","Adobe Campaign uses the following JSP pages:","/nl/jsp/soaprouter.jsp: client console and Web services connections (SOAP APIs),\n/nl/jsp/m.jsp: mirror pages,\n/nl/jsp/logon.jsp: Web-based access to reports and to deployment of the client console,\n/nl/jsp/s.jsp : Using viral marketing (sponsoring and social networks).","The JSSPs used for the Mobile App Channel are as follows:","nms/mobile/1/registerIOS.jssp\nnms/mobile/1/registerAndroid.jssp","Example:","It's possible to prevent client machine connections from the outside. To do this, simply restrict the execution of soaprouter.jsp and only authorize the execution of mirror pages, viral links, web forms and public resources.","The parameters are as follows:","<url IPMask=\"<IP_addresses>\" deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"*.jsp\"/>\n<url IPMask=\"<IP_addresses>\" deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"*.jssp\"/> \n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\" relayPath=\"true\" targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"m.jsp\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\" relayPath=\"true\" targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"s.jsp\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\" relayPath=\"true\" targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"webForm.jsp\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"/webApp/pub*\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"/jssp/pub*\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"/strings/pub*\"/>\n<url IPMask=\"\"               deny=\"\"     hostMask=\"\" relayHost=\"true\"  relayPath=\"true\"  targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"/interaction/pub*\"/>\n<url IPMask=\"\"               deny=\"true\" hostMask=\"\" relayHost=\"false\" relayPath=\"false\" targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"*.jsp\"/>\n<url IPMask=\"\"               deny=\"true\" hostMask=\"\" relayHost=\"false\" relayPath=\"false\" targetUrl=\"http://localhost:8080\" timeout=\"\" urlPath=\"*.jssp\"/>","In this example, the <IP_addresses> value coincides with the list of IP addresses (separated by comas) authorized to use the relay module for this mask.","NOTE","Values shall be adapted according to your configuration and your network constraints, especially if specific configurations have been developed for your installation."]},{"section":"Manage HTTP headers","sectionId":"fcfc9ab3-1c73-4ad6-8b2a-e838d40147ef","paragraphs":["By default, all HTTP headers are not relayed. You can add specific headers in the replies sent by relay. To do this:","Go to the serverConf.xml file.","In the <relay> node, go to the list of relayed HTTP headers.","Add a <responseheader> element with the following attributes:","name: header name\nvalue: value name.","For example:","<responseHeader name=\"Strict-Transport-Security\" value=\"max-age=16070400; includeSubDomains\"/>"]},{"section":"Restrict authorized external commands","sectionId":"bfaa4214-cf36-44f5-af56-f9f7238e1ae7","paragraphs":["From build 8780, technical administrators can restrict the list of authorized external commands that can be used in Adobe Campaign.","To do that, you need to create a text file with the list of commands that you want to prevent from using, for example:","ln\ndd\nopenssl\ncurl\nwget\npython\npython3\nperl\nruby\nsh","IMPORTANT","This list is not exhaustive.","In the exec node of the server configuration file, you need to reference the previously created file in the blacklistFile attribute.","For Linux only: in the server configuration file, we recommend that you specify a user dedicated to executing external commands to enhance your security configuration. This user is set in the exec node of the configuration file. All the parameters available in the serverConf.xml are listed in this section.","NOTE","If no user is specified, all commands are executed in the user context of the Adobe Campaign instance. The user must be different than the user running Adobe Campaign.","For example:","<serverConf>\n <exec user=\"theUnixUser\" blacklistFile=\"/pathtothefile/blacklist\"/>\n</serverConf>","This user needs to be added to the sudoer list of the 'neolane' Adobe Campaign operator.","IMPORTANT","You should not use a custom sudo. A standard sudo needs to be installed on the system."]},{"section":"Redundant tracking","sectionId":"5e6a04e7-90a3-4c18-966f-db2143697238","paragraphs":["When multiple servers are used for redirection, they must be able to communicate with each other via SOAP calls in order to share information from the URLs to be redirected. At the time of delivery start-up, it is possible that not all the redirection servers will be available; therefore they might not have the same level of information.","NOTE","When using the standard or enterprise architecture, the main application server must be authorized to upload tracking information on each computer.","The URLs of the redundant servers must be specified in the redirection configuration, via the serverConf.xml file.","Example:","<spareserver enabledIf=\"$(hostname)!='front_srv1'\" id=\"1\" url=\"http://front_srv1:8080\" />\n<spareserver enabledIf=\"$(hostname)!='front_srv2'\" id=\"2\" url=\"http://front_srv2:8080\" />","The enableIf property is optional (empty by default) and allows you to enable the connection only if the result is true. This lets you obtain an identical configuration on all redirection servers.","To obtain the hostname of the computer, run the following command: hostname -s."]},{"section":"High availability workflows and affinities","sectionId":"d4e7a4c8-12a9-461d-9bf3-707378ca4e26","paragraphs":["You can configure several workflow servers (wfserver) and distribute them on two or more machines. If you choose this type of architecture, configure the connection mode of the load balancers according to the Adobe Campaign access.","For access from the web, select the load balancer mode to limit connection times.","If accessing via the Adobe Campaign console, choose hash or sticky ip mode. This lets you maintain the connection between the rich client and the server and prevent a user session from being interrupted during an import or export operation, for example.","You can choose to force the execution of a workflow or a workflow activity on a particular machine. To do this, you must define one or more affinities for the concerned workflow or activity.","Create the affinities of the workflow or activity by entering them in the Affinity field.","You can choose any affinity name, but make sure you do not use spaces or punctuation marks. If you use different servers, specify different names.","The drop-down list contains formerly used affinities. It is completed over time with the different entered values.","Open the nl6/conf/config-<instance>.xml file.","Modify the line which matches the wfserver module as follows:","<wfserver autoStart=\"true\" affinity=\"XXX,\"/>","If you define several affinities, they must be separated by commas without any spaces:","<wfserver autoStart=\"true\" affinity=\"XXX,YYY,\"/>","The comma following the name of the affinity is necessary for the execution of workflows for which no affinity is defined.","If you wish to execute only workflows for which an affinity is defined, do not add a comma at the end of the list of your affinities. For example, modify the line as follows:","<wfserver autoStart=\"true\" affinity=\"XXX\"/>"]},{"section":"Automatic restart","sectionId":"8aaaf6e0-00e0-4761-aae0-64e4d6c3498d","paragraphs":["By default, the different Adobe Campaign processes restart automatically at 6am (server time) every day.","However, you can change this configuration.","To do this, go to the serverConf.xml file, located in the conf repository of your installation.","Each process configured in this file has a processRestartTime attribute. You can modify the value of this attribute to adapt the restart time of each process according to your needs.","IMPORTANT","Do not delete this attribute. All processes must be restarted every day."]}]}