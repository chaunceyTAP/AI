{"guid":"22f75a6e-879a-433c-b80e-322de90cdfe7","title":"Web application tracking opt-out","path":"help\\web\\using\\web-application-tracking-opt-out.md","fullText":"---\nproduct: campaign\ntitle: Web application tracking opt-out\ndescription: Web application tracking opt-out\nbadge-v8: label=\"Also applies to v8\" type=\"Positive\" tooltip=\"Also applies to Campaign v8\"\nfeature: Web Apps\nexl-id: 4bff6b55-3335-433e-a2ff-5d8c83e8f0d3\n---\n# Web application tracking opt-out{#web-application-tracking-opt-out}\n\n \n\nAdobe Campaign enables you to stop tracking web behaviors of end-users who opt-out of behavioral tracking via cookies or web beacons. The feature includes the ability to display a banner to present the end-user with that option; you may add these banners into web applications or landing pages.\n\nIf an end-user opts-out of behavioral tracking via cookies or web beacons, then that information is transmitted to the Adobe Campaign tracking server with JavaScript APIs. Please note that some jurisdictions may require that Customer present end-users with an opt-in before an opt-out can be offered (or have other legal requirements), and it is Customer’s responsibility to comply with applicable laws.\n\n>[!NOTE]\n>\n>When scripting always follow the guidelines described in the [Security and Privacy checklist](https://helpx.adobe.com/campaign/kb/acc-security.html#dev).\n\n## Configuring the banner {#configuring-the-banner-}\n\nTo be displayed within Web applications or Landing pages, the banner needs to be configured.\n\nAdobe Campaign is delivered with a sample banner that you must adapt to your needs. This banner version appears as a personalization block located in the content model folder. Refer to [this page](../../delivery/using/personalization-blocks.md).\n\n>[!IMPORTANT]\n>\n>To create your own banner, you must personalize the out-of-the-box banner.\n\nTo activate the banner, you have to configure the Web application properties. Refer to the [Designing a web application](designing-a-web-application.md) section.\n\nIf the Web tracking is activated, you can either have:\n\n* No banner.\n* Configure the banner manually on each page: check this option and select the banner in each page in the page properties.\n\n  ![](assets/pageproperties.png)\n\n* Automatically add the banner to all pages: select the banner directly in the Web application properties.\n\n  ![](assets/optoutconfig.png)\n\n>[!NOTE]\n>\n>A compatibility mode is available for the v5 Web application with the same behavior.\n\nThe default banner has the following structure:\n\n```\n\n<div onClick=\"NL.ClientWebTracking.closeOptOutBanner(this);\" id=\"defaultOptOutBanner\">\n  <p>Please insert your message here\n   <a onClick=\"NL.ClientWebTracking.allow();\" class=\"optout-accept\">Accept</a>\n   <a onClick=\"NL.ClientWebTracking.forbid();\" class=\"optout-decline\">Refuse</a>\n  </p>\n</div>\n      \n```\n\nYou must replace the **Please insert your message here** with the block containing your tracking information. This replacement should be executed in your new personalization block related to the Opt-out banner.\n\nThe banner is delivered with a specific CSS. However, you can overwrite the styles when creating and configuring a webpage. Refer to [this page](content-editor-interface.md).\n\n## Setting the opt-out cookie using API {#setting-the-opt-out-cookie-using-api}\n\nAdobe Campaign is delivered with APIs that allows you to manage the cookie value and to retrieve user preferences.\n\nThe cookie name is **acoptout**. The common values are:\n\n* 0: user has allowed Web tracking (default value)\n* 1: user has forbidden Web tracking\n* null: user has not chosen but Web tracking is allowed as it is the default value\n\nThe available client-side APIs to customize the banner are:\n\n* **NL.ClientWebTracking.allow()**: Sets the opt-out cookie value to allow Web tracking. Web tracking is allowed by default.\n* **NL.ClientWebTracking.forbid()**: Sets the opt-out cookie value to forbid Web tracking. Web tracking needs a user input to be forbidden.\n* **NL.ClientWebTracking.closeOptOutBanner(bannerDomElt)**: Closes the opt-out cookie banner after the user has clicked the Accept or Refuse button. (during the click event bubbling phase)\n\n  bannerDomElt {DOMElement} the root DOM element of the cookie banner that needs to be removed\n\n* **NL.ClientWebTracking.hasUserPrefs()**: Returns true if the user has chosen their preferences for Web tracking.\n* **NL.ClientWebTracking.getUserPrefs()**: Returns the opt-out cookie value that defines the user's preferences.\n\nIf you have to write a JSSP, Server-Side APIs are available:\n\n* **NL.ServerWebTracking.generateOptOutBanner(escapeJs)**: Generates the markup for the opt-out banner to insert in the JSSP page\n\n  **escapeJs {Boolean}**: true when the generated markup needs to be escaped to be used inside JavaScript.\n\n  It returns the HTML of the opt-out banner markup that needs to be printed in the page.\n\n* **NL.ServerWebTracking._displayOptOutBanner()**\n\n  Returns \"true\" if the opt-out banner should be displayed after an opt-out banner was selected by the administrator\n\n  This code is called when the administrator has already chosen to use the Web tracking opt-out banner.\n\n  The banner should be displayed if the user has not yet chosen to be tracked or not.\n\n* **NL.ServerWebTracking.renderOptOutBanner(escapeJs)**\n\n  Renders the markup for the opt-out banner by inserting it into the JSSP page. It is called as is in Jssp between <% %>\n\n  **escapeJs {Boolean}**: true when the generated markup needs to be escaped to be used inside JavaScript\n\nJSSP example:\n\n```\n<%@ page import=\"/nl/core/shared/nl.js\" %>\n<!doctype html>\n<%\nNL.require('/nl/core/shared/webTracking.js');\nNL.client.require('/nl/core/shared/webTracking.js');\n%>\n<html>\n<head>\n<%==NL.client.deps()%>\n</head>\n\n<body>\n\n<!-- TEST USING SERVER API IN JSSP -->\n<% \nvar webTracking = new NL.ServerWebTracking(request, 'optOutBanner');\nwebTracking.renderOptOutBanner();\n%>\n\n<!-- TEST USING SERVER API IN A SCRIPT -->\n<!--\n<% \nvar webTracking = new NL.ServerWebTracking(request, 'optOutBanner');\n%>\n<script>var el = document.createElement('div'); el.innerHTML =  \"<% webTracking.renderOptOutBanner(true); %>\";document.body.appendChild(el);</script>\n-->\n\n<!-- TEST OF THE CLIENT API -->\n<!--\n<div onClick=\"NL.ClientWebTracking.closeOptOutBanner(this);\" id=\"defaultOptOutBanner\">\n  <p>Please insert your message here\n   <a onClick=\"NL.ClientWebTracking.allow();\" class=\"optout-accept\">Accept</a>\n   <a onClick=\"NL.ClientWebTracking.forbid();\" class=\"optout-decline\">Refuse</a>\n  </p>\n</div>\n-->\n</body>\n</html>\n```\n","headers":[["title","Web application tracking opt-out"],["description","Web application tracking opt-out"],["feature","Web Apps"]],"sections":[{"section":"Web application tracking opt-out","sectionId":"8eaccccd-53f8-4923-babc-cb3c4713daf3","paragraphs":["Adobe Campaign enables you to stop tracking web behaviors of end-users who opt-out of behavioral tracking via cookies or web beacons. The feature includes the ability to display a banner to present the end-user with that option; you may add these banners into web applications or landing pages.","If an end-user opts-out of behavioral tracking via cookies or web beacons, then that information is transmitted to the Adobe Campaign tracking server with JavaScript APIs. Please note that some jurisdictions may require that Customer present end-users with an opt-in before an opt-out can be offered (or have other legal requirements), and it is Customer’s responsibility to comply with applicable laws.","NOTE","When scripting always follow the guidelines described in the Security and Privacy checklist."]},{"section":"Configuring the banner","sectionId":"75373d96-5d07-43db-a5c1-6ee00dab51e9","paragraphs":["To be displayed within Web applications or Landing pages, the banner needs to be configured.","Adobe Campaign is delivered with a sample banner that you must adapt to your needs. This banner version appears as a personalization block located in the content model folder. Refer to this page.","IMPORTANT","To create your own banner, you must personalize the out-of-the-box banner.","To activate the banner, you have to configure the Web application properties. Refer to the Designing a web application section.","If the Web tracking is activated, you can either have:","No banner.","Configure the banner manually on each page: check this option and select the banner in each page in the page properties.","Automatically add the banner to all pages: select the banner directly in the Web application properties.","NOTE","A compatibility mode is available for the v5 Web application with the same behavior.","The default banner has the following structure:","<div onClick=\"NL.ClientWebTracking.closeOptOutBanner(this);\" id=\"defaultOptOutBanner\">\n  <p>Please insert your message here\n   <a onClick=\"NL.ClientWebTracking.allow();\" class=\"optout-accept\">Accept</a>\n   <a onClick=\"NL.ClientWebTracking.forbid();\" class=\"optout-decline\">Refuse</a>\n  </p>\n</div>","You must replace the Please insert your message here with the block containing your tracking information. This replacement should be executed in your new personalization block related to the Opt-out banner.","The banner is delivered with a specific CSS. However, you can overwrite the styles when creating and configuring a webpage. Refer to this page."]},{"section":"Setting the opt-out cookie using API","sectionId":"170a0748-440f-40e9-8182-18d86b44271a","paragraphs":["Adobe Campaign is delivered with APIs that allows you to manage the cookie value and to retrieve user preferences.","The cookie name is acoptout. The common values are:","0: user has allowed Web tracking (default value)\n1: user has forbidden Web tracking\nnull: user has not chosen but Web tracking is allowed as it is the default value","The available client-side APIs to customize the banner are:","NL.ClientWebTracking.allow(): Sets the opt-out cookie value to allow Web tracking. Web tracking is allowed by default.","NL.ClientWebTracking.forbid(): Sets the opt-out cookie value to forbid Web tracking. Web tracking needs a user input to be forbidden.","NL.ClientWebTracking.closeOptOutBanner(bannerDomElt): Closes the opt-out cookie banner after the user has clicked the Accept or Refuse button. (during the click event bubbling phase)","bannerDomElt  the root DOM element of the cookie banner that needs to be removed","NL.ClientWebTracking.hasUserPrefs(): Returns true if the user has chosen their preferences for Web tracking.","NL.ClientWebTracking.getUserPrefs(): Returns the opt-out cookie value that defines the user's preferences.","If you have to write a JSSP, Server-Side APIs are available:","NL.ServerWebTracking.generateOptOutBanner(escapeJs): Generates the markup for the opt-out banner to insert in the JSSP page","escapeJs : true when the generated markup needs to be escaped to be used inside JavaScript.","It returns the HTML of the opt-out banner markup that needs to be printed in the page.","NL.ServerWebTracking._displayOptOutBanner()","Returns \"true\" if the opt-out banner should be displayed after an opt-out banner was selected by the administrator","This code is called when the administrator has already chosen to use the Web tracking opt-out banner.","The banner should be displayed if the user has not yet chosen to be tracked or not.","NL.ServerWebTracking.renderOptOutBanner(escapeJs)","Renders the markup for the opt-out banner by inserting it into the JSSP page. It is called as is in Jssp between <% %>","escapeJs : true when the generated markup needs to be escaped to be used inside JavaScript","JSSP example:","<%@ page import=\"/nl/core/shared/nl.js\" %>\n<!doctype html>\n<%\nNL.require('/nl/core/shared/webTracking.js');\nNL.client.require('/nl/core/shared/webTracking.js');\n%>\n<html>\n<head>\n<%==NL.client.deps()%>\n</head>","<body>","<!-- TEST USING SERVER API IN JSSP -->\n<% \nvar webTracking = new NL.ServerWebTracking(request, 'optOutBanner');\nwebTracking.renderOptOutBanner();\n%>","<!-- TEST USING SERVER API IN A SCRIPT -->\n<!--\n<% \nvar webTracking = new NL.ServerWebTracking(request, 'optOutBanner');\n%>\n<script>var el = document.createElement('div'); el.innerHTML =  \"<% webTracking.renderOptOutBanner(true); %>\";document.body.appendChild(el);</script>\n-->","<!-- TEST OF THE CLIENT API -->\n<!--\n<div onClick=\"NL.ClientWebTracking.closeOptOutBanner(this);\" id=\"defaultOptOutBanner\">\n  <p>Please insert your message here\n   <a onClick=\"NL.ClientWebTracking.allow();\" class=\"optout-accept\">Accept</a>\n   <a onClick=\"NL.ClientWebTracking.forbid();\" class=\"optout-decline\">Refuse</a>\n  </p>\n</div>\n-->\n</body>\n</html>"]}]}