{"guid":"5d500e7a-7c67-4da8-999c-52ebceab75e7","title":"Pipeline troubleshooting ","path":"help\\integrations\\using\\pipeline-troubleshooting.md","fullText":"---\nproduct: campaign\ntitle: Pipeline troubleshooting \ndescription: Pipeline troubleshooting \nfeature: Triggers\nbadge-v8: label=\"Also applies to v8\" type=\"Positive\" tooltip=\"Also applies to Campaign v8\"\naudience: integrations\ncontent-type: reference\nexl-id: 76645a6f-9536-49d6-b12a-fdd6113d31fa\n---\n# Pipeline troubleshooting {#pipeline-troubleshooting}\n\n \n\n**Pipelined fails with error \"No task corresponds to the mask pipelined@<&nbsp;instance&nbsp;>\"**\n\nYour version of Adobe Campaign Classic does not support the pipeline.\n\n1. Check if the [!DNL pipelined] element is present in the config file. If not, it means it's not supported.\n1. Upgrade to Campaign 20.3 / [!DNL Gold Standard] 11, or higher.\n\n**Pipelined fails with '' aurait dû commencer par `[` ou `{` (iRc=16384)\"**\n\nThe **NmsPipeline_Config** option is not set. It's actually a JSON parsing error.\nSet the JSON config in the option **NmsPipeline_Config**. See \"routing option\" in this page.\n\n**Pipelined fails with \"the subject must be a valid organization or client\"**\n\nThe Organization ID configuration is not valid.\n\n1. Check that the Organization ID (ImsOrgId) is set in the serverConf.xml.\n1. Check if an empty Organization ID in the instance configuration file could override the default one. If so, remove it.\n1. Check that the Organization ID is correct. To find your Organization ID, refer to [this page](https://experienceleague.adobe.com/docs/core-services/interface/administration/organizations.html){_blank}\n\n**Pipelined fails with \"invalid key\"**\n\nThe @authPrivateKey parameter of the instance config file is incorrect.\n\n1. Check that the authPrivateKey is set.\n1. Check that the authPrivateKey: starts with @, ends with =, and is about 4000 characters long.\n1. Look for the original key and check that it is: in RSA format, 4096 bits long, and starts with `-----BEGIN RSA PRIVATE KEY-----`.\n<br> If necessary, re-create the key and register it on Adobe Analytics.\n1. Check that the key was encoded within the same instance as [!DNL pipelined]. <br>If necessary, redo the encoding using the sample JavaScript or workflow.\n\n**Pipelined fails with \"unable to read the token during authentication\"**\n\nThe private key has an invalid format.\n\n1. Run the steps for key encryption on this page.\n1. Check that the key is encrypted on the same instance.\n1. Check that the authPrivateKey in the config file matches the generated key. <br>Make sure to use OpenSSL to generate the key pair. PuttyGen for example, does not generate the proper format.\n\n**Pipelined fails with \"is no longer allowed to get access token\"**\n\nThe logs should be as follows:\n\n```\n2021-05-31T08:42:18.124Z        66462   66501   1       error   log     Listener: JWT Token is empty. (iRc=16384)\n2021-05-31T08:42:18.210Z        66462   66501   1       error   log     Unknown authentication mode: 'Bearer realm=\"Adobe Analytics\"'. (iRc=-55)\n2021-05-31T08:42:18.210Z        66462   66501   1       error   log     BAS-010007 Function not implemented (iRc=-55)\n2021-05-31T08:42:48.582Z        66462   66501   1       warning log     Connection seems to have been lost. Attempting to reconnect.\n2021-05-31T08:43:09.156Z        66462   66501   1       error   log     INT-150012 The HTTP query returned a 'Forbidden' type error (403) (iRc=-53)\n2021-05-31T08:43:09.160Z        66462   66501   1       error   log     Error while authenticating: '{\"error\":\"This client: df73c224e5-triggers-test is no longer allowed to get access token.\"}' (iRc=16384)\n```\n\nThis error message means that the authentication is configured using the legacy Omniture base OAuth. Refer to the [Configuring Adobe I/O for Adobe Experience Cloud Triggers](../../integrations/using/about-triggers.md#implement) documentation to upgrade your authentication.\n\n**No triggers are retrieved**\n\nWhen the [!DNL pipelined] process is running and no triggers are retrieved:\n\n1. Make sure that the trigger is active in Analytics and is generating events.\n1. Make sure that the [!DNL pipelined] process is running.\n1. Look for errors in the [!DNL pipelined] log.\n1. Look for errors in the [!DNL pipelined] status page. trigger-discarted, trigger-failures should be zero.\n1. Check that the trigger name is configured in the **[!UICONTROL NmsPipeline_Config]** option. If there is a doubt, use the wildcard option.\n1. Check that Analytics has an active trigger and is generating events. There could be a delay of a few hours after the configuration is made in Analytics before it's active.\n\n**Events are not linked to a customer**\n\nWhen some events are not linked to a customer:\n\n1. Check that the reconciliation workflow is running, if applicable.\n1. Check that the event contains a customer ID.\n1. Make a query on the customer table using the customer ID.\n1. Check the frequency of the customer import. New customers are imported into Adobe Campaign with a workflow.\n\n**Latency in events processing**\n\nWhen the Analytics timestamp is much older than the creation date of the event in Campaign.\n\nGenerally, a trigger can take 15-90 minutes to launch a marketing campaign. This varies depending on the implementation of data collection, load on the pipeline, custom configuration of the defined trigger, and the workflow in Adobe Campaign.\n\n1. Check if the [!DNL pipelined] process has been running.\n1. Look for errors in pipelined.log that can cause retries. Fix the errors, if applicable.\n1. Check the [!DNL pipelined] status page for the queue size. If the queue size is large, improve the performance of the JS.\n1. Since a delay seems to increase with volume, configure the triggers on Analytics using fewer messages.\n\n**Upgrading stage instances from legacy authentication to Adobe IO authentication**\n\nChanging the integration authentication on your stage instance will not affect the configuration of your production instance. You can choose to upgrade your stage instance then update the authentication to Adobe IO and test your triggers on your stage instance. \n\nYour production instance will continue to use the legacy authentication and will be unaffected by this change.\n","headers":[["title","Pipeline troubleshooting "],["description","Pipeline troubleshooting "],["feature","Triggers"]],"sections":[{"section":"Pipeline troubleshooting","sectionId":"a6bc90c3-e2e5-4c0a-9a84-d71a2edcb390","paragraphs":["Pipelined fails with error \"No task corresponds to the mask pipelined@<&nbsp;instance&nbsp;>\"","Your version of Adobe Campaign Classic does not support the pipeline.","Check if the DNL pipelined element is present in the config file. If not, it means it's not supported.\nUpgrade to Campaign 20.3 / DNL Gold Standard 11, or higher.","Pipelined fails with '' aurait dû commencer par [ ou { (iRc=16384)\"","The NmsPipeline_Config option is not set. It's actually a JSON parsing error.\nSet the JSON config in the option NmsPipeline_Config. See \"routing option\" in this page.","Pipelined fails with \"the subject must be a valid organization or client\"","The Organization ID configuration is not valid.","Check that the Organization ID (ImsOrgId) is set in the serverConf.xml.\nCheck if an empty Organization ID in the instance configuration file could override the default one. If so, remove it.\nCheck that the Organization ID is correct. To find your Organization ID, refer to this page","Pipelined fails with \"invalid key\"","The @authPrivateKey parameter of the instance config file is incorrect.","Check that the authPrivateKey is set.\nCheck that the authPrivateKey: starts with @, ends with =, and is about 4000 characters long.\nLook for the original key and check that it is: in RSA format, 4096 bits long, and starts with -----BEGIN RSA PRIVATE KEY-----.\n If necessary, re-create the key and register it on Adobe Analytics.\nCheck that the key was encoded within the same instance as DNL pipelined. If necessary, redo the encoding using the sample JavaScript or workflow.","Pipelined fails with \"unable to read the token during authentication\"","The private key has an invalid format.","Run the steps for key encryption on this page.\nCheck that the key is encrypted on the same instance.\nCheck that the authPrivateKey in the config file matches the generated key. Make sure to use OpenSSL to generate the key pair. PuttyGen for example, does not generate the proper format.","Pipelined fails with \"is no longer allowed to get access token\"","The logs should be as follows:","2021-05-31T08:42:18.124Z        66462   66501   1       error   log     Listener: JWT Token is empty. (iRc=16384)\n2021-05-31T08:42:18.210Z        66462   66501   1       error   log     Unknown authentication mode: 'Bearer realm=\"Adobe Analytics\"'. (iRc=-55)\n2021-05-31T08:42:18.210Z        66462   66501   1       error   log     BAS-010007 Function not implemented (iRc=-55)\n2021-05-31T08:42:48.582Z        66462   66501   1       warning log     Connection seems to have been lost. Attempting to reconnect.\n2021-05-31T08:43:09.156Z        66462   66501   1       error   log     INT-150012 The HTTP query returned a 'Forbidden' type error (403) (iRc=-53)\n2021-05-31T08:43:09.160Z        66462   66501   1       error   log     Error while authenticating: '' (iRc=16384)","This error message means that the authentication is configured using the legacy Omniture base OAuth. Refer to the Configuring Adobe I/O for Adobe Experience Cloud Triggers documentation to upgrade your authentication.","No triggers are retrieved","When the DNL pipelined process is running and no triggers are retrieved:","Make sure that the trigger is active in Analytics and is generating events.\nMake sure that the DNL pipelined process is running.\nLook for errors in the DNL pipelined log.\nLook for errors in the DNL pipelined status page. trigger-discarted, trigger-failures should be zero.\nCheck that the trigger name is configured in the NmsPipeline_Config option. If there is a doubt, use the wildcard option.\nCheck that Analytics has an active trigger and is generating events. There could be a delay of a few hours after the configuration is made in Analytics before it's active.","Events are not linked to a customer","When some events are not linked to a customer:","Check that the reconciliation workflow is running, if applicable.\nCheck that the event contains a customer ID.\nMake a query on the customer table using the customer ID.\nCheck the frequency of the customer import. New customers are imported into Adobe Campaign with a workflow.","Latency in events processing","When the Analytics timestamp is much older than the creation date of the event in Campaign.","Generally, a trigger can take 15-90 minutes to launch a marketing campaign. This varies depending on the implementation of data collection, load on the pipeline, custom configuration of the defined trigger, and the workflow in Adobe Campaign.","Check if the DNL pipelined process has been running.\nLook for errors in pipelined.log that can cause retries. Fix the errors, if applicable.\nCheck the DNL pipelined status page for the queue size. If the queue size is large, improve the performance of the JS.\nSince a delay seems to increase with volume, configure the triggers on Analytics using fewer messages.","Upgrading stage instances from legacy authentication to Adobe IO authentication","Changing the integration authentication on your stage instance will not affect the configuration of your production instance. You can choose to upgrade your stage instance then update the authentication to Adobe IO and test your triggers on your stage instance.","Your production instance will continue to use the legacy authentication and will be unaffected by this change."]}]}