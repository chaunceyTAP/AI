{"guid":"93efd17b-adfa-45ad-8ce1-4e4388542eb0","title":"Configure instances","path":"help\\message-center\\using\\configuring-instances.md","fullText":"---\nproduct: campaign\ntitle: Configure instances\ndescription: Learn how to configure the Transactional messaging control and execution instances in Adobe Campaign Classic\nfeature: Transactional Messaging, Message Center\naudience: message-center\ncontent-type: reference\ntopic-tags: instance-configuration\nexl-id: 23a384d1-27ce-46c2-98c3-0fb60a5c50ee\n---\n\n# Configure instances {#creating-a-shared-connection}\n\n\n\nTo use the transactional messaging capabilities, you need to configure the control and execution instances. You can use either:\n* [One control instance](#control-instance) associated with one or several execution instances\n* [Several control instances](#using-several-control-instances) associated with several execution instances\n\n>[!IMPORTANT]\n>\n>Schema extensions impacted the resources used by [Message Center technical workflows](../../message-center/using/additional-configurations.md#technical-workflows) on either control or execution instances need to be duplicated on the other instances used by the Transactional messaging module.\n\nYou also need to specify and connect the execution instance(s) to the control instance(s).\n\nAll the steps needed to configure and connect the control and execution instances are described in this section.\n\n>[!IMPORTANT]\n>\n>The control instance and the execution instance(s) must be installed on different machines. They cannot share the same Campaign instance.\n\n## Configure the control instance {#control-instance}\n\nTo connect the control instance and the execution instances, you first need to create and configure an **[!UICONTROL Execution instance]** type external account **on the control instance**. Therefore, once [published](../../message-center/using/publishing-message-templates.md#template-publication), transactional message templates can be deployed to the execution instances.\n\nIf you are using several execution instances, you must create as many external accounts as there are execution instances.\n\n>[!NOTE]\n>\n>When execution instances are used by several control instances, data can be divided by folder and by operator. For more on this, see [Use several control instances](#using-several-control-instances).\n\n### Create an external account\n\n>[!NOTE]\n>\n>The steps below must be performed **on the control instance**.\n\nTo create an **[!UICONTROL Execution instance]** type external account, apply the following:\n\n1. Go to the **[!UICONTROL Administration > Platform > External accounts]** folder.\n1. Select one of the execution instance type external accounts provided out-of-the-box with Adobe Campaign, right-click and choose **[!UICONTROL Duplicate]** .\n\n   ![](assets/messagecenter_create_extaccount_001.png)\n\n1. Change the label according to your needs. \n\n   ![](assets/messagecenter_create_extaccount_002.png)\n\n1. Select the **[!UICONTROL Enabled]** option to make the external account operational.\n\n   ![](assets/messagecenter_create_extaccount_003.png)\n\n1. Specify the address of the server on which the execution instance is installed.\n\n   ![](assets/messagecenter_create_extaccount_004.png)\n\n1. The account must match the Message Center Agent as defined in the operator folder. By default, the out-of-the-box account provided by Adobe Campaign is **[!UICONTROL mc]** .\n\n   ![](assets/messagecenter_create_extaccount_005.png)\n\n1. Enter the password of the account as defined in the operator folder.\n\n   >[!NOTE]\n   >\n   >To avoid entering a password each time you log on to the instance, you can specify the IP address of the control instance in the execution instance. For more on this, see [Configure the execution instance(s)](#execution-instance).\n\n1. Specify the recovery method to be used by the execution instance. The data to recover is forwarded to the control instance by the execution instance, to add to transactional message and event archives.\n\n   ![](assets/messagecenter_create_extaccount_007.png)\n\n   Data collection occurs either via a Web service which uses HTTP/HTTPS access, or via the Federated Data Access (FDA) module.\n\n   >[!NOTE]\n   >\n   >Please note that when using FDA over HTTP, only execution instances using a PostgreSQL database are supported. MSSQL or Oracle databases are not supported.\n\n   The second method (FDA) is recommended if the control instance has direct access to the database of the execution instances. If not, choose the Web service access. The FDA account to specify coincides with the connection to the databases of the various execution instances created on the control instance.\n\n   ![](assets/messagecenter_create_extaccount_008.png)\n\n   For more information on Federated Data Access (FDA), refer to [this section](../../installation/using/about-fda.md).\n\n1. Click **[!UICONTROL Test the connection]** to make sure the control instance and the execution instance are linked up.\n\n   ![](assets/messagecenter_create_extaccount_006.png)\n\nWhen using several execution instances, repeat these steps to create as many external accounts as there are execution instances.\n\n### Identify execution instances {#identifying-execution-instances}\n\nEach execution instance must be associated with a unique identifier to differentiate the history of each execution instance when viewing them on the control instance.\n\nThis identifier can be attributed on each execution instance **manually**. In this case, this step must be performed **on each execution instance**. To do this, use the deployment wizard as detailed below:\n\n1. Open the deployment wizard on an execution instance.\n1. Go to the **[!UICONTROL Message Center]** window.\n1. Assign your chosen identifier to the instance.\n\n   ![](assets/messagecenter_id_execinstance_001.png)\n\n1. Repeat the steps above on each execution instance.\n\nThe identifier can also be **automatically** attributed. To do this, go to the **control instance**, and click the **[!UICONTROL Initialize connection]** button.\n\n![](assets/messagecenter_create_extaccount_006bis.png)\n\n## Configure the execution instance(s) {#execution-instance}\n\n>[!NOTE]\n>\n>The steps below must be performed **on the execution instance(s)**.\n\nTo connect the execution instance(s) to the control instance, follow the steps below.\n\nIn order for the control instance to be able to connect to the execution instance without having to give a password, simply enter the IP address of the control instance in the **Message Center** access rights section. However, empty passwords are forbidden by default.\n\nTo use an empty password, go to the execution instances and define a security zone limited to the IP address of the information system that delivers the events. This security zone must allow empty passwords and accept `<identifier> / <password>` type connections. For more on this, refer to [this section](../../installation/using/security-zones.md).\n\n>[!NOTE]\n>\n>When execution instances are used by several control instances, data can be divided by folder and by operator. For more on this, see [Use several control instances](#using-several-control-instances).\n\n1. On an execution instance, go to the operator folder ( **[!UICONTROL Administration > Access management > Operators]** ).\n1. Select the **Message Center** agent.\n\n   ![](assets/messagecenter_operator_001.png)\n\n1. Select the **[!UICONTROL Edit]** tab, click **[!UICONTROL Access rights]** , and then click the **[!UICONTROL Edit the access parameters...]** link.\n\n   ![](assets/messagecenter_operator_002.png)\n\n1. In the **[!UICONTROL Access settings]** window, click the **[!UICONTROL Add a trusted IP mask]** link and add the IP address of the control instance.\n\n   ![](assets/messagecenter_operator_003.png)\n\nWhen using several execution instances, repeat these steps for each execution instance.\n\n## Use several control instances {#using-several-control-instances}\n\nYou can share an execution cluster with various control instances. This type of architecture requires the following configuration.\n\nFor example, imagine your company manages two brands, each with its own control instance: **Control 1** and **Control 2**. Two execution instances are also used. You need to enter a different Message Center operator for each control instance: an **mc1** operator for the **Control 1** instance and an **mc2** operator for the **Control 2** instance.\n\nIn the tree of all the execution instances, create one folder per operator (**Folder 1** and **Folder 2**), and restrict each operator's data access to their folder.\n\n### Configure control instances {#configuring-control-instances}\n\n>[!NOTE]\n>\n>The steps below must be performed **on the control instances**.\n\n1. On the **Control 1** control instance, create one external account per execution instance, and enter the **mc1** operator in each external account. The **mc1** operator will thereafter be created on all the execution instances (see [Configure execution instances](#configuring-execution-instances)).\n\n   ![](assets/messagecenter_multi_control_1.png)\n\n1. On the **Control 2** control instance, create one external account per execution instance, and enter the **mc2** operator in each external account. The **mc2** operator will thereafter be created on all the execution instances (see [Configure execution instances](#configuring-execution-instances)).\n\n   ![](assets/messagecenter_multi_control_2.png)\n\n   >[!NOTE]\n   >\n   >For more on configuring a control instance, rsee [this section](#control-instance).\n\n### Configure execution instances {#configuring-execution-instances}\n\n>[!NOTE]\n>\n>The steps below must be performed **on the execution instances**.\n\nIn order to use several control instances, this configuration has to be performed on ALL execution instances.\n\n1. Create one folder per operator in the **[!UICONTROL Administration > Production > Message Center]** node: **Folder 1** and **Folder 2**. For more on creating folders and views, refer to [this page](../../platform/using/access-management-folders.md).\n\n   ![](assets/messagecenter_multi_control_3.png)\n\n1. Create the **mc1** and **mc2** operators by duplicating the Message Center operator provided by default (**mc**). For more on creating operators, refer to [this section](../../platform/using/access-management-operators.md).\n\n   ![](assets/messagecenter_multi_control_4.png)\n\n   >[!NOTE]\n   >\n   >**mc1** and **mc2** operators must have **[!UICONTROL Message Center execution]** rights and they cannot have access to the Adobe Campaign client console. An operator must always be linked with a security zone. For more on this, refer to [this section](../../installation/using/security-zones.md).\n\n1. For each operator, check the **[!UICONTROL Restrict to information found in sub-folders of]** box, and select the relevant folder (**Folder 1** for the **mc1** operator and **Folder 2** for the **mc2** operator).\n\n   ![](assets/messagecenter_multi_control_5.png)\n\n1. Give each operator read and write permissions for their folder. To do this, right-click the folder and select **[!UICONTROL Properties]** . Then select the **[!UICONTROL Security]** tab and add the relevant operator (**mc1** for **Folder 1** and **mc2** for **Folder 2**). Make sure that the **[!UICONTROL Read/Write data]** boxes are checked.\n\n   ![](assets/messagecenter_multi_control_6.png)\n","headers":[["title","Configure instances"],["description","Learn how to configure the Transactional messaging control and execution instances in Adobe Campaign Classic"],["feature","Transactional Messaging, Message Center"],["topic-tags","instance-configuration"]],"sections":[{"section":"Configure instances","sectionId":"b4995e6f-4439-49d1-b0b6-c507c23cd3d2","paragraphs":["To use the transactional messaging capabilities, you need to configure the control and execution instances. You can use either:","One control instance associated with one or several execution instances\nSeveral control instances associated with several execution instances","IMPORTANT","Schema extensions impacted the resources used by Message Center technical workflows on either control or execution instances need to be duplicated on the other instances used by the Transactional messaging module.","You also need to specify and connect the execution instance(s) to the control instance(s).","All the steps needed to configure and connect the control and execution instances are described in this section.","IMPORTANT","The control instance and the execution instance(s) must be installed on different machines. They cannot share the same Campaign instance."]},{"section":"Configure the control instance","sectionId":"9de22043-7f0f-4e6a-a235-7cc0626f1d91","paragraphs":["To connect the control instance and the execution instances, you first need to create and configure an Execution instance type external account on the control instance. Therefore, once published, transactional message templates can be deployed to the execution instances.","If you are using several execution instances, you must create as many external accounts as there are execution instances.","NOTE","When execution instances are used by several control instances, data can be divided by folder and by operator. For more on this, see Use several control instances."]},{"section":"Create an external account","sectionId":"86f9c6fc-f891-4cfa-8835-948853a090ca","paragraphs":["NOTE","The steps below must be performed on the control instance.","To create an Execution instance type external account, apply the following:","Go to the Administration > Platform > External accounts folder.","Select one of the execution instance type external accounts provided out-of-the-box with Adobe Campaign, right-click and choose Duplicate .","Change the label according to your needs.","Select the Enabled option to make the external account operational.","Specify the address of the server on which the execution instance is installed.","The account must match the Message Center Agent as defined in the operator folder. By default, the out-of-the-box account provided by Adobe Campaign is mc .","Enter the password of the account as defined in the operator folder.","NOTE","To avoid entering a password each time you log on to the instance, you can specify the IP address of the control instance in the execution instance. For more on this, see Configure the execution instance(s).","Specify the recovery method to be used by the execution instance. The data to recover is forwarded to the control instance by the execution instance, to add to transactional message and event archives.","Data collection occurs either via a Web service which uses HTTP/HTTPS access, or via the Federated Data Access (FDA) module.","NOTE","Please note that when using FDA over HTTP, only execution instances using a PostgreSQL database are supported. MSSQL or Oracle databases are not supported.","The second method (FDA) is recommended if the control instance has direct access to the database of the execution instances. If not, choose the Web service access. The FDA account to specify coincides with the connection to the databases of the various execution instances created on the control instance.","For more information on Federated Data Access (FDA), refer to this section.","Click Test the connection to make sure the control instance and the execution instance are linked up.","When using several execution instances, repeat these steps to create as many external accounts as there are execution instances."]},{"section":"Identify execution instances","sectionId":"711c0572-0606-499d-aef0-290647ccac00","paragraphs":["Each execution instance must be associated with a unique identifier to differentiate the history of each execution instance when viewing them on the control instance.","This identifier can be attributed on each execution instance manually. In this case, this step must be performed on each execution instance. To do this, use the deployment wizard as detailed below:","Open the deployment wizard on an execution instance.","Go to the Message Center window.","Assign your chosen identifier to the instance.","Repeat the steps above on each execution instance.","The identifier can also be automatically attributed. To do this, go to the control instance, and click the Initialize connection button."]},{"section":"Configure the execution instance(s)","sectionId":"0382effa-dde4-4bca-a640-a4c66eb91bcb","paragraphs":["NOTE","The steps below must be performed on the execution instance(s).","To connect the execution instance(s) to the control instance, follow the steps below.","In order for the control instance to be able to connect to the execution instance without having to give a password, simply enter the IP address of the control instance in the Message Center access rights section. However, empty passwords are forbidden by default.","To use an empty password, go to the execution instances and define a security zone limited to the IP address of the information system that delivers the events. This security zone must allow empty passwords and accept <identifier> / <password> type connections. For more on this, refer to this section.","NOTE","When execution instances are used by several control instances, data can be divided by folder and by operator. For more on this, see Use several control instances.","On an execution instance, go to the operator folder ( Administration > Access management > Operators ).","Select the Message Center agent.","Select the Edit tab, click Access rights , and then click the Edit the access parameters... link.","In the Access settings window, click the Add a trusted IP mask link and add the IP address of the control instance.","When using several execution instances, repeat these steps for each execution instance."]},{"section":"Use several control instances","sectionId":"8aed4c1c-1df5-4cf8-815c-905938731d03","paragraphs":["You can share an execution cluster with various control instances. This type of architecture requires the following configuration.","For example, imagine your company manages two brands, each with its own control instance: Control 1 and Control 2. Two execution instances are also used. You need to enter a different Message Center operator for each control instance: an mc1 operator for the Control 1 instance and an mc2 operator for the Control 2 instance.","In the tree of all the execution instances, create one folder per operator (Folder 1 and Folder 2), and restrict each operator's data access to their folder."]},{"section":"Configure control instances","sectionId":"7897f9d8-ff47-4eda-a6bc-4b4b4f142ca7","paragraphs":["NOTE","The steps below must be performed on the control instances.","On the Control 1 control instance, create one external account per execution instance, and enter the mc1 operator in each external account. The mc1 operator will thereafter be created on all the execution instances (see Configure execution instances).","On the Control 2 control instance, create one external account per execution instance, and enter the mc2 operator in each external account. The mc2 operator will thereafter be created on all the execution instances (see Configure execution instances).","NOTE","For more on configuring a control instance, rsee this section."]},{"section":"Configure execution instances","sectionId":"9ad6e800-ba44-41ae-ae07-199cc8f22128","paragraphs":["NOTE","The steps below must be performed on the execution instances.","In order to use several control instances, this configuration has to be performed on ALL execution instances.","Create one folder per operator in the Administration > Production > Message Center node: Folder 1 and Folder 2. For more on creating folders and views, refer to this page.","Create the mc1 and mc2 operators by duplicating the Message Center operator provided by default (mc). For more on creating operators, refer to this section.","NOTE","mc1 and mc2 operators must have Message Center execution rights and they cannot have access to the Adobe Campaign client console. An operator must always be linked with a security zone. For more on this, refer to this section.","For each operator, check the Restrict to information found in sub-folders of box, and select the relevant folder (Folder 1 for the mc1 operator and Folder 2 for the mc2 operator).","Give each operator read and write permissions for their folder. To do this, right-click the folder and select Properties . Then select the Security tab and add the relevant operator (mc1 for Folder 1 and mc2 for Folder 2). Make sure that the Read/Write data boxes are checked."]}]}