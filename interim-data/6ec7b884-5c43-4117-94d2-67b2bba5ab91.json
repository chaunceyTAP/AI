{"guid":"6ec7b884-5c43-4117-94d2-67b2bba5ab91","title":"Target mapping","path":"help\\configuration\\using\\target-mapping.md","fullText":"---\nproduct: campaign\ntitle: Target mapping\ndescription: Learn how to create a target mapping\nfeature: Application Settings\nrole: Data Engineer, Developer\nbadge-v8: label=\"Also applies to v8\" type=\"Positive\" tooltip=\"Also applies to Campaign v8\"\nexl-id: 38333669-5598-4811-a121-b677c1413f56\n---\n# Target mapping{#target-mapping}\n\n \n\nTarget mapping creation is necessary in two cases:\n\n* if you use a recipient table other than the one provided by Adobe Campaign,\n* if you configure a filtering dimension which is different from the standard targeting dimension on the target mapping screen.\n\nThe target mapping creation wizard will help you create all schemas required to use your custom table.\n\n## Creating and configuring schemas linked to the custom table {#creating-and-configuring-schemas-linked-to-the-custom-table}\n\nBefore you create a target mapping, several configurations are necessary in order for Adobe Campaign to operate with a new recipient data schema.\n\nTo do this, apply the following steps:\n\n1. Create a new data schema which integrates the fields of the custom table that you want to use.\n\n   For further information, refer to [Schema reference (xtk:srcSchema)](../../configuration/using/about-schema-reference.md).\n\n   In our example, we will create a customer schema, a very simple table containing the following fields: ID, first name, last name, email address, mobile phone number. The aim is to be able to send email or SMS alerts to the individuals stored in this table.\n\n   Example schema (cus:individual)\n\n   ```\n   \n   <srcSchema name=\"individual\" namespace=\"cus\" label=\"Individuals\">\n     <element name=\"individual\">\n       <key name=\"id\" internal=\"true\">\n         <keyfield xpath=\"@id\"/>\n       </key>\n       <attribute name=\"id\" type=\"long\" length=\"32\"/>\n       <attribute name=\"lastName\" type=\"string\" length=\"100\"/>\n       <attribute name=\"firstName\" type=\"string\" length=\"100\"/>\n       <attribute name=\"email\" type=\"string\" length=\"100\"/>\n       <attribute name=\"mobile\" type=\"string\" length=\"100\"/>\n     </element>\n   </srcSchema>\n   \n   ```\n\n1. Declare your schema as an external view using the =\"true\" attribute. Refer to [The view attribute](../../configuration/using/schema-characteristics.md#the-view-attribute).\n\n   ```\n   \n    <srcSchema desc=\"External recipient table\" namespace=\"cus\" view=\"true\"....>\n      ...\n    </srcSchema>\n   \n   ```\n\n1. If you need to add a direct mail address, please use the following type of structure:\n\n   ```\n   \n   <element advanced=\"true\" name=\"postalAddress\" template=\"nms:common:postalAddress\">\n        <attribute expr=\"SubString(JuxtWords(Smart([../infos/@firstname]), Upper([../infos/@name])), 1, 80)\"\n                   name=\"line1\"/>\n        <attribute expr=\"Upper([../address/@line2])\" name=\"line2\"/>\n        <attribute expr=\"Upper([../address/@line])\" name=\"line3\"/>\n        <attribute expr=\"Upper([../address/@line])\" name=\"line4\"/>\n        <attribute expr=\"Upper([../address/@line])\" name=\"line5\"/>\n        <attribute expr=\"Upper([../address/@line])\" name=\"line6\"/>\n        <attribute _operation=\"delete\" name=\"line7\"/>\n        <attribute _operation=\"delete\" name=\"addrErrorCount\"/>\n        <attribute _operation=\"delete\" name=\"addrQuality\"/>\n        <attribute _operation=\"delete\" name=\"addrLastCheck\"/>\n        <element expr=\"@line1+'n'+@line2+'n'+@line3+'n'+@line4+'n'+@line5+'n'+@line6\"\n                 name=\"serialized\"/>\n        <attribute expr=\"AllNonNull2([../address/@line], [../infos/@name])\" name=\"addrDefined\"/>\n      </element>\n   \n   ```\n\n1. Click the **[!UICONTROL Administration > Campaign management > Target mappings]** node.\n1. Click the **New** button to open the target mapping creation wizard.\n1. Enter the **Label** field and select the schema which you have just created in the **Targeting dimension** field.\n\n   ![](assets/mapping_diffusion_wizard_1.png)\n\n1. In the **Edit address forms** window, select the fields of the schema which match the various delivery addresses. Here, we are able to map the **@email** and **@mobile** fields.\n\n   ![](assets/mapping_diffusion_wizard_2.png)\n\n1. In the following **Storage** window, enter the **Suffix of the extension schemas** field to differentiate the new schemas from the out-of-the-box schemas provided by Adobe Campaign.\n\n   Click **[!UICONTROL Define new additional fields]** to select the dimension you want to target in your delivery.\n\n   By default, exclusion management is stored in the same table as messages.\n\n   Check the **Generate a storage schema for tracking** box if you want to configure storage for the tracking linked to your target mapping.\n\n   ![](assets/mapping_diffusion_wizard_3.png)\n   \n   >[!IMPORTANT]\n   >\n   >Adobe Campaign does not support multiple recipient schemas, know as targeting schemas, linked to the same broadlog and/or trackinglog schemas. This can otherwise lead to anomalies in data reconciliation afterwards. For more information on this, refer to the [Recommendation and limitations](../../configuration/using/about-custom-recipient-table.md) page.\n\n1. In the **Extensions** window, select the optional schemas that you want to generate (the list of available schemas depends on the modules installed on the Adobe Campaign platform).\n\n   ![](assets/mapping_diffusion_wizard_4.png)\n\n1. Click the **Save** button to close the wizard.\n\n   The wizard uses the start schema to create all the other schemas required to make the new target mapping work.\n\n   ![](assets/mapping_schema_list.png)\n\n## Using target mapping {#using-target-mapping}\n\nThere are two ways of using the new schema as the target of a delivery:\n\n* Create one or more delivery templates based on mapping\n* Select mapping directly during target selection when creating a delivery, as shown below:\n\n![](assets/mapping_selection_ciblage.png)\n","headers":[["title","Target mapping"],["description","Learn how to create a target mapping"],["feature","Application Settings"]],"sections":[{"section":"Target mapping","sectionId":"c80d63de-0d12-4fde-8a85-e414b9165220","paragraphs":["Target mapping creation is necessary in two cases:","if you use a recipient table other than the one provided by Adobe Campaign,\nif you configure a filtering dimension which is different from the standard targeting dimension on the target mapping screen.","The target mapping creation wizard will help you create all schemas required to use your custom table."]},{"section":"Creating and configuring schemas linked to the custom table","sectionId":"c519b1a0-102b-4d11-abe3-12ce6a8cbe33","paragraphs":["Before you create a target mapping, several configurations are necessary in order for Adobe Campaign to operate with a new recipient data schema.","To do this, apply the following steps:","Create a new data schema which integrates the fields of the custom table that you want to use.","For further information, refer to Schema reference (xtk:srcSchema).","In our example, we will create a customer schema, a very simple table containing the following fields: ID, first name, last name, email address, mobile phone number. The aim is to be able to send email or SMS alerts to the individuals stored in this table.","Example schema (cus:individual)","<srcSchema name=\"individual\" namespace=\"cus\" label=\"Individuals\">\n  <element name=\"individual\">\n    <key name=\"id\" internal=\"true\">\n      <keyfield xpath=\"@id\"/>\n    </key>\n    <attribute name=\"id\" type=\"long\" length=\"32\"/>\n    <attribute name=\"lastName\" type=\"string\" length=\"100\"/>\n    <attribute name=\"firstName\" type=\"string\" length=\"100\"/>\n    <attribute name=\"email\" type=\"string\" length=\"100\"/>\n    <attribute name=\"mobile\" type=\"string\" length=\"100\"/>\n  </element>\n</srcSchema>","Declare your schema as an external view using the =\"true\" attribute. Refer to The view attribute.","<srcSchema desc=\"External recipient table\" namespace=\"cus\" view=\"true\"....>\n   ...\n </srcSchema>","If you need to add a direct mail address, please use the following type of structure:","<element advanced=\"true\" name=\"postalAddress\" template=\"nms:common:postalAddress\">\n     <attribute expr=\"SubString(JuxtWords(Smart([../infos/@firstname]), Upper([../infos/@name])), 1, 80)\"\n                name=\"line1\"/>\n     <attribute expr=\"Upper([../address/@line2])\" name=\"line2\"/>\n     <attribute expr=\"Upper([../address/@line])\" name=\"line3\"/>\n     <attribute expr=\"Upper([../address/@line])\" name=\"line4\"/>\n     <attribute expr=\"Upper([../address/@line])\" name=\"line5\"/>\n     <attribute expr=\"Upper([../address/@line])\" name=\"line6\"/>\n     <attribute _operation=\"delete\" name=\"line7\"/>\n     <attribute _operation=\"delete\" name=\"addrErrorCount\"/>\n     <attribute _operation=\"delete\" name=\"addrQuality\"/>\n     <attribute _operation=\"delete\" name=\"addrLastCheck\"/>\n     <element expr=\"@line1+'n'+@line2+'n'+@line3+'n'+@line4+'n'+@line5+'n'+@line6\"\n              name=\"serialized\"/>\n     <attribute expr=\"AllNonNull2([../address/@line], [../infos/@name])\" name=\"addrDefined\"/>\n   </element>","Click the Administration > Campaign management > Target mappings node.","Click the New button to open the target mapping creation wizard.","Enter the Label field and select the schema which you have just created in the Targeting dimension field.","In the Edit address forms window, select the fields of the schema which match the various delivery addresses. Here, we are able to map the @email and @mobile fields.","In the following Storage window, enter the Suffix of the extension schemas field to differentiate the new schemas from the out-of-the-box schemas provided by Adobe Campaign.","Click Define new additional fields to select the dimension you want to target in your delivery.","By default, exclusion management is stored in the same table as messages.","Check the Generate a storage schema for tracking box if you want to configure storage for the tracking linked to your target mapping.","IMPORTANT","Adobe Campaign does not support multiple recipient schemas, know as targeting schemas, linked to the same broadlog and/or trackinglog schemas. This can otherwise lead to anomalies in data reconciliation afterwards. For more information on this, refer to the Recommendation and limitations page.","In the Extensions window, select the optional schemas that you want to generate (the list of available schemas depends on the modules installed on the Adobe Campaign platform).","Click the Save button to close the wizard.","The wizard uses the start schema to create all the other schemas required to make the new target mapping work."]},{"section":"Using target mapping","sectionId":"ccca6b35-57fb-4f0d-b787-c023d7cdbf67","paragraphs":["There are two ways of using the new schema as the target of a delivery:","Create one or more delivery templates based on mapping\nSelect mapping directly during target selection when creating a delivery, as shown below:"]}]}