{"guid":"7aaa5046-2bef-4e71-bf5e-b13a85142333","title":"Delivery","path":"help\\workflow\\using\\delivery.md","fullText":"---\nproduct: campaign\ntitle: Delivery\ndescription: Learn more about the Delivery-type workflow activity\nfeature: Workflows, Channels Activity\nexl-id: 72fbdd1d-a105-4e9f-9e17-2e9d62d2bb80\n---\n# Delivery{#delivery}\n\n\n\nA **Delivery**-type activity lets you create a delivery action. It can be constructed using input elements.\n\nTo configure it, edit the activity and enter the delivery options.\n\n![](assets/edit_diffusion.png)\n\n1. **Delivery**\n\n   You can:\n\n    * Act on the delivery specified in the inbound transition. To do this, select the first option of the **[!UICONTROL Delivery]** section of the window.\n\n      This option can be used when a previous workflow activity has already created or specified the delivery. This can have been done, like in the example below, by an activity of the same type having generated an outbound transition.\n\n      In the following example, the delivery is created for the first time. The population and the content are defined later. Next, the information for these three elements is re-entered into a new delivery activity using the inbound transition so that this can be sent.\n    \n      ![](assets/specified_transition_option_exemple.png)\n\n    * Directly select the delivery concerned. To do this, select the **[!UICONTROL Explicit]** option and select the delivery from the drop-down list of the **[!UICONTROL Delivery]** field.\n\n      The list shows unfinished deliveries contained in the **Deliveries** folder by default. To access other campaigns, click the **[!UICONTROL Select link]** icon.\n    \n      ![](assets/diffusion_edit_1.png)\n\n      Select the campaign from the drop-down list of the **[!UICONTROL Folder]** field, or click **[!UICONTROL Display sub-levels]** to display all of the deliveries contained in sub-folders:\n    \n      ![](assets/diffusion_edit_2.png)\n\n      After selecting the delivery action, you can display the content by clicking the **[!UICONTROL Edit link]** icon.\n    \n    * Create a script to calculate the delivery. To do this, select the **[!UICONTROL Computed by a script]** option and enter the script. You can open an input window by clicking the **[!UICONTROL Edit...]** option. The following example recovers the identifier of the delivery:\n    \n      ![](assets/diffusion_edit_3.png)\n\n    * Create a new delivery. To do this, select the **[!UICONTROL New, created from a template]** option and select the delivery template which the delivery will be based on.\n    \n      ![](assets/diffusion_edit_4.png)\n\n      Click the **[!UICONTROL Select link]** icon to browse the folders, and click the **[!UICONTROL Edit link]** icon if you wish to view the content of the selected template.\n\n1. **Recipients**\n\n   Recipients can be specified by the inbound events, for example following a file import, or specified in the delivery action. They can also be stored in one or more files.\n\n   ![](assets/diffusion_edit_5.png)\n\n1. **Content**\n\n   The content of the message can be defined in the delivery or the inbound event.\n\n   ![](assets/diffusion_edit_6.png)\n\n1. **Action to execute**\n\n   You can create the delivery, prepare it, start it, estimate the target or send a proof. \n\n   ![](assets/diffusion_edit_7.png)\n\n   Select the type of action to be carried out:\n\n    * **[!UICONTROL Save]**: this option lets you create the delivery and save it. It will not analyze or deliver it.\n    * **[!UICONTROL Estimate the target]**: this option lets you calculate the delivery target to assess its potential (first analysis phase). This action is the equivalent of selecting the **[!UICONTROL Estimate the population to be targeted]** option and clicking **[!UICONTROL Analyze]** when sending a delivery to the main target via **Delivery**.\n    * **[!UICONTROL Prepare]**: this option lets you run the full analysis process (target calculation and content preparation). The delivery isn't sent. This action is the equivalent of selecting the **[!UICONTROL Deliver as soon as possible]** option and clicking **[!UICONTROL Analyze]** when sending a delivery to the main target with **Delivery**.\n    * **[!UICONTROL Send a proof]**: this option lets you send a proof of the delivery. This action is the equivalent of clicking the **[!UICONTROL Send a proof]** button in the toolbar of a delivery with **Delivery** \n    * **[!UICONTROL Prepare and start]**: this option launches the full analysis process (target calculation and content preparation) and sends the delivery. This action is the equivalent of clicking **[!UICONTROL Deliver as soon as possible]**, **[!UICONTROL Analyze]**, and **[!UICONTROL Confirm delivery]** option when sending a delivery to the main target with **Delivery**.\n\n   The **[!UICONTROL Act on a delivery]** activity used further on in the workflow lets you launch all remaining steps required for starting the delivery (target calculation, content preparation, delivery). For more on this, refer to [Delivery control](delivery-control.md).\n\n   The following options are also available:\n\n    * **[!UICONTROL Generate an outbound transition]**\n\n      Creates an outbound transition that will be activated at the end of execution. You can choose whether or not to retrieve the target of the outbound delivery.\n    \n    * **[!UICONTROL Do not recover target]**\n\n      Does not recover the target of the outgoing delivery action.\n    \n    * **[!UICONTROL Processing errors]**\n\n      Refer to [Delivery control](delivery-control.md).\n\n   The **Script** tab lets you modify the delivery parameters.\n\n   ![](assets/edit_diffusion_fil_script.png)\n\n## Example: delivery workflow {#example--delivery-workflow}\n\nCreate a new workflow and add activities as shown in the graphic below:\n\n![](assets/new-workflow-5.png)\n\nOpen the **Delivery** activity and define the properties as follows:\n\n* In the **[!UICONTROL Delivery]** section, select **[!UICONTROL New, created from a template]** and select a delivery template. \n* In the **[!UICONTROL Recipients]** section, select **[!UICONTROL Specified in the delivery]**. \n* In the **[!UICONTROL Action to execute]** section, keep the **[!UICONTROL Prepare]** option.\n\n![](assets/new-workflow-param-delivery.png)\n\nClick **[!UICONTROL OK]** to close the properties window. You have just configured an activity that consists of creating and preparing a new delivery based on a delivery template whose target will be specified within it.\n\nOpen the **Approval** activity and define the properties as follows:\n\n1. In the **[!UICONTROL Assignment type]** field, select a group in which you are registered. If you are connected using the 'admin' account, select the Administration group.\n1. Next, enter a title and insert the following text in the message body:\n\n   ```\n   Do you wish to approve delivery (<%= vars.recCount %> recipient(s))?\n   ```\n\n   This is a message that includes an expression written in JavaScript: **[!UICONTROL vars.recCount]** represents the number of recipients targeted by the delivery of the preceding task. For further information on JavaScript expressions, refer to [JavaScript scripts and templates](javascript-scripts-and-templates.md).\n\n   ![](assets/new-workflow-param-validation.png)\n\n   The Approval task is detailed in [Approval](approval.md).\n\n## Input parameters {#input-parameters}\n\nDelivery identifier, if the **[!UICONTROL Specified in the transition]** option is selected in the **[!UICONTROL Delivery]** section.\n\n* deliveryId\n* tableName\n* schema\n\nEach inbound event must specify a target defined by these parameters.\n\n>[!NOTE]\n>\n>This parameter only appears if the **[!UICONTROL Specified by inbound event(s)]** option is selected in the **[!UICONTROL Recipients]** section.\n\n* filename\n\n  Full name of the file generated if the **[!UICONTROL File(s) specified by inbound event(s)]** option is selected in the **[!UICONTROL Recipients]** section.\n\n* contentId\n\n  Content identifier if the **[!UICONTROL Specified by inbound events]** option is selected in the **[!UICONTROL Content]** section.\n\n## Output parameters {#output-parameters}\n\n* tableName\n* schema\n* recCount\n\nThis set of three values identifies the target resulting from the delivery. **[!UICONTROL tableName]** is the name of the table which memorizes the identifiers of the target, **[!UICONTROL schema]** is the schema of the population (usually nms:recipient) and **[!UICONTROL recCount]** is the number of elements in the table.\n\nThe transition associated with the complement has the same parameters.\n\n>[!NOTE]\n>\n>There are no output parameters when the **[!UICONTROL Do not recover target]** option is selected.\n","headers":[["title","Delivery"],["description","Learn more about the Delivery-type workflow activity"],["feature","Workflows, Channels Activity"]],"sections":[{"section":"Delivery","sectionId":"2c5b29f4-a0f8-468b-8e58-ee902fd9e9a0","paragraphs":["A Delivery-type activity lets you create a delivery action. It can be constructed using input elements.","To configure it, edit the activity and enter the delivery options.","Delivery","You can:","Act on the delivery specified in the inbound transition. To do this, select the first option of the Delivery section of the window.","This option can be used when a previous workflow activity has already created or specified the delivery. This can have been done, like in the example below, by an activity of the same type having generated an outbound transition.","In the following example, the delivery is created for the first time. The population and the content are defined later. Next, the information for these three elements is re-entered into a new delivery activity using the inbound transition so that this can be sent.","Directly select the delivery concerned. To do this, select the Explicit option and select the delivery from the drop-down list of the Delivery field.","The list shows unfinished deliveries contained in the Deliveries folder by default. To access other campaigns, click the Select link icon.","Select the campaign from the drop-down list of the Folder field, or click Display sub-levels to display all of the deliveries contained in sub-folders:","After selecting the delivery action, you can display the content by clicking the Edit link icon.","Create a script to calculate the delivery. To do this, select the Computed by a script option and enter the script. You can open an input window by clicking the Edit... option. The following example recovers the identifier of the delivery:","Create a new delivery. To do this, select the New, created from a template option and select the delivery template which the delivery will be based on.","Click the Select link icon to browse the folders, and click the Edit link icon if you wish to view the content of the selected template.","Recipients","Recipients can be specified by the inbound events, for example following a file import, or specified in the delivery action. They can also be stored in one or more files.","Content","The content of the message can be defined in the delivery or the inbound event.","Action to execute","You can create the delivery, prepare it, start it, estimate the target or send a proof.","Select the type of action to be carried out:","Save: this option lets you create the delivery and save it. It will not analyze or deliver it.\nEstimate the target: this option lets you calculate the delivery target to assess its potential (first analysis phase). This action is the equivalent of selecting the Estimate the population to be targeted option and clicking Analyze when sending a delivery to the main target via Delivery.\nPrepare: this option lets you run the full analysis process (target calculation and content preparation). The delivery isn't sent. This action is the equivalent of selecting the Deliver as soon as possible option and clicking Analyze when sending a delivery to the main target with Delivery.\nSend a proof: this option lets you send a proof of the delivery. This action is the equivalent of clicking the Send a proof button in the toolbar of a delivery with Delivery \nPrepare and start: this option launches the full analysis process (target calculation and content preparation) and sends the delivery. This action is the equivalent of clicking Deliver as soon as possible, Analyze, and Confirm delivery option when sending a delivery to the main target with Delivery.","The Act on a delivery activity used further on in the workflow lets you launch all remaining steps required for starting the delivery (target calculation, content preparation, delivery). For more on this, refer to Delivery control.","The following options are also available:","Generate an outbound transition","Creates an outbound transition that will be activated at the end of execution. You can choose whether or not to retrieve the target of the outbound delivery.","Do not recover target","Does not recover the target of the outgoing delivery action.","Processing errors","Refer to Delivery control.","The Script tab lets you modify the delivery parameters."]},{"section":"Example: delivery workflow","sectionId":"8ab55d8c-6dc7-4a6a-846d-7fcad29e2846","paragraphs":["Create a new workflow and add activities as shown in the graphic below:","Open the Delivery activity and define the properties as follows:","In the Delivery section, select New, created from a template and select a delivery template. \nIn the Recipients section, select Specified in the delivery. \nIn the Action to execute section, keep the Prepare option.","Click OK to close the properties window. You have just configured an activity that consists of creating and preparing a new delivery based on a delivery template whose target will be specified within it.","Open the Approval activity and define the properties as follows:","In the Assignment type field, select a group in which you are registered. If you are connected using the 'admin' account, select the Administration group.","Next, enter a title and insert the following text in the message body:","Do you wish to approve delivery (<%= vars.recCount %> recipient(s))?","This is a message that includes an expression written in JavaScript: vars.recCount represents the number of recipients targeted by the delivery of the preceding task. For further information on JavaScript expressions, refer to JavaScript scripts and templates.","The Approval task is detailed in Approval."]},{"section":"Input parameters","sectionId":"a73cd817-3dd9-4749-adaf-22210aba23eb","paragraphs":["Delivery identifier, if the Specified in the transition option is selected in the Delivery section.","deliveryId\ntableName\nschema","Each inbound event must specify a target defined by these parameters.","NOTE","This parameter only appears if the Specified by inbound event(s) option is selected in the Recipients section.","filename","Full name of the file generated if the File(s) specified by inbound event(s) option is selected in the Recipients section.","contentId","Content identifier if the Specified by inbound events option is selected in the Content section."]},{"section":"Output parameters","sectionId":"8748104b-cf4b-4bc4-b439-b0e5471eac24","paragraphs":["tableName\nschema\nrecCount","This set of three values identifies the target resulting from the delivery. tableName is the name of the table which memorizes the identifiers of the target, schema is the schema of the population (usually nms:recipient) and recCount is the number of elements in the table.","The transition associated with the complement has the same parameters.","NOTE","There are no output parameters when the Do not recover target option is selected."]}]}