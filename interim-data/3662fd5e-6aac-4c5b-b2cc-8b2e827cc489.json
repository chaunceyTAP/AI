{"guid":"3662fd5e-6aac-4c5b-b2cc-8b2e827cc489","title":"Use the local approval activity","path":"help\\workflow\\using\\using-the-local-approval-activity.md","fullText":"---\nproduct: campaign\ntitle: Use the local approval activity\ndescription: Learn how to use the local approval activity\nfeature: Workflows\nexl-id: cc29eec9-9c97-4d1b-9567-2581154d7b3f\n---\n# Use the local approval activity{#using-the-local-approval-activity}\n\n\n\nThe **[!UICONTROL Local approval]** activity integrated into a targeting workflow lets you set up a recipient approval process before the delivery is sent.\n\n>[!CAUTION]\n>\n>To use this function, you need to purchase the Distributed Marketing module, which is a Campaign option. Please check your license agreement.\n\nTo set up this use case, we created the following targeting workflow:\n\n![](assets/local_validation_workflow.png)\n\nThe main steps of the local approval process are:\n\n1. The population resulting from targeting can be limited thanks to a **[!UICONTROL Split]** type activity using a data distribution model. \n\n   ![](assets/local_validation_intro_1.png)\n\n1. The **[!UICONTROL Local approval]** activity then takes over and sends a notification email to each local supervisor. The activity is pended until each local supervisor approves the recipients assigned to them.\n\n   ![](assets/local_validation_intro_4.png)\n\n1. Once the approval deadline is reached, the workflow starts again. In this example, the **[!UICONTROL Delivery]** activity starts and the delivery is sent to the approved targets.\n\n   >[!NOTE]\n   >\n   >Once the deadline is reached, recipients who haven't been approved are excluded from targeting.\n\n   ![](assets/local_validation_intro_6.png)\n\n1. A few days later, the second **[!UICONTROL Local approval]** type activity sends a notification email to each local supervisor with a summary of the actions carried out by their contacts (clicks, opens, etc.). \n\n   ![](assets/local_validation_intro_5.png)\n\n## Step 1: Creating the data distribution template {#step-1--creating-the-data-distribution-template-}\n\nThe data distribution template lets you limit the population resulting from targeting based on data grouping while enabling you to assign each value to a local supervisor. In this example, we have defined the **[!UICONTROL Email address domain]** field as a distribution field and assigned a domain to each local supervisor\n\nFor more on creating a data distribution template, refer to [Limiting the number of subset records per data distribution](split.md#limiting-the-number-of-subset-records-per-data-distribution).\n\n1. To create the data distribution template, go to the **[!UICONTROL Resources > Campaign management > Data distribution]** node and click **[!UICONTROL New]**.\n\n   ![](assets/local_validation_data_distribution_1.png)\n\n1. Select the **[!UICONTROL General]** tab.\n\n   ![](assets/local_validation_data_distribution_2.png)\n\n1. Enter the **[!UICONTROL Label]** and the **[!UICONTROL Distribution context]**. In this example, we have selected the **[!UICONTROL Recipient]** targeting schema and the **[!UICONTROL Email domain]** field as a distribution field. The list of recipients will be broken down by domain.\n1. In the **[!UICONTROL Distribution type]** field, select how the target limitation value will be expressed in the **[!UICONTROL Distribution]** tab. Here, we have chosen **[!UICONTROL Percentage]**.\n1. In the **[!UICONTROL Approval storage]** field, enter the storage schema of the approvals that match the targeting schema in use. Here we are going to use the default storage schema: **[!UICONTROL Local approval of recipients]**.\n1. Then click the **[!UICONTROL Advanced parameters]** link.\n\n   ![](assets/local_validation_data_distribution_3.png)\n\n1. Keep the **[!UICONTROL Approve the targeted messages]** option checked so that all recipients are pre-selected from the list of recipients to approve.\n1. In the **[!UICONTROL Delivery label]** field, we've left the default expression (compute string of the delivery). The standard label of the delivery will be used in the feedback notification.\n1. In the **[!UICONTROL Grouping field]** section, we have selected the **[!UICONTROL Gender]** field as a grouping field for displaying recipients in the approval and feedback notifications.\n1. In the **[!UICONTROL Edit targeted messages]** section, we've selected the **[!UICONTROL Edit recipients]** web application and the **[!UICONTROL recipientId]** parameter. In the approval and feedback notifications, recipients will be clickable and will point towards the URL of the web application. The additional URL parameter will be **[!UICONTROL recipientId]**.\n1. Then click the **[!UICONTROL Distribution]** tab. For each domain, enter the following fields:\n\n   ![](assets/local_validation_data_distribution_4.png)\n\n    * **[!UICONTROL Value]**: enter the value of the domain name. \n    * **[!UICONTROL Percentage / Fixed]**: for each domain, enter the max. number of recipients you want to send the delivery to. In this example, we want to limit the delivery to 10% per domain.\n    * **[!UICONTROL Label]**: enter the label of the domain to be displayed in the approval and feedback notifications.\n    * **[!UICONTROL Group or operator]**: select the operator or group of operators assigned to the domain.\n\n      >[!CAUTION]\n      >\n      >Make sure the operators have been assigned the appropriate rights.\n\n## Step 2: Creating the targeting workflow {#step-2--creating-the-targeting-workflow}\n\nTo set up this use case, we created the following targeting workflow:\n\n![](assets/local_validation_workflow.png)\n\nThe following activities were added:\n\n* Two **[!UICONTROL Query]** activities,\n* One **[!UICONTROL Intersection]** activity,\n* One **[!UICONTROL Split]** activity,\n* One **[!UICONTROL Local approval]** activity,\n* One **[!UICONTROL Delivery]** activity,\n* One **[!UICONTROL Wait]** activity,\n* A second **[!UICONTROL Local approval]** activity,\n* One **[!UICONTROL End]** activity.\n\n### Queries, Intersection and Split {#queries--intersection-and-split}\n\nUpstream targeting is made up of two queries, one intersection and one split. The population resulting from targeting can be limited using a **[!UICONTROL Split]** activity using a data distribution template.\n\nFor more on configuring a split activity, refer to [Split](split.md). The creation of a data distribution template is detailed in [Limiting the number of subset records per data distribution](split.md#limiting-the-number-of-subset-records-per-data-distribution).\n\nIf you do not want to limit the population from the query, you do not have to use the **[!UICONTROL Query]**, **[!UICONTROL Intersection]**, and **[!UICONTROL Split]** activities. In this case, complete the data distribution template in the first **[!UICONTROL Local approval]** activity.\n\n1. In the **[!UICONTROL Record count limitation]** section, select the **[!UICONTROL Limit the selected records]** option and click the **[!UICONTROL Edit]** link.\n\n   ![](assets/local_validation_split_1.png)\n\n1. Select the **[!UICONTROL Keep only the first records after sorting]** option and click **[!UICONTROL Next]**.\n\n   ![](assets/local_validation_split_1bis.png)\n\n1. In the **[!UICONTROL Sort columns]** section, add the field which the sort is applied to. Here, we have chosen the **[!UICONTROL Email]** field. Click **[!UICONTROL Next]**.\n\n   ![](assets/local_validation_split_2.png)\n\n1. Select the **[!UICONTROL By data distribution]** option, select the distribution template created previously (refer to [Step 1: Creating the data distribution template](#step-1--creating-the-data-distribution-template-)) and click **[!UICONTROL Finish]**.\n\n   ![](assets/local_validation_split_3.png)\n\nIn the distribution template, we have chosen to limit the population to 10% per grouping value, which coincides with the values displayed in the workflow (340 as an input and 34 as an output).\n\n![](assets/local_validation_intro_1.png)\n\n### Approval notification {#approval-notification}\n\nThe **[!UICONTROL Local approval]** activity lets you send a notification to each local supervisor.\n\nFor more on configuring the **[!UICONTROL Local approval]** activity, refer to [Local approval](local-approval.md).\n\n![](assets/local_validation_workflow_2.png)\n\nThe following fields need to be entered:\n\n1. In the **[!UICONTROL Action to execute]** section, select the **[!UICONTROL Target approval notification]** option.\n1. In the **[!UICONTROL Distribution context]** section, select the **[!UICONTROL Specified in the transition]** option.\n\n   If you don't want to limit the targeted population, select the **[!UICONTROL Explicit]** option here and enter the distribution template created previously in the **[!UICONTROL Data distribution]** field. \n\n1. In the **[!UICONTROL Notification]** section, select the delivery template and the subject to be used for the notification email. Here, we have chosen the default template: **[!UICONTROL Local approval notification]**.\n1. In the **[!UICONTROL Approval schedule]** section, we've kept the default approval deadline (3 days) and added a reminder. The delivery will leave 3 days after the start of approval. Once the approval deadline has been reached, recipients who haven't been approved aren't taken into account by targeting.\n\nThe notification email sent by the **[!UICONTROL Local approval]** activity to local supervisors is as follows: \n\n![](assets/local_validation_intro_2.png)\n\n### Wait {#wait}\n\nThe wait activity lets you postpone the start of the second local approval activity that will send the delivery feedback notification. In the **[!UICONTROL Duration]** field, we have entered the **[!UICONTROL 5d]** value (5 days). The actions performed by recipients for 5 days following the sending of the delivery will be included in the feedback notification.\n\n![](assets/local_validation_workflow_3.png)\n\n### Feedback notification {#feedback-notification}\n\nThe second **[!UICONTROL Local approval]** activity lets you send a delivery feedback notification to each local supervisor.\n\n![](assets/local_validation_workflow_4.png)\n\nThe following fields need to be entered.\n\n1. In the **[!UICONTROL Action to execute]** section, choose **[!UICONTROL Delivery feedback report]**.\n1. In the **[!UICONTROL Delivery]** section, choose **[!UICONTROL Specified in the transition]**. \n1. In the **[!UICONTROL Notification]** section, select the delivery template and the subject to be used for the notification email.\n\nOnce the deadline configured in the wait activity is reached, the second **[!UICONTROL Local approval]** type activity sends the following notification email to each local supervisor:\n\n![](assets/local_validation_intro_3.png)\n\n### Approval tracking by the administrator {#approval-tracking-by-the-administrator}\n\nEach time the local approval activity starts, an approval task is created. The administrator can control each of these approval tasks.\n\nGo to the targeting workflow of your campaign and click the **[!UICONTROL Local approval tasks]** tab.\n\n![](assets/local_validation_admin_1.png)\n\nThe list of local approval tasks can also be accessed via the **[!UICONTROL Approval tasks]** tab of the data distribution template.\n\n![](assets/local_validation_admin_2.png)\n\nSelect the task you want to monitor and click the **[!UICONTROL Detail]** button. The **[!UICONTROL General]** tab of the local approval task lets you view information on the task. If necessary, you can alter the approval and the reminder dates.\n\n![](assets/local_validation_admin_3.png)\n\nThis tab shows the following information:\n\n* the label of the task and its ID\n* the distribution template used\n* the number of targeted messages\n* the linked workflow and campaign\n* the task schedule\n\nThe **[!UICONTROL Distribution]** tab for the task lets you view the approval logs, their status, the number of messages targeted, the approval date, as well as the operator who approved the delivery.\n\n![](assets/local_validation_admin_4.png)\n\nSelect an approval log and click the **[!UICONTROL Detail]** button to display more information. The **[!UICONTROL General]** tab of the local approval log lets you view general log information. You can also change the approval status.\n\n![](assets/local_validation_admin_5.png)\n\nThis tab shows the following information:\n\n* the linked approval task\n* the approval status (**[!UICONTROL Approved]** or **[!UICONTROL Pending]**)\n* the distribution template used\n* the local supervisor who approved and the approval date\n* the number of messages targeted and approved\n\nThe **[!UICONTROL Targeted]** tab of the approval log displays the list of targeted recipients and their approval status. You can change this status if necessary. \n\n![](assets/local_validation_admin_6.png)\n","headers":[["title","Use the local approval activity"],["description","Learn how to use the local approval activity"],["feature","Workflows"]],"sections":[{"section":"Use the local approval activity","sectionId":"a131e804-75e6-4082-869a-56ec6e0f7cec","paragraphs":["The Local approval activity integrated into a targeting workflow lets you set up a recipient approval process before the delivery is sent.","CAUTION","To use this function, you need to purchase the Distributed Marketing module, which is a Campaign option. Please check your license agreement.","To set up this use case, we created the following targeting workflow:","The main steps of the local approval process are:","The population resulting from targeting can be limited thanks to a Split type activity using a data distribution model.","The Local approval activity then takes over and sends a notification email to each local supervisor. The activity is pended until each local supervisor approves the recipients assigned to them.","Once the approval deadline is reached, the workflow starts again. In this example, the Delivery activity starts and the delivery is sent to the approved targets.","NOTE","Once the deadline is reached, recipients who haven't been approved are excluded from targeting.","A few days later, the second Local approval type activity sends a notification email to each local supervisor with a summary of the actions carried out by their contacts (clicks, opens, etc.)."]},{"section":"Step 1: Creating the data distribution template","sectionId":"f0fbe8a9-04ab-42c3-a47f-933e3c4e8280","paragraphs":["The data distribution template lets you limit the population resulting from targeting based on data grouping while enabling you to assign each value to a local supervisor. In this example, we have defined the Email address domain field as a distribution field and assigned a domain to each local supervisor","For more on creating a data distribution template, refer to Limiting the number of subset records per data distribution.","To create the data distribution template, go to the Resources > Campaign management > Data distribution node and click New.","Select the General tab.","Enter the Label and the Distribution context. In this example, we have selected the Recipient targeting schema and the Email domain field as a distribution field. The list of recipients will be broken down by domain.","In the Distribution type field, select how the target limitation value will be expressed in the Distribution tab. Here, we have chosen Percentage.","In the Approval storage field, enter the storage schema of the approvals that match the targeting schema in use. Here we are going to use the default storage schema: Local approval of recipients.","Then click the Advanced parameters link.","Keep the Approve the targeted messages option checked so that all recipients are pre-selected from the list of recipients to approve.","In the Delivery label field, we've left the default expression (compute string of the delivery). The standard label of the delivery will be used in the feedback notification.","In the Grouping field section, we have selected the Gender field as a grouping field for displaying recipients in the approval and feedback notifications.","In the Edit targeted messages section, we've selected the Edit recipients web application and the recipientId parameter. In the approval and feedback notifications, recipients will be clickable and will point towards the URL of the web application. The additional URL parameter will be recipientId.","Then click the Distribution tab. For each domain, enter the following fields:","Value: enter the value of the domain name.","Percentage / Fixed: for each domain, enter the max. number of recipients you want to send the delivery to. In this example, we want to limit the delivery to 10% per domain.","Label: enter the label of the domain to be displayed in the approval and feedback notifications.","Group or operator: select the operator or group of operators assigned to the domain.","CAUTION","Make sure the operators have been assigned the appropriate rights."]},{"section":"Step 2: Creating the targeting workflow","sectionId":"8ee160a1-0c57-4a5f-b30c-76f257cb20b7","paragraphs":["To set up this use case, we created the following targeting workflow:","The following activities were added:","Two Query activities,\nOne Intersection activity,\nOne Split activity,\nOne Local approval activity,\nOne Delivery activity,\nOne Wait activity,\nA second Local approval activity,\nOne End activity."]},{"section":"Queries, Intersection and Split","sectionId":"d0ab02a2-d823-47dd-a2f2-ff58b5f76d4f","paragraphs":["Upstream targeting is made up of two queries, one intersection and one split. The population resulting from targeting can be limited using a Split activity using a data distribution template.","For more on configuring a split activity, refer to Split. The creation of a data distribution template is detailed in Limiting the number of subset records per data distribution.","If you do not want to limit the population from the query, you do not have to use the Query, Intersection, and Split activities. In this case, complete the data distribution template in the first Local approval activity.","In the Record count limitation section, select the Limit the selected records option and click the Edit link.","Select the Keep only the first records after sorting option and click Next.","In the Sort columns section, add the field which the sort is applied to. Here, we have chosen the Email field. Click Next.","Select the By data distribution option, select the distribution template created previously (refer to Step 1: Creating the data distribution template) and click Finish.","In the distribution template, we have chosen to limit the population to 10% per grouping value, which coincides with the values displayed in the workflow (340 as an input and 34 as an output)."]},{"section":"Approval notification","sectionId":"a7561022-bbf4-4fa4-8cbe-ff632770394f","paragraphs":["The Local approval activity lets you send a notification to each local supervisor.","For more on configuring the Local approval activity, refer to Local approval.","The following fields need to be entered:","In the Action to execute section, select the Target approval notification option.","In the Distribution context section, select the Specified in the transition option.","If you don't want to limit the targeted population, select the Explicit option here and enter the distribution template created previously in the Data distribution field.","In the Notification section, select the delivery template and the subject to be used for the notification email. Here, we have chosen the default template: Local approval notification.","In the Approval schedule section, we've kept the default approval deadline (3 days) and added a reminder. The delivery will leave 3 days after the start of approval. Once the approval deadline has been reached, recipients who haven't been approved aren't taken into account by targeting.","The notification email sent by the Local approval activity to local supervisors is as follows:"]},{"section":"Wait","sectionId":"fc09c98c-83f7-402f-ab67-5941e5320d16","paragraphs":["The wait activity lets you postpone the start of the second local approval activity that will send the delivery feedback notification. In the Duration field, we have entered the 5d value (5 days). The actions performed by recipients for 5 days following the sending of the delivery will be included in the feedback notification."]},{"section":"Feedback notification","sectionId":"9135ccaf-50d3-4d5d-8305-713706eb8aa8","paragraphs":["The second Local approval activity lets you send a delivery feedback notification to each local supervisor.","The following fields need to be entered.","In the Action to execute section, choose Delivery feedback report.\nIn the Delivery section, choose Specified in the transition. \nIn the Notification section, select the delivery template and the subject to be used for the notification email.","Once the deadline configured in the wait activity is reached, the second Local approval type activity sends the following notification email to each local supervisor:"]},{"section":"Approval tracking by the administrator","sectionId":"85a77fb5-edfe-48ff-824d-3dcf51d8ad7b","paragraphs":["Each time the local approval activity starts, an approval task is created. The administrator can control each of these approval tasks.","Go to the targeting workflow of your campaign and click the Local approval tasks tab.","The list of local approval tasks can also be accessed via the Approval tasks tab of the data distribution template.","Select the task you want to monitor and click the Detail button. The General tab of the local approval task lets you view information on the task. If necessary, you can alter the approval and the reminder dates.","This tab shows the following information:","the label of the task and its ID\nthe distribution template used\nthe number of targeted messages\nthe linked workflow and campaign\nthe task schedule","The Distribution tab for the task lets you view the approval logs, their status, the number of messages targeted, the approval date, as well as the operator who approved the delivery.","Select an approval log and click the Detail button to display more information. The General tab of the local approval log lets you view general log information. You can also change the approval status.","This tab shows the following information:","the linked approval task\nthe approval status (Approved or Pending)\nthe distribution template used\nthe local supervisor who approved and the approval date\nthe number of messages targeted and approved","The Targeted tab of the approval log displays the list of targeted recipients and their approval status. You can change this status if necessary."]}]}