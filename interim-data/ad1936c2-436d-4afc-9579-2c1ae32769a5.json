{"guid":"ad1936c2-436d-4afc-9579-2c1ae32769a5","title":"Elements and attributes - dbindex element","path":"help\\configuration\\using\\schema\\db-index.md","fullText":"---\nproduct: campaign\ntitle: Elements and attributes - dbindex element\ndescription: dbindex element\nfeature: Schema Extension\nexl-id: d7d1e427-12e0-4f07-9e01-d184dbe2ebf1\n---\n# dbindex element {#dbindex--element}\n\n![](../../../assets/v7-only.svg)\n\n## Content model {#content-model-3}\n\ndbindex:==keyfield\n\n## Attributes {#attributes-3}\n\n* @_operation (string)\n* @applicableIf (string)\n* @label (string)\n* @name (MNTOKEN)\n* @unique (boolean)\n\n## Parents {#parents-3}\n\n`<element>`\n\n## Children {#children-3}\n\n`<keyfield>`\n\n## Description {#description-3}\n\nThis element lets you define an index linked to a table.\n\n## Use and context of use {#use-and-context-of-use-3}\n\nIt's possible to define several indexes. One index can reference one or more fields of the table. Index declaration usually follows the definition of the main schema element.\n\nThe order of the `<keyfield>` elements defined in a `<dbindex>` is very important. The first `<keyfield>` must be the indexation criterion which the queries are mainly based on.\n\nThe name of the index in the database is calculated by concatenating the name of the table and the name of the index. For example: Table name \"Sample\", Namespace \"Cus\", index name \"MyIndex\"-> name of the index field during index creation querying: \"CusSample_myIndex\".\n\n## Attribute description {#attribute-description-3}\n\n* **_operation (string)**: defines the type of writing in the database.\n\n  This attribute is mainly used when extending out-of-the-box schemas.\n\n  Accessible values are:\n\n  * \"none\": reconciliation alone. This means that Adobe Campaign will recover the element without updating it or generating an error if it doesn't exist.\n  * \"insertOrUpdate\": update with insertion. This means that Adobe Campaign will update the element or create it if it doesn't exist.\n  * \"insert\": insertion. This means that Adobe Campaign will insert the element without checking whether it exists.\n  * \"update\": update. This means that Adobe Campaign will update the element or generate an error if it doesn't exist.\n  * \"delete\": deletion. This means that Adobe Campaign will recover and delete elements.\n\n* **applicableIf (string)**: condition for taking the index into account - receives an XTK expression.\n* **label (string)**: index label.\n* **name (MNTOKEN)**: unique index name.\n* **unique (boolean)**: if this option is activated (@unique=\"true\"), the attribute guarantees the uniqueness of the index throughout its fields.\n\n## Examples {#examples-3}\n\nCreation of an index on the \"id\" field. (the \"@unique\" attribute on the `<dbindex>` element triggers adding of the \"UNIQUE\" SQL key word when the index is created in the database (query)).\n\n```\n<element label=\"Sample\" name=\"Sample\">\n  <dbindex name=\"myIndex\" label=\"My index on the ID field\" unique=\"true\" applicableIf=\"HasPackage('nms:social')\">\n      <keyfield xpath=\"@id\"/>\n  </dbindex>\n    <attribute name=\"id\" type=\"long\"/>\n</element>          \n```\n\n```\nALTER TABLE CusSample ADD iSampleId INTEGER;\nUPDATE CusSample SET iSampleId = 0;\nALTER TABLE CusSample ALTER COLUMN iSampleId SET Default 0;\nALTER TABLE CusSample ALTER COLUMN iSampleId SET NOT NULL; \nCREATE UNIQUE INDEX CusSample_myIndex ON CusSample(iSampleId);\n```\n\nCreation of a composite index on the \"@mail\" and \"@phoneNumber\" fields:\n\n```    \n<element label=\"NewSchemaUser\" name=\"NewSchemaUser\">\n  <dbindex name=\"myIndex\" label=\"My composite index\">\n         <keyfield xpath=\"@email\"/>\n         <keyfield xpath=\"@phone\"/>\n  </dbindex>\n  \n  <attribute name=\"email\" type=\"string\"/>\n  <attribute name=\"phone\" type=\"string\"/>\n</element>      \n```\n\n```\nCREATE INDEX DocNewSchemaUser_myIndex ON DocNewSchemaUser(sEmail, sPhone);\n```\n","headers":[["title","Elements and attributes - dbindex element"],["description","dbindex element"],["feature","Schema Extension"]],"sections":[{"section":"dbindex element","sectionId":"a3b4cb52-67ab-4e39-8d44-279b14d77e2f","paragraphs":[]},{"section":"Content model","sectionId":"b07944d0-a6df-4f58-97a4-c0e409408fac","paragraphs":["dbindex:==keyfield"]},{"section":"Attributes","sectionId":"e62d1003-10c7-43cf-85e0-dcccb5314760","paragraphs":["@_operation (string)\n@applicableIf (string)\n@label (string)\n@name (MNTOKEN)\n@unique (boolean)"]},{"section":"Parents","sectionId":"8feab2ec-e194-4336-9844-15d6f23afebc","paragraphs":["<element>"]},{"section":"Children","sectionId":"5533b794-b2a0-4390-88fa-48ec4a4c6d2d","paragraphs":["<keyfield>"]},{"section":"Description","sectionId":"b66c8ac4-a290-46d8-9597-45f9692d5868","paragraphs":["This element lets you define an index linked to a table."]},{"section":"Use and context of use","sectionId":"0de6c1c5-00fe-4d7e-b160-cd088eee355a","paragraphs":["It's possible to define several indexes. One index can reference one or more fields of the table. Index declaration usually follows the definition of the main schema element.","The order of the <keyfield> elements defined in a <dbindex> is very important. The first <keyfield> must be the indexation criterion which the queries are mainly based on.","The name of the index in the database is calculated by concatenating the name of the table and the name of the index. For example: Table name \"Sample\", Namespace \"Cus\", index name \"MyIndex\"-> name of the index field during index creation querying: \"CusSample_myIndex\"."]},{"section":"Attribute description","sectionId":"97903a3e-4dcb-4582-bb3d-077d8dbfbfb0","paragraphs":["_operation (string): defines the type of writing in the database.","This attribute is mainly used when extending out-of-the-box schemas.","Accessible values are:","\"none\": reconciliation alone. This means that Adobe Campaign will recover the element without updating it or generating an error if it doesn't exist.\n\"insertOrUpdate\": update with insertion. This means that Adobe Campaign will update the element or create it if it doesn't exist.\n\"insert\": insertion. This means that Adobe Campaign will insert the element without checking whether it exists.\n\"update\": update. This means that Adobe Campaign will update the element or generate an error if it doesn't exist.\n\"delete\": deletion. This means that Adobe Campaign will recover and delete elements.","applicableIf (string): condition for taking the index into account - receives an XTK expression.","label (string): index label.","name (MNTOKEN): unique index name.","unique (boolean): if this option is activated (@unique=\"true\"), the attribute guarantees the uniqueness of the index throughout its fields."]},{"section":"Examples","sectionId":"e3bbde31-821c-405e-b960-9be59a303ddf","paragraphs":["Creation of an index on the \"id\" field. (the \"@unique\" attribute on the <dbindex> element triggers adding of the \"UNIQUE\" SQL key word when the index is created in the database (query)).","<element label=\"Sample\" name=\"Sample\">\n  <dbindex name=\"myIndex\" label=\"My index on the ID field\" unique=\"true\" applicableIf=\"HasPackage('nms:social')\">\n      <keyfield xpath=\"@id\"/>\n  </dbindex>\n    <attribute name=\"id\" type=\"long\"/>\n</element>","ALTER TABLE CusSample ADD iSampleId INTEGER;\nUPDATE CusSample SET iSampleId = 0;\nALTER TABLE CusSample ALTER COLUMN iSampleId SET Default 0;\nALTER TABLE CusSample ALTER COLUMN iSampleId SET NOT NULL; \nCREATE UNIQUE INDEX CusSample_myIndex ON CusSample(iSampleId);","Creation of a composite index on the \"@mail\" and \"@phoneNumber\" fields:","<element label=\"NewSchemaUser\" name=\"NewSchemaUser\">\n  <dbindex name=\"myIndex\" label=\"My composite index\">\n         <keyfield xpath=\"@email\"/>\n         <keyfield xpath=\"@phone\"/>\n  </dbindex>\n  \n  <attribute name=\"email\" type=\"string\"/>\n  <attribute name=\"phone\" type=\"string\"/>\n</element>","CREATE INDEX DocNewSchemaUser_myIndex ON DocNewSchemaUser(sEmail, sPhone);"]}]}