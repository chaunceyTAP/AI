{"guid":"b1da8739-653b-4716-a4d0-82e606d8262a","title":"Restrict PI view","path":"help\\configuration\\using\\restricting-pii-view.md","fullText":"---\nproduct: campaign\ntitle: Restrict PI view\ndescription: Learn how to restrict PI view\nfeature: PI\nrole: Data Engineer, Developer\nexl-id: 0f32d62d-a10a-4feb-99fe-4679b98957d4\n---\n# Restrict PI view{#restricting-pii-view}\n\n## Overview {#overview}\n\nSome customers need marketing users to be able to access data records but do not want them to see Personally Identifiable Information (PII), such as first name, last name or email address. Adobe Campaign proposes a way to protect privacy and prevent data from being misused by regular campaign operators.\n\n## Implementation {#implementation}\n\nA new attribute that can be applied to any element or attribute has been added to the schemas, it complements the existing attribute **[!UICONTROL visibleIf]** . This attribute is: **[!UICONTROL accessibleIf]** . When containing an XTK expression related to the current user context, it can leverage **[!UICONTROL HasNamedRight]** or **[!UICONTROL $(login)]** , for instance.\n\nYou can find a sample of a recipient schema extension that shows this usage below:\n\n```\n<srcSchema desc=\"Recipient table (profiles\" entitySchema=\"xtk:srcSchema\" extendedSchema=\"nms:recipient\"\n           img=\"nms:recipient.png\" label=\"Recipients\" labelSingular=\"Recipient\"\n           name=\"recipient\" namespace=\"sec\" xtkschema=\"xtk:srcSchema\">\n  <element desc=\"Recipient table (profiles\" img=\"nms:recipient.png\" label=\"Recipients\"\n           labelSingular=\"Recipient\" name=\"recipient\">\n    <attribute name=\"firstName\" accessibleIf=\"$(login)=='admin'\"/>\n    <attribute name=\"lastName\" visibleIf=\"$(login)=='admin'\"/>\n    <attribute name=\"email\" accessibleIf=\"$(login)=='admin'\"/>\n  </element>\n</srcSchema>\n```\n\nThe main properties are:\n\n* **[!UICONTROL visibleIf]** : hides the fields from the metadata, hence they cannot be accessed within a schema view, or column selection, or an expression builder. But this does not hide any data, if the field name is manually entered in an expression the value will show up.\n* **[!UICONTROL accessibleIf]** : hides the data (replacing it with empty values) from resulting query. If visibleIf is empty, then it gets the same expression as **[!UICONTROL accessibleIf]** .\n\nHere are the consequences of using this attribute in Campaign:\n\n* Data will not be shown using generic query editor in the console,\n* Data will not be visible in overview lists and record list (console).\n* Data will become read-only in detailed view.\n* Data will only be usable within filters (meaning that using some dichotomy strategies, you can still guess values).\n* Any expression that is built using a restricted field becomes restricted too: lower(@email) becomes as accessible as @email.\n* In a workflow, you can add the restricted column to the targeted population as an extra column of the transition, but it is still inaccessible to Adobe Campaign users.\n* When storing the targeted population in a group (list), the characteristics of the stored fields are the same as the source of data.\n* Data is not accessible to JS code by default.\n\n## Recommendations {#recommendations}\n\nIn each delivery, email addresses are copied into the **[!UICONTROL broadLog]** and the **[!UICONTROL forecastLog]** tables: as a consequence, those fields needs to be protected too.\n\nBelow is a sample of log table extension to implement this:\n\n```\n<srcSchema entitySchema=\"xtk:srcSchema\" extendedSchema=\"nms:broadLogRcp\" img=\"nms:broadLog.png\"\n           label=\"Recipient delivery logs\" labelSingular=\"Recipient delivery log\"\n           name=\"broadLogRcp\" namespace=\"sec\" xtkschema=\"xtk:srcSchema\">\n  <element img=\"nms:broadLog.png\" label=\"Recipient delivery logs\" labelSingular=\"Recipient delivery log\"\n           name=\"broadLogRcp\">\n    <attribute accessibleIf=\"$(login)=='admin'\" name=\"address\"/>\n  </element>\n</srcSchema>\n<srcSchema desc=\"Delivery messages being prepared.\" entitySchema=\"xtk:srcSchema\"\n           extendedSchema=\"nms:tmpBroadcast\" img=\"\" label=\"Messages being prepared\"\n           labelSingular=\"Message\" name=\"tmpBroadcast\" namespace=\"sec\" xtkschema=\"xtk:srcSchema\">\n  <element desc=\"Delivery messages being prepared.\" label=\"Messages being prepared\"\n           labelSingular=\"Message\" name=\"tmpBroadcast\">\n    <attribute accessibleIf=\"$(login)=='admin'\" name=\"address\"/>\n  </element>\n</srcSchema>\n<srcSchema entitySchema=\"xtk:srcSchema\" extendedSchema=\"nms:excludeLogRcp\" img=\"nms:excludeLog.png\"\n           label=\"Recipient exclusion logs\" labelSingular=\"Recipient exclusion log\"\n           name=\"excludeLogRcp\" namespace=\"sec\" xtkschema=\"xtk:srcSchema\">\n  <element img=\"nms:excludeLog.png\" label=\"Recipient exclusion logs\" labelSingular=\"Recipient exclusion log\"\n           name=\"excludeLogRcp\">\n    <attribute accessibleIf=\"$(login)=='admin'\" name=\"address\"/>\n  </element>\n</srcSchema>\n```\n\n>[!NOTE]\n>\n>This restriction applies to non technical users: a technical user, with related permissions, will be able to retrieve data. This method is therefore not 100% secure.\n","headers":[["title","Restrict PI view"],["description","Learn how to restrict PI view"],["feature","PI"]],"sections":[{"section":"Restrict PI view","sectionId":"a5330466-d6a4-4244-b695-5a3ffed38a78","paragraphs":[]},{"section":"Overview","sectionId":"a05b8364-ae54-4f51-80a4-f3bbcd96b0f4","paragraphs":["Some customers need marketing users to be able to access data records but do not want them to see Personally Identifiable Information (PII), such as first name, last name or email address. Adobe Campaign proposes a way to protect privacy and prevent data from being misused by regular campaign operators."]},{"section":"Implementation","sectionId":"19366154-4e17-4d23-85aa-fefc72c774c0","paragraphs":["A new attribute that can be applied to any element or attribute has been added to the schemas, it complements the existing attribute visibleIf . This attribute is: accessibleIf . When containing an XTK expression related to the current user context, it can leverage HasNamedRight or $(login) , for instance.","You can find a sample of a recipient schema extension that shows this usage below:","<srcSchema desc=\"Recipient table (profiles\" entitySchema=\"xtk:srcSchema\" extendedSchema=\"nms:recipient\"\n           img=\"nms:recipient.png\" label=\"Recipients\" labelSingular=\"Recipient\"\n           name=\"recipient\" namespace=\"sec\" xtkschema=\"xtk:srcSchema\">\n  <element desc=\"Recipient table (profiles\" img=\"nms:recipient.png\" label=\"Recipients\"\n           labelSingular=\"Recipient\" name=\"recipient\">\n    <attribute name=\"firstName\" accessibleIf=\"$(login)=='admin'\"/>\n    <attribute name=\"lastName\" visibleIf=\"$(login)=='admin'\"/>\n    <attribute name=\"email\" accessibleIf=\"$(login)=='admin'\"/>\n  </element>\n</srcSchema>","The main properties are:","visibleIf : hides the fields from the metadata, hence they cannot be accessed within a schema view, or column selection, or an expression builder. But this does not hide any data, if the field name is manually entered in an expression the value will show up.\naccessibleIf : hides the data (replacing it with empty values) from resulting query. If visibleIf is empty, then it gets the same expression as accessibleIf .","Here are the consequences of using this attribute in Campaign:","Data will not be shown using generic query editor in the console,\nData will not be visible in overview lists and record list (console).\nData will become read-only in detailed view.\nData will only be usable within filters (meaning that using some dichotomy strategies, you can still guess values).\nAny expression that is built using a restricted field becomes restricted too: lower(@email) becomes as accessible as @email.\nIn a workflow, you can add the restricted column to the targeted population as an extra column of the transition, but it is still inaccessible to Adobe Campaign users.\nWhen storing the targeted population in a group (list), the characteristics of the stored fields are the same as the source of data.\nData is not accessible to JS code by default."]},{"section":"Recommendations","sectionId":"d76b40cc-c1c3-4a3f-b5c3-8d8aef7ff6e3","paragraphs":["In each delivery, email addresses are copied into the broadLog and the forecastLog tables: as a consequence, those fields needs to be protected too.","Below is a sample of log table extension to implement this:","<srcSchema entitySchema=\"xtk:srcSchema\" extendedSchema=\"nms:broadLogRcp\" img=\"nms:broadLog.png\"\n           label=\"Recipient delivery logs\" labelSingular=\"Recipient delivery log\"\n           name=\"broadLogRcp\" namespace=\"sec\" xtkschema=\"xtk:srcSchema\">\n  <element img=\"nms:broadLog.png\" label=\"Recipient delivery logs\" labelSingular=\"Recipient delivery log\"\n           name=\"broadLogRcp\">\n    <attribute accessibleIf=\"$(login)=='admin'\" name=\"address\"/>\n  </element>\n</srcSchema>\n<srcSchema desc=\"Delivery messages being prepared.\" entitySchema=\"xtk:srcSchema\"\n           extendedSchema=\"nms:tmpBroadcast\" img=\"\" label=\"Messages being prepared\"\n           labelSingular=\"Message\" name=\"tmpBroadcast\" namespace=\"sec\" xtkschema=\"xtk:srcSchema\">\n  <element desc=\"Delivery messages being prepared.\" label=\"Messages being prepared\"\n           labelSingular=\"Message\" name=\"tmpBroadcast\">\n    <attribute accessibleIf=\"$(login)=='admin'\" name=\"address\"/>\n  </element>\n</srcSchema>\n<srcSchema entitySchema=\"xtk:srcSchema\" extendedSchema=\"nms:excludeLogRcp\" img=\"nms:excludeLog.png\"\n           label=\"Recipient exclusion logs\" labelSingular=\"Recipient exclusion log\"\n           name=\"excludeLogRcp\" namespace=\"sec\" xtkschema=\"xtk:srcSchema\">\n  <element img=\"nms:excludeLog.png\" label=\"Recipient exclusion logs\" labelSingular=\"Recipient exclusion log\"\n           name=\"excludeLogRcp\">\n    <attribute accessibleIf=\"$(login)=='admin'\" name=\"address\"/>\n  </element>\n</srcSchema>","NOTE","This restriction applies to non technical users: a technical user, with related permissions, will be able to retrieve data. This method is therefore not 100% secure."]}]}