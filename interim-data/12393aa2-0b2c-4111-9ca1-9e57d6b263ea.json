{"guid":"12393aa2-0b2c-4111-9ca1-9e57d6b263ea","title":"Server security configuration","path":"help\\installation\\using\\server-configuration.md","fullText":"---\nproduct: campaign\ntitle: Server security configuration\ndescription: Learn more about server configuration best practices\nfeature: Installation, Instance Settings\naudience: installation\ncontent-type: reference\ntopic-tags: prerequisites-and-recommendations-\nexl-id: e1aff73a-54fb-444e-b183-df11c9b3df31\n---\n# Server security settings {#server-configuration}\n\n## File upload protection\n\nCheck with operational users what kind of files they upload to the server using Campaign Client Console or web interface. As a reminder, business needs can be:\n\n* images (jpg, gif, png, ...)\n* content (zip, html, css, ...)\n* marketing assets (doc, xls, pdf, psd, tiff, ...)\n* email attachment (doc, pdf, ...)\n* ETL (txt, csv, tab, ...)\n* etc.\n\nAdd all of them in serverConf/shared/datastore/@uploadAllowlist (valid java regular expression). Learn more in [this page](../../installation/using/file-res-management.md).\n\nAdobe Campaign does not restrict the file size. But you can do it by configuring IIS/Apache. Learn more in [this section](../../installation/using/web-server-configuration.md).\n\n## Relay\n\nPlease refer to [this page](../../installation/using/configuring-campaign-server.md#dynamic-page-security-and-relays) for more information.\n\nBy default, all dynamic pages are automatically relayed to the local Tomcat server of the machine whose Web module is started. You can choose to not relay some of them. If you are not using some Adobe Campaign modules (such as webapp, interaction, some jsp) you can remove them from relay rules.\n\nOut of the box, we have forced the capability to display end user resources using http (httpAllowed=\"true\"). As these pages can display some PII (such as email content, address), redeem coupon, offer, you should force HTTPS again on these paths.\n\nIf you are using different host names (one public and one for operators), you can also prevent the relaying of some resources needed by operators over the public DNS name.\n\n## Outgoing connection protection\n\nThe default list of URLs that can be called by JavaScript codes (workflows, etc.) is limited. To allow a new URL, the administrator needs to reference it in the [serverConf.xml file](../../installation/using/the-server-configuration-file.md).\n\nThree connection protection modes exist:\n\n* **Blocking** : all URLs that do not belong to the allowlist are blocked, with an error message. This is the default mode after a postupgrade.\n* **Permissive** : all URLs that do not belong to the allowlist are allowed.\n* **Warning** : all URLs not on the allowlist are allowed, but the JS interpreter emits a warning, so that the administrator can collect them. This mode adds JST-310027 warning messages.\n\n```\n<urlPermission action=\"warn\" debugTrace=\"true\">\n  <url dnsSuffix=\"abc.company1.com\" urlRegEx=\".*\" />\n  <url dnsSuffix=\"def.partnerA_company1.com\" urlRegEx=\".*\" />\n  <url dnsSuffix=\"xyz.partnerB_company1.com\" urlRegEx=\".*\" />\n</urlPermission>\n```\n\nNew clients will use the blocking mode. If they want to allow a new URL, they need to contact their administrator to add it to the allowlist.\n\nExisting customers coming from a migration can use the warning mode for a while. Meanwhile they need to analyze the outbound traffic before authorizing the URLS.\n\n## Command restriction (server-side)\n\nSeveral commands are included in the denylist and cannot be executed using the execCommand function. An extra-security is provided by a dedicated Unix user to execute external commands. For hosted installations, this restriction is automatically applied. For on-premise installations, you can manually set up this restriction by following the instructions from [this page](../../installation/using/configuring-campaign-server.md#restricting-authorized-external-commands). In addition, **[!UICONTROL Script]** and **[!UICONTROL External task]** workflow activities are not available (newly installed instances).\n\n## Other configurations\n\nYou can add extra HTTP headers for all pages (for more information, refer to [this page](../../installation/using/configuring-campaign-server.md#restricting-authorized-external-commands)):\n\n* You can add some additional headers such as HSTS, X-FRAME-OPTIONS, CSP...\n* You have to test them in a test environment before applying them in production. \n    \n    >[!IMPORTANT]\n    >\n    >Adobe Campaign can be broken by adding certain headers.\n\nAdobe Campaign lets you set a plain password in the `<dbcnx .../>` element. Do not use this feature.\n\nBy default, Adobe Campaign does not stick a session to a specific IP, but you can active it to prevent the session from being stolen. To do it, in the [serverConf.xml file](../../installation/using/the-server-configuration-file.md), set the checkIPConsistent attribute to **true** in the `<authentication>` node.\n\nBy default, Adobe Campaign's MTA does not use a secured connection to send content to the SMTP server. You have to enable this feature (may reduce delivery speed). To do this, set **enableTLS** to **true** in the `<smtp ...>` node.\n\nYou can reduce the lifetime of a session in the authentication node (sessionTimeOutSec attribute).\n","headers":[["title","Server security configuration"],["description","Learn more about server configuration best practices"],["feature","Installation, Instance Settings"],["topic-tags","prerequisites-and-recommendations-"]],"sections":[{"section":"Server security settings","sectionId":"80de88dc-360f-4896-8cc0-272220066416","paragraphs":[]},{"section":"File upload protection","sectionId":"de1fbdb4-076a-4159-825b-fbadfed55b76","paragraphs":["Check with operational users what kind of files they upload to the server using Campaign Client Console or web interface. As a reminder, business needs can be:","images (jpg, gif, png, ...)\ncontent (zip, html, css, ...)\nmarketing assets (doc, xls, pdf, psd, tiff, ...)\nemail attachment (doc, pdf, ...)\nETL (txt, csv, tab, ...)\netc.","Add all of them in serverConf/shared/datastore/@uploadAllowlist (valid java regular expression). Learn more in this page.","Adobe Campaign does not restrict the file size. But you can do it by configuring IIS/Apache. Learn more in this section."]},{"section":"Relay","sectionId":"9ddc692d-3e31-4914-8cf9-b97d112aa61f","paragraphs":["Please refer to this page for more information.","By default, all dynamic pages are automatically relayed to the local Tomcat server of the machine whose Web module is started. You can choose to not relay some of them. If you are not using some Adobe Campaign modules (such as webapp, interaction, some jsp) you can remove them from relay rules.","Out of the box, we have forced the capability to display end user resources using http (httpAllowed=\"true\"). As these pages can display some PII (such as email content, address), redeem coupon, offer, you should force HTTPS again on these paths.","If you are using different host names (one public and one for operators), you can also prevent the relaying of some resources needed by operators over the public DNS name."]},{"section":"Outgoing connection protection","sectionId":"4d0d813d-60ad-4e03-b14a-0d8f8c89492a","paragraphs":["The default list of URLs that can be called by JavaScript codes (workflows, etc.) is limited. To allow a new URL, the administrator needs to reference it in the serverConf.xml file.","Three connection protection modes exist:","Blocking : all URLs that do not belong to the allowlist are blocked, with an error message. This is the default mode after a postupgrade.\nPermissive : all URLs that do not belong to the allowlist are allowed.\nWarning : all URLs not on the allowlist are allowed, but the JS interpreter emits a warning, so that the administrator can collect them. This mode adds JST-310027 warning messages.","<urlPermission action=\"warn\" debugTrace=\"true\">\n  <url dnsSuffix=\"abc.company1.com\" urlRegEx=\".*\" />\n  <url dnsSuffix=\"def.partnerA_company1.com\" urlRegEx=\".*\" />\n  <url dnsSuffix=\"xyz.partnerB_company1.com\" urlRegEx=\".*\" />\n</urlPermission>","New clients will use the blocking mode. If they want to allow a new URL, they need to contact their administrator to add it to the allowlist.","Existing customers coming from a migration can use the warning mode for a while. Meanwhile they need to analyze the outbound traffic before authorizing the URLS."]},{"section":"Command restriction (server-side)","sectionId":"453feba5-9525-47e6-bfa8-7d77bce88963","paragraphs":["Several commands are included in the denylist and cannot be executed using the execCommand function. An extra-security is provided by a dedicated Unix user to execute external commands. For hosted installations, this restriction is automatically applied. For on-premise installations, you can manually set up this restriction by following the instructions from this page. In addition, Script and External task workflow activities are not available (newly installed instances)."]},{"section":"Other configurations","sectionId":"29a82ac6-01bc-4bad-9e7e-8fab8afd0d37","paragraphs":["You can add extra HTTP headers for all pages (for more information, refer to this page):","You can add some additional headers such as HSTS, X-FRAME-OPTIONS, CSP...","You have to test them in a test environment before applying them in production.","IMPORTANT","Adobe Campaign can be broken by adding certain headers.","Adobe Campaign lets you set a plain password in the <dbcnx .../> element. Do not use this feature.","By default, Adobe Campaign does not stick a session to a specific IP, but you can active it to prevent the session from being stolen. To do it, in the serverConf.xml file, set the checkIPConsistent attribute to true in the <authentication> node.","By default, Adobe Campaign's MTA does not use a secured connection to send content to the SMTP server. You have to enable this feature (may reduce delivery speed). To do this, set enableTLS to true in the <smtp ...> node.","You can reduce the lifetime of a session in the authentication node (sessionTimeOutSec attribute)."]}]}