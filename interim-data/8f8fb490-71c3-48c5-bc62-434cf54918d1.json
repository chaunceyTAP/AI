{"guid":"8f8fb490-71c3-48c5-bc62-434cf54918d1","title":"About schema edition","path":"help\\configuration\\using\\about-schema-edition.md","fullText":"---\nproduct: campaign\ntitle: About schema edition\ndescription: Get started with schema edition\nfeature: Schema Extension\nrole: Data Engineer, Developer\nexl-id: 9e10b24e-c4de-4e76-bbed-0d05f62120b7\n---\n# About schema edition{#about-schema-edition}\n\nAdobe Campaign employs Data Schemas to:\n\n* Define how data objects within the application are tied to underlying database tables.\n* Define links between the different data objects within the Campaign application.\n* Define and describe the individual fields included in each object.\n\nFor a better understanding of Campaign built-in tables and their interaction, refer to [this section](https://helpx.adobe.com/campaign/kb/acc-datamodel.html).\n\n## Extending or creating schemas {#extending-or-creating-schemas}\n\nTo add a field or index or other element to one of the core data schemas in Campaign, such as the recipient table (nms:recipient), you have to extend that schema. For more on this, refer to the [Extending a schema](../../configuration/using/extending-a-schema.md) section.\n\nTo add an entirely new type of data that does not exist out-of-the-box in Adobe Campaign (a table of contracts for example) you can create a custom schema directly. For more on this, refer to the [Data schemas](../../configuration/using/data-schemas.md) section.\n\n![](assets/schemaextension_getting_started_1.png)\n\nOnce you have extended or created a schema to work in, the best practice is to define its XML content elements in the same order they appear in below.\n\n## Enumerations {#enumerations}\n\nEnumerations are defined first, before the main element of the schema. They allow you to display values in a list in order to restrict the choices that the user has for a given field.\n\nExample:\n\n```\n<enumeration basetype=\"byte\" name=\"exTransactionTypeEnum\" default=\"store\">\n<value label=\"Website\" name=\"web\" value=\"0\"/>\n<value label=\"Call Center\" name=\"phone\" value=\"1\"/>\n<value label=\"In Store\" name=\"store\" value=\"2\"/>\n</enumeration>\n```\n\nWhen defining fields, you can then use this enumeration like so:\n\n```\n<attribute desc=\"Type of Transaction\" label=\"Transaction Type\" name=\"transactionType\" \ntype=\"string\" enum=\"exTransactionTypeEnum\"/>\n```\n\n>[!NOTE]\n>\n>You can also employ user-managed enumerations (usually under **[!UICONTROL Administration]** > **[!UICONTROL Platform]** ) to specify the values for a given field. These are effectively global enumerations, and a better choice if your enumeration may be used outside of the specific schema you are working in.\n\nTo find out more about enumerations, refer to the [Enumerations](../../configuration/using/schema-structure.md#enumerations) and [`<enumeration>` element](../../configuration/using/schema/enumeration.md) sections.\n\n## Index {#index} \n\nIndexes are the first elements declared in the main element of the schema.\n\nThey can be unique or not, and reference one or more fields.\n\nExamples:\n\n```\n<dbindex name=\"email\" unique=\"true\">\n  <keyfield xpath=\"@email\"/>\n</dbindex>\n```\n\n```\n<dbindex name=\"lastNameAndZip\">\n  <keyfield xpath=\"@lastName\"/>\n  <keyfield xpath=\"location/@zipCode\"/>\n</dbindex>\n```\n\nThe **xpath** attribute points to the field in your schema that you wish to index.\n\n>[!IMPORTANT]\n>\n>It is important to remember that the SQL query read performance gains provided by indexes also come with a performance hit on writing records. The indexes should therefore be used with precaution.\n\nFor more on indexes, refer to the [Indexed fields](../../configuration/using/database-mapping.md#indexed-fields) section.\n\n## Keys {#keys}\n\nEvery table must have at least one key, and often it is automatically established in the main element of the schema by using the **@autopk=true** attribute set to \"true\".\n\nThe primary key can also be defined using the **internal** attribute.\n\nExample:\n\n```\n<key name=\"householdId\" internal=\"true\">\n  <keyfield xpath=\"@householdId\"/>\n</key>\n```\n\nIn this example, instead of letting the **@autopk** attribute create a default primary key named \"id\" we are specifying our own \"householdId\" primary key.\n\n>[!IMPORTANT]\n>\n>When creating a new schema or during a schema extension, you need to keep the same primary key sequence value (@pkSequence) for the whole schema.\n\nTo find out more about keys, refer to the [Management of keys](../../configuration/using/database-mapping.md#management-of-keys) section.\n\n## Attributes (Fields) {#attributes--fields-}\n\nAttributes allow you to define the fields which make up your data object. You can use the **[!UICONTROL Insert]** button in the schema edition toolbar to drop empty attribute templates into your XML where your cursor is. For more on this, refer to the [Data schemas](../../configuration/using/data-schemas.md) section.\n\n![](assets/schemaextension_getting_started_2.png)\n\nThe full list of attributes is available in the [`<attribute>` element](../../configuration/using/schema/attribute.md) section. Here are some of the more commonly used attributes:\n\n* **@advanced**\n* **@dataPolicy**\n* **@default**\n* **@desc**\n* **@enum**\n* **@expr**\n* **@label**\n* **@length**\n* **@name**\n* **@notNull**\n* **@required**\n* **@ref**\n* **@xml**\n* **@type**\n\n  To view a table listing the mappings for the data types generated by Adobe Campaign for the different database management systems, refer to the [Mapping the types of Adobe Campaign/DBMS data](../../configuration/using/schema-structure.md#mapping-the-types-of-adobe-campaign-dbms-data) section.\n\nFor more information on each attribute, refer to the [Attribute description](../../configuration/using/schema/attribute.md) section.\n\n### Examples {#examples}\n\nExample of defining a default value:\n\n```\n<attribute name=\"transactionDate\" label=\"Transaction Date\" type=\"datetime\" default=\"GetDate()\"/>\n```\n\nExample of using a common attribute as a template for a field also marked as mandatory:\n\n```\n<attribute name=\"mobile\" label=\"Mobile\" template=\"nms:common:phone\" required=\"true\" />\n```\n\nExample of a computed field that is hidden using the **@advanced** attribute:\n\n```\n<attribute name=\"domain\" label=\"Email domain\" desc=\"Domain of recipient email address\" expr=\"GetEmailDomain([@email])\" advanced=\"true\" />\n```\n\nExample of an XML field also stored in an SQL field and which has an **@dataPolicy** attribute.\n\n```\n<attribute name=\"secondaryEmail\" label=\"Secondary email address\" length=\"100\" xml=\"true\" sql=\"true\" dataPolicy=\"email\" />\n```\n\n>[!IMPORTANT]\n>\n>Although most attributes are linked according to a 1-1 cardinality to a physical field of the database, this is not the case for the XML fields or the computed fields.   \n>An XML field is stored in a memo field (\"mData\") of the table.   \n>A computed field however is created dynamically each time a query is started, it therefore only exists in the applicative layer.\n\n## Links {#links}\n\nLinks are some of the last elements in the main element of your schema. They define how all of the different schemas in your instance relate to one another.\n\nLinks are declared in the schema that contains the **foreign key** of the table to which it is linked.\n\nThere are three types of cardinality: 1-1, 1-N, and N-N. It is the 1-N type that is used by default.\n\n### Examples {#examples-1}\n\nAn example of a 1-N link between the recipient table (out-of-the-box schema) and a table of custom transactions:\n\n```\n<element label=\"Recipient\" name=\"lnkRecipient\" revLink=\"lnkTransactions\" target=\"nms:recipient\" type=\"link\"/>\n```\n\nAn example of a 1-1 link between a custom schema \"Car\" (in the \"cus\" namespace) and the recipient table:\n\n```\n<element label=\"Car\" name=\"lnkCar\" revCardinality=\"single\" revLink=\"recipient\" target=\"cus:car\" type=\"link\"/>\n```\n\nExample of an external join between the recipient table and a table of addresses based on the email address and not a primary key:\n\n```\n<element name=\"emailInfo\" label=\"Email Info\" revLink=\"recipient\" target=\"nms:address\" type=\"link\" externalJoin=\"true\">\n  <join xpath-dst=\"@address\" xpath-src=\"@email\"/>\n</element>\n```\n\nHere \"xpath-dst\" corresponds to the primary key in the target schema and \"xpath-src\" corresponds to the foreign key in the source schema.\n\n## Audit trail {#audit-trail}\n\nOne useful element you may want to include at the bottom of your schema is a tracking element (Audit trail).\n\nUse the example below to include fields relating to the creation date, the user that created the data, the date, and the author of the last modification for all data in your table:\n\n```\n<element aggregate=\"xtk:common:auditTrail\" name=\"auditTrail\"/>\n```\n\n## Updating the database structure {#updating-the-database-structure}\n\nOnce your changes are completed and saved, any changes that may impact the SQL structure need to be applied to the database. To do this, use the database update wizard.\n\n![](assets/schemaextension_getting_started_3.png)\n\nFor more on this, refer to the [Updating the database structure](../../configuration/using/updating-the-database-structure.md) section.\n\n>[!NOTE]\n>\n>When modifications do not impact the database structure, you just need to regenerate schemas. To do this, select the schema(s) to update, right click and choose **[!UICONTROL Actions > Regenerate selected schemas...]** . For more on this, refer to the [Regenerating schemas](../../configuration/using/regenerating-schemas.md) section.\n","headers":[["title","About schema edition"],["description","Get started with schema edition"],["feature","Schema Extension"]],"sections":[{"section":"About schema edition","sectionId":"749d33e6-53e1-49a7-a3b0-f04c673adbd5","paragraphs":["Adobe Campaign employs Data Schemas to:","Define how data objects within the application are tied to underlying database tables.\nDefine links between the different data objects within the Campaign application.\nDefine and describe the individual fields included in each object.","For a better understanding of Campaign built-in tables and their interaction, refer to this section."]},{"section":"Extending or creating schemas","sectionId":"bdb4c303-747a-44d9-81eb-65adc6182667","paragraphs":["To add a field or index or other element to one of the core data schemas in Campaign, such as the recipient table (nms:recipient), you have to extend that schema. For more on this, refer to the Extending a schema section.","To add an entirely new type of data that does not exist out-of-the-box in Adobe Campaign (a table of contracts for example) you can create a custom schema directly. For more on this, refer to the Data schemas section.","Once you have extended or created a schema to work in, the best practice is to define its XML content elements in the same order they appear in below."]},{"section":"Enumerations","sectionId":"d1a9e8db-8d51-4ea4-b2a2-4fe1c3f59156","paragraphs":["Enumerations are defined first, before the main element of the schema. They allow you to display values in a list in order to restrict the choices that the user has for a given field.","Example:","<enumeration basetype=\"byte\" name=\"exTransactionTypeEnum\" default=\"store\">\n<value label=\"Website\" name=\"web\" value=\"0\"/>\n<value label=\"Call Center\" name=\"phone\" value=\"1\"/>\n<value label=\"In Store\" name=\"store\" value=\"2\"/>\n</enumeration>","When defining fields, you can then use this enumeration like so:","<attribute desc=\"Type of Transaction\" label=\"Transaction Type\" name=\"transactionType\" \ntype=\"string\" enum=\"exTransactionTypeEnum\"/>","NOTE","You can also employ user-managed enumerations (usually under Administration > Platform ) to specify the values for a given field. These are effectively global enumerations, and a better choice if your enumeration may be used outside of the specific schema you are working in.","To find out more about enumerations, refer to the Enumerations and <enumeration> element sections."]},{"section":"Index","sectionId":"8c16ec6c-b20a-4dfa-b640-28851308ada7","paragraphs":["Indexes are the first elements declared in the main element of the schema.","They can be unique or not, and reference one or more fields.","Examples:","<dbindex name=\"email\" unique=\"true\">\n  <keyfield xpath=\"@email\"/>\n</dbindex>","<dbindex name=\"lastNameAndZip\">\n  <keyfield xpath=\"@lastName\"/>\n  <keyfield xpath=\"location/@zipCode\"/>\n</dbindex>","The xpath attribute points to the field in your schema that you wish to index.","IMPORTANT","It is important to remember that the SQL query read performance gains provided by indexes also come with a performance hit on writing records. The indexes should therefore be used with precaution.","For more on indexes, refer to the Indexed fields section."]},{"section":"Keys","sectionId":"9ac3feef-2844-4702-9063-0038c3c59d77","paragraphs":["Every table must have at least one key, and often it is automatically established in the main element of the schema by using the @autopk=true attribute set to \"true\".","The primary key can also be defined using the internal attribute.","Example:","<key name=\"householdId\" internal=\"true\">\n  <keyfield xpath=\"@householdId\"/>\n</key>","In this example, instead of letting the @autopk attribute create a default primary key named \"id\" we are specifying our own \"householdId\" primary key.","IMPORTANT","When creating a new schema or during a schema extension, you need to keep the same primary key sequence value (@pkSequence) for the whole schema.","To find out more about keys, refer to the Management of keys section."]},{"section":"Attributes (Fields)","sectionId":"43f743be-2cdc-4cf5-9752-b189059ac24a","paragraphs":["Attributes allow you to define the fields which make up your data object. You can use the Insert button in the schema edition toolbar to drop empty attribute templates into your XML where your cursor is. For more on this, refer to the Data schemas section.","The full list of attributes is available in the <attribute> element section. Here are some of the more commonly used attributes:","@advanced","@dataPolicy","@default","@desc","@enum","@expr","@label","@length","@name","@notNull","@required","@ref","@xml","@type","To view a table listing the mappings for the data types generated by Adobe Campaign for the different database management systems, refer to the Mapping the types of Adobe Campaign/DBMS data section.","For more information on each attribute, refer to the Attribute description section."]},{"section":"Examples","sectionId":"cb8d7406-61d4-46b4-b427-98a6e309f80d","paragraphs":["Example of defining a default value:","<attribute name=\"transactionDate\" label=\"Transaction Date\" type=\"datetime\" default=\"GetDate()\"/>","Example of using a common attribute as a template for a field also marked as mandatory:","<attribute name=\"mobile\" label=\"Mobile\" template=\"nms:common:phone\" required=\"true\" />","Example of a computed field that is hidden using the @advanced attribute:","<attribute name=\"domain\" label=\"Email domain\" desc=\"Domain of recipient email address\" expr=\"GetEmailDomain([@email])\" advanced=\"true\" />","Example of an XML field also stored in an SQL field and which has an @dataPolicy attribute.","<attribute name=\"secondaryEmail\" label=\"Secondary email address\" length=\"100\" xml=\"true\" sql=\"true\" dataPolicy=\"email\" />","IMPORTANT","Although most attributes are linked according to a 1-1 cardinality to a physical field of the database, this is not the case for the XML fields or the computed fields.\nAn XML field is stored in a memo field (\"mData\") of the table.\nA computed field however is created dynamically each time a query is started, it therefore only exists in the applicative layer."]},{"section":"Links","sectionId":"23975cc1-b5a8-460c-95de-c6dca0c3e435","paragraphs":[]},{"section":"Examples","sectionId":"c7dcc176-73ff-47f5-aa7c-c98576dfe1a4","paragraphs":["Example of defining a default value:","<attribute name=\"transactionDate\" label=\"Transaction Date\" type=\"datetime\" default=\"GetDate()\"/>","Example of using a common attribute as a template for a field also marked as mandatory:","<attribute name=\"mobile\" label=\"Mobile\" template=\"nms:common:phone\" required=\"true\" />","Example of a computed field that is hidden using the @advanced attribute:","<attribute name=\"domain\" label=\"Email domain\" desc=\"Domain of recipient email address\" expr=\"GetEmailDomain([@email])\" advanced=\"true\" />","Example of an XML field also stored in an SQL field and which has an @dataPolicy attribute.","<attribute name=\"secondaryEmail\" label=\"Secondary email address\" length=\"100\" xml=\"true\" sql=\"true\" dataPolicy=\"email\" />","IMPORTANT","Although most attributes are linked according to a 1-1 cardinality to a physical field of the database, this is not the case for the XML fields or the computed fields.\nAn XML field is stored in a memo field (\"mData\") of the table.\nA computed field however is created dynamically each time a query is started, it therefore only exists in the applicative layer.","Links","Links are some of the last elements in the main element of your schema. They define how all of the different schemas in your instance relate to one another.","Links are declared in the schema that contains the foreign key of the table to which it is linked.","There are three types of cardinality: 1-1, 1-N, and N-N. It is the 1-N type that is used by default.","Examples","An example of a 1-N link between the recipient table (out-of-the-box schema) and a table of custom transactions:","<element label=\"Recipient\" name=\"lnkRecipient\" revLink=\"lnkTransactions\" target=\"nms:recipient\" type=\"link\"/>","An example of a 1-1 link between a custom schema \"Car\" (in the \"cus\" namespace) and the recipient table:","<element label=\"Car\" name=\"lnkCar\" revCardinality=\"single\" revLink=\"recipient\" target=\"cus:car\" type=\"link\"/>","Example of an external join between the recipient table and a table of addresses based on the email address and not a primary key:","<element name=\"emailInfo\" label=\"Email Info\" revLink=\"recipient\" target=\"nms:address\" type=\"link\" externalJoin=\"true\">\n  <join xpath-dst=\"@address\" xpath-src=\"@email\"/>\n</element>","Here \"xpath-dst\" corresponds to the primary key in the target schema and \"xpath-src\" corresponds to the foreign key in the source schema."]},{"section":"Audit trail","sectionId":"951a9061-6104-41b8-b9e0-ddf741a83b46","paragraphs":["One useful element you may want to include at the bottom of your schema is a tracking element (Audit trail).","Use the example below to include fields relating to the creation date, the user that created the data, the date, and the author of the last modification for all data in your table:","<element aggregate=\"xtk:common:auditTrail\" name=\"auditTrail\"/>"]},{"section":"Updating the database structure","sectionId":"42b70d15-0a93-4e85-a497-f17a86d9e51a","paragraphs":["Once your changes are completed and saved, any changes that may impact the SQL structure need to be applied to the database. To do this, use the database update wizard.","For more on this, refer to the Updating the database structure section.","NOTE","When modifications do not impact the database structure, you just need to regenerate schemas. To do this, select the schema(s) to update, right click and choose Actions > Regenerate selected schemas... . For more on this, refer to the Regenerating schemas section."]}]}