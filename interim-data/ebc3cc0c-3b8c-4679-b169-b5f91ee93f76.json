{"guid":"ebc3cc0c-3b8c-4679-b169-b5f91ee93f76","title":"Zipping or encrypting a file","path":"help\\platform\\using\\zip-encrypt.md","fullText":"---\nproduct: campaign\ntitle: Zipping or encrypting a file\ndescription: Learn how to zip or crypt a file in Campaign before processing\nfeature: Data Management, Encryption\nbadge-v8: label=\"Also applies to v8\" type=\"Positive\" tooltip=\"Also applies to Campaign v8\"\naudience: platform\ncontent-type: reference\ntopic-tags: importing-and-exporting-data\nexl-id: 4596638c-d75a-4e07-a2d8-5befcaad3430\n---\n# Zip or encrypt a file {#zipping-or-encrypting-a-file}\n\nAdobe Campaign lets you export zipped or encrypted files. When defining an export through a **[!UICONTROL Data extraction (file)]** activity, you can define a post-processing to zip or to encrypt the file.\n\nTo be able to do so:\n\n1. Install a GPG key pair for your instance using the [Control Panel](https://experienceleague.adobe.com/docs/control-panel/using/instances-settings/gpg-keys-management.html#encrypting-data).\n\n    >[!NOTE]\n    >\n    >Control Panel is restricted to Admin users, and available for certain Campaign versions only. [Learn more](https://experienceleague.adobe.com/docs/control-panel/using/discover-control-panel/key-features.html)\n    >\n\n1. If your installation of Adobe Campaign is hosted by Adobe, contact [Adobe Customer Care](https://helpx.adobe.com/enterprise/admin-guide.html/enterprise/using/support-for-experience-cloud.ug.html) to have the necessary utilities installed on the server.\n1. If your installation of Adobe Campaign is on premise, install the utility you want to use (for example: GPG, GZIP) as well as the necessary keys (encryption key) on the application server.\n\nYou can then use commands or code in the **[!UICONTROL Script]** tab of the activity or in a **[!UICONTROL JavaScript code]** activity. An example is presented in the use case below.\n\n**Related topics:**\n\n* [Unzip or decrypt a file before processing](../../platform/using/unzip-decrypt.md)\n* [Data extraction (file) activity](../../workflow/using/extraction-file.md).\n\n## Use case: Encrypt and export data using a key installed on Control Panel {#use-case-gpg-encrypt}\n\nIn this use case, we will build a workflow in order to encrypt and export data using a key installed on Control Panel.\n\n![](assets/do-not-localize/how-to-video.png) [Discover this feature in video](#video)\n\nThe steps to perform this use case are as follows:\n\n1. Generate a GPG key pair (public/private) using a GPG utility, then install the public key onto Control Panel. Detailed steps are available in [Control Panel documentation](https://experienceleague.adobe.com/docs/control-panel/using/instances-settings/gpg-keys-management.html#encrypting-data).\n\n1. In Campaign Classic, build a workflow to export the data and encrypt it using the private key that has been installed via the Control Panel. To do this, we will build a workflow as follows:\n\n    ![](assets/gpg-workflow-encrypt.png)\n\n    * **[!UICONTROL Query]** activity: In this example, we want to execute a query to target the data from the database that we want to export.\n    * **[!UICONTROL Data extraction (file)]** activity: Extracts the data into a file.\n    * **[!UICONTROL JavaScript code]** activity: Encrypts the data to extract.\n    * **[!UICONTROL File transfer]** activity: Sends the data to an external source (in this example, an SFTP server).\n\n1. Configure the **[!UICONTROL Query]** activity to target the desired data from the database. For more on this, refer to [this section](../../workflow/using/query.md).\n\n1. Open the **[!UICONTROL Data extraction (file)]** activity then configure it according to your needs. Global concepts on how to configure the activity are available in [this section](../../workflow/using/extraction-file.md).\n\n    ![](assets/gpg-data-extraction.png)\n\n1. Open the **[!UICONTROL JavaScript code]** activity, then copy-paste the command below to encrypt the data to extract.\n\n    >[!IMPORTANT]\n    >\n    >Make sure you replace the **fingerprint** value from the command with the fingerprint of the public key installed on the Control Panel.\n\n    ```\n    var cmd='gpg ';\n    cmd += ' --trust-model always';\n    cmd += ' --batch --yes';\n    cmd += ' --recipient fingerprint';\n    cmd += ' --encrypt --output ' + vars.filename + '.gpg ' + vars.filename;\n    execCommand(cmd,true);\n    vars.filename=vars.filename + '.gpg'\n    ```\n  \n      ![](assets/gpg-script.png)\n\n1. Open the **[!UICONTROL File transfer]** activity, then specify the SFTP server to which you want to send the file. Global concepts on how to configure the activity are available in [this section](../../workflow/using/file-transfer.md).\n\n    ![](assets/gpg-file-transfer.png)\n\n1. You can now run the workflow. Once it is executed, data target by the query will be exported to the SFTP server into an encrypted .gpg file.\n\n## Tutorial video {#video}\n\nThis video shows how to use a GPG key to encrypt data is also available in\n\n>[!VIDEO](https://video.tv.adobe.com/v/36399?quality=12)\n\nAdditional Campaign Classic how-to videos are available [here](https://experienceleague.adobe.com/docs/campaign-classic-learn/tutorials/overview.html).\n","headers":[["title","Zipping or encrypting a file"],["description","Learn how to zip or crypt a file in Campaign before processing"],["feature","Data Management, Encryption"],["topic-tags","importing-and-exporting-data"]],"sections":[{"section":"Zip or encrypt a file","sectionId":"7cc28cd1-9bc7-4406-ad62-bc6495f1517e","paragraphs":["Adobe Campaign lets you export zipped or encrypted files. When defining an export through a Data extraction (file) activity, you can define a post-processing to zip or to encrypt the file.","To be able to do so:","Install a GPG key pair for your instance using the Control Panel.","NOTE","Control Panel is restricted to Admin users, and available for certain Campaign versions only. Learn more","If your installation of Adobe Campaign is hosted by Adobe, contact Adobe Customer Care to have the necessary utilities installed on the server.","If your installation of Adobe Campaign is on premise, install the utility you want to use (for example: GPG, GZIP) as well as the necessary keys (encryption key) on the application server.","You can then use commands or code in the Script tab of the activity or in a JavaScript code activity. An example is presented in the use case below.","Related topics:","Unzip or decrypt a file before processing\nData extraction (file) activity."]},{"section":"Use case: Encrypt and export data using a key installed on Control Panel","sectionId":"de00727f-900e-4512-a47d-1c435e34ee00","paragraphs":["In this use case, we will build a workflow in order to encrypt and export data using a key installed on Control Panel.","Discover this feature in video","The steps to perform this use case are as follows:","Generate a GPG key pair (public/private) using a GPG utility, then install the public key onto Control Panel. Detailed steps are available in Control Panel documentation.","In Campaign Classic, build a workflow to export the data and encrypt it using the private key that has been installed via the Control Panel. To do this, we will build a workflow as follows:","","Query activity: In this example, we want to execute a query to target the data from the database that we want to export.\nData extraction (file) activity: Extracts the data into a file.\nJavaScript code activity: Encrypts the data to extract.\nFile transfer activity: Sends the data to an external source (in this example, an SFTP server).","Configure the Query activity to target the desired data from the database. For more on this, refer to this section.","Open the Data extraction (file) activity then configure it according to your needs. Global concepts on how to configure the activity are available in this section.","","Open the JavaScript code activity, then copy-paste the command below to encrypt the data to extract.","IMPORTANT","Make sure you replace the fingerprint value from the command with the fingerprint of the public key installed on the Control Panel.","var cmd='gpg ';\ncmd += ' --trust-model always';\ncmd += ' --batch --yes';\ncmd += ' --recipient fingerprint';\ncmd += ' --encrypt --output ' + vars.filename + '.gpg ' + vars.filename;\nexecCommand(cmd,true);\nvars.filename=vars.filename + '.gpg'","","Open the File transfer activity, then specify the SFTP server to which you want to send the file. Global concepts on how to configure the activity are available in this section.","","You can now run the workflow. Once it is executed, data target by the query will be exported to the SFTP server into an encrypted .gpg file."]},{"section":"Tutorial video","sectionId":"10b8b2c3-caca-4cd0-8ada-4725aa6a96a3","paragraphs":["This video shows how to use a GPG key to encrypt data is also available in","!VIDEO","Additional Campaign Classic how-to videos are available here."]}]}