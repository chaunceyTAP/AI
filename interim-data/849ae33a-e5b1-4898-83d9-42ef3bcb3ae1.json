{"guid":"849ae33a-e5b1-4898-83d9-42ef3bcb3ae1","title":"Migration of technical users to Adobe Developer console","path":"help\\technotes\\using\\ims-migration.md","fullText":"---\ntitle: Migration of technical users to Adobe Developer console\ndescription: Learn how to migrate Campaign technical operators to Technical account on Adobe Developer console\nfeature: Technote\nrole: Admin\nexl-id: 1a409daf-57be-43c9-a3d9-b8ab54c88068\n---\n# Migration of Campaign technical operators to Adobe Developer Console {#migrate-tech-users-to-ims}\n\nAs part of the effort to reinforce security and authentication process, starting with Campaign Classic v7.3.5, the authentication process to Campaign Classic is being improved. Technical operators should now use the [Adobe Identity Management System (IMS)](https://helpx.adobe.com/enterprise/using/identity.html){target=\"_blank\"} to connect to Campaign. Learn more about the new server to server authentication process in [Adobe Developer Console documentation](https://developer.adobe.com/developer-console/docs/guides/authentication/ServerToServerAuthentication/){target=\"_blank\"}. **Adobe recommends to perform this migration in v7 to be able to migrate smoothly to Campaign v8.**\n\nA technical operator is a Campaign user profile which has been explicitly created for API integration. This article details the steps required to migrate a technical operator to a technical account via the Adobe Developer console.\n\n## Are you impacted?{#ims-impacts}\n\nIf you are making API calls from a system external to Campaign into either your Campaign Marketing instance or the Real-Time Message Center instance, Adobe highly recommends you to migrate the technical operator(s) to technical account(s) through the Adobe Developer Console as detailed below.\n\nThis change is applicable starting Campaign Classic v7.3.5 (and latest [IMS migration compatible versions](ac-ims.md#ims-versions)) and is **mandatory** to move to Adobe Campaign v8.\n\n## Migration process {#ims-migration-procedure}\n\nFollow the below steps to create technical account(s) within the Adobe Developer Console, and then use those newly created accounts to be able to change the authentication methods for all of your external systems making API calls in Adobe Campaign.\n\nAn overview of the steps are:\n\n* Create a project within the Adobe Developer Console\n* Assign the appropriate API's to the newly created project\n* Grant the needed Campaign Product Profiles to the project\n* Update your APIs to use the newly created technical account credentials\n* Remove the legacy technical operators from your Campaign instance\n\n\n### Prerequisites for the migration{#ims-migration-prerequisites}\n\n<!--To be able to create the technical accounts which replace the technical operators, the prerequisite that the proper Campaign Product Profiles exist within the Admin Console for all Campaign instances need to be validated. You can learn more about Product Profiles within the Adobe Console in [Adobe Developer Console documentation](https://developer.adobe.com/developer-console/docs/guides/projects/){target=\"_blank\"}.-->\n\n* Campaign Hosted and Managed Services customers\n\n    For API calls into the Message Center instance(s), the product profile (mentioned below) should be created during the upgrade to Campaign v7.4.1 (or other [IMS migration compatible version](ac-ims.md#ims-versions)), or during provisioning of the instance. Note that f you do not see the product profile, please reach out to your Transition Manager or Customer Support to get the product profile created before starting the IMS migration. This product profile is named:\n\n    `campaign - <your campaign marketing instance> - messagecenter`\n\n    If you have already been using IMS based authentication for user access to Campaign then the product profiles needed for the API calls should already exist within the Admin Console. If you use a custom operator group within Campaign for the API calls to the Marketing instance, you must create that product profile within the Admin Console.\n\n    For other cases, you must reach out to your Adobe Transition Manager (for Managed Services users) or to Adobe Customer Care (for other Hosted users), so that Adobe technical teams can migrate your existing Operator groups and Named rights to the Product Profiles within the Admin Console.\n\n* Campaign On-premise and Hybrid customers\n\n    For API calls into the Message Center instance(s), you must create a product profile named:\n\n    `campaign - <your campaign instance> - messagecenter`\n\n    If you have already been using IMS based authentication for user access to Campaign then the product profiles needed for the API calls should already exist within the Admin Console. If you use a custom operator group within Campaign for the API calls to the Marketing instance, you must create that product profile within the Admin Console.\n\n    You can learn more about Product Profiles within the Adobe Console in [Adobe Developer Console documentation](https://developer.adobe.com/developer-console/docs/guides/projects/){target=\"_blank\"}\n\n\n### Step 1 - Create your Campaign Project within the Adobe Developer Console {#ims-migration-step-1}\n\nIntegrations are created as part of a **Project** within Adobe Developer Console. Learn more about Projects in [Adobe Developer Console documentation](https://developer.adobe.com/developer-console/docs/guides/projects/){target=\"_blank\"}. \n\nYou can use any project previously created by you or you can create a new project. The steps to create a project are detailed in the [Adobe Developer Console documentation](https://developer.adobe.com/developer-console/docs/guides/getting-started/){target=\"_blank\"}. You can find key steps below\n\n<!--\nFor this migration, you must add below APIs in your project: **I/O Management API** and **Adobe Campaign**.\n\n![](assets/do-not-localize/ims-products-and-services.png)-->\n\nTo create a new project, click **Create new project** from the main screen in the Adobe Developer Console.\n\n![](assets/New-Project.png) \n\nYou can use the **Edit project** button to rename this project. \n\n\n### Step 2 - Add APIs to your project {#ims-migration-step-2}\n\nFrom the newly created project screen, add in the API's needed to be able to use this project as a Technical Account for your API calls to Adobe Campaign.\n\nTo add APIs to your project, follow these steps:\n\n1. Click on **Add API** to select the APIs to add to your project. \n    ![](assets/do-not-translate/ims-updates-01.png) \n1. Select and add the Adobe Campaign API to your Project by checking the box in the upper right corner of Adobe Campaign card which appears when you hover the mouse over the card\n    ![](assets/do-not-translate/ims-updates-02.png) \n1. Click **Next** at the bottom of the screen.\n\n### Step 3 - Select the authentication type  {#ims-migration-step-3}\n\nIn the **Configure API** screen, select the authentication type needed. **OAuth Server-to-Server** Authentication is required for this project. Ensure it is selected and click **Next** at the bottom of the screen.\n\n![](assets/do-not-translate/ims-updates-03.png) \n\n<!--\nOnce your project is created in the Adobe Developer Console, add an API that uses Server-to-Server authentication. Learn how to set up the OAuth Server-to-Server credential in [Adobe Developer Console documentation](https://developer.adobe.com/developer-console/docs/guides/authentication/ServerToServerAuthentication/implementation/){target=\"_blank\"}.\n\nWhen the API has been successfully connected, you can access the newly generated credentials including Client ID and Client Secret, as well as generate an access token.-->\n\n### Step 4 - Select the product profiles {#ims-migration-step-4}\n\nAs described in the prerequisites section you must assign the appropriate product profiles to be used by the project. In this step, you must select the product profile or profiles to be used by the technical account being created. \n\nIf this technical account is used to make API calls to the Message Center instance, make sure to select the Adobe product profile, ending with messagecenter, for the Marketing Instance associated to the Message Center.\n\nFor API calls to the Marketing instance(s) select the product profile corresponding to the instance and Operator Group, for example `campaign - <your campaign marketing instance> - Admin`.\n\nOnce the needed product profiles have been selected click on **Save configured API** at the bottom of the screen.\n\n<!--\nYou can now add your Campaign product profile to the project, as detailed below:\n\n1. Open the Adobe Campaign API.\n1. Click the **Edit product profiles** button\n\n    ![](assets/do-not-localize/ims-edit-api.png)\n\n1. Assign all the relevant Product Profiles to the API, for example 'messagecenter', and save your changes.\n1. Browse to the **Credential details** tab of your project, and copy the **Technical Account Email** value.-->\n\n### Step 5 - Add the I/O Management API to your project {#ims-migration-step-5}\n\n\nFrom the project screen, click the **[!UICONTROL + Add to Project]** and choose **[!UICONTROL API]** in the upper left of the screen to be able to add the I/O Management API to this project.\n\n![](assets/do-not-translate/ims-updates-04.png) \n\nIn the **Add an API** screen, scroll down to find the **I/O Management API** card. Select it by clicking the checkbox that appears when you hover over the card. Then click **Next** at the bottom of the screen.\n\n![](assets/do-not-translate/ims-updates-05.png) \n\n\nIn the **Configure API** screen, the OAuth Server-to-Server authentication is already existing. Click **Save configured API** at the bottom of the screen.\n\n\n![](assets/do-not-translate/ims-updates-06.png) \n\nThis takes you back to the Project screen within the I/O Management API of the newly created project. Click on the project name in the breadcrumbs at the top of the screen to be taken back to the main Project Details page.\n\n\n### Step 6 - Verify the project setup {#ims-migration-step-6}\n\nReview your project to ensure it looks similar to the below with the **I/O Management API** and **Adobe Campaign API** visible in the Products and Services section and **OAuth Server-to-Server** in the Credentials section.\n\n![](assets/do-not-translate/ims-updates-07.png) \n\n\n### Step 7 - Validate your configuration {#ims-migration-step-7}\n\nTo try out the connection, follow the steps detailed in the [Adobe Developer Console credentials guide](https://developer.adobe.com/developer-console/docs/guides/authentication/ServerToServerAuthentication/implementation/#generate-access-tokens){target=\"_blank\"} for generating an access token and copy the Sample cURL command provided. You can create a soap call using these credentials to test that you can authenticate and connect to the Adobe Campaign instance(s) correctly. We recommend doing this validation prior to making all of the changes to the third-party API integrations.\n\n### Step 8 - Update the third-party API Integrations {#ims-migration-step-8}\n\nYou must now update all of the API Integrations making calls into Adobe Campaign to use the newly created Technical Account. \n\nFor details on API integration steps, please refer to the code samples below.\n\nWhen using Adobe Identity Management System (IMS) authentication, to generate a WSDL file, you should add the Authorization: Bearer <IMS_Technical_Token_Token> in the postman call:\n\n```\ncurl --location --request POST 'https://<instance_url>/nl/jsp/schemawsdl.jsp?schema=nms:rtEvent' \\--header 'Authorization: Bearer <Technical account access token>'\n```\n\n>[!BEGINTABS]\n\n>[!TAB SOAP Call]\n\n```\ncurl --location --request POST 'https://<instance_name>.campaign.adobe.com/nl/jsp/soaprouter.jsp' \\\n--header 'Content-Type: text/xml; charset=utf-8' \\\n--header 'SOAPAction: xtk:queryDef#ExecuteQuery' \\\n--header 'Authorization: Bearer eyJhw' \\\n--data-raw '<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n  <soap:Body>\n    <ExecuteQuery xmlns=\"urn:xtk:queryDef\">\n            <sessiontoken></sessiontoken>\n            <entity>\n                <queryDef schema=\"nms:recipient\" operation=\"select\">\n                    <!-- fields to retrieve -->\n                    <select>\n                        <node expr=\"@lastName\"/>\n                        <node expr=\"@email\"/>\n                        <node expr=\"@firstName\"/>\n                    </select>\n                    <!-- condition on email -->\n                    <!-- <where><condition expr=\"@email= '\\''joh@com.com'\\''\"/>\n                </where> -->\n                </queryDef>\n            </entity>\n        </ExecuteQuery>\n  </soap:Body>\n</soap:Envelope>\n'\n\n```\n\n>[!TAB  SampleCode Java]\n\n```javascript\n\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.io.IOException;\nimport com.google.gson.Gson;\nimport com.google.gson.JsonObject;\n \nimport com.google.gson.JsonSyntaxException;\nimport org.apache.hc.client5.http.classic.methods.HttpPost;\nimport org.apache.hc.client5.http.impl.classic.CloseableHttpClient;\nimport org.apache.hc.client5.http.impl.classic.CloseableHttpResponse;\nimport org.apache.hc.client5.http.impl.classic.HttpClients;\nimport org.apache.hc.core5.http.HttpEntity;\nimport org.apache.hc.core5.http.io.entity.StringEntity;\n \n \npublic class TAAccessToken {\n    public static void main(String[] args) throws IOException {\n        String accessToken = null;\n        CloseableHttpClient httpClient = HttpClients.createDefault();\n        try {\n            HttpPost httpPost = new HttpPost(\"https://ims-na1.adobelogin.com/ims/token/v3\");\n \n            // Request headers\n            httpPost.addHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n \n            String clientId = \"<client_id>\";\n            String clientSecret = \"<client_secret>\";\n            String scopes = \"<scopes>\";\n \n            // Define the request body\n            String requestBody = \"client_id=\"+clientId+\"&client_secret=\"+clientSecret+\"&grant_type=client_credentials&scope=\"+scopes+\"\";\n            StringEntity requestEntity = new StringEntity(requestBody);\n            httpPost.setEntity(requestEntity);\n \n            // Execute the request\n            CloseableHttpResponse response = httpClient.execute(httpPost);\n            try {\n                // Get the response entity\n                HttpEntity entity = response.getEntity();\n                int responseCode = response.getCode();\n \n                // Print the response\n                if (entity != null) {\n                    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(entity.getContent()));\n                    String lineImsToken;\n                    StringBuilder responseImsToken = new StringBuilder();\n                    while ((lineImsToken = bufferedReader.readLine()) != null) {\n                        responseImsToken.append(lineImsToken);\n                    }\n \n                    String jsonString = responseImsToken.toString();\n \n                    try {\n                        Gson gson = new Gson();\n                        JsonObject jsonObject = gson.fromJson(jsonString, JsonObject.class);\n \n                        // Get the value of a specific key\n                        accessToken = jsonObject.get(\"access_token\").getAsString();\n                    }\n                    catch (JsonSyntaxException | NullPointerException e) {\n                        System.err.println(\"Error parsing JSON: \" + e.getMessage());\n                        e.printStackTrace();\n                    }\n                    System.out.println(\"Response Code: \" + responseCode);\n                    System.out.println(\"Response Body: \" + accessToken);\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            } finally {\n                response.close();\n            }\n        } finally {\n            httpClient.close();\n        }\n \n        CloseableHttpClient httpClientSoap = HttpClients.createDefault();\n        try {\n            HttpPost httpPostSoap = new HttpPost(\"https://<instance_name>.campaign.adobe.com/nl/jsp/soaprouter.jsp\");\n \n            // Request headers\n            httpPostSoap.addHeader(\"Content-Type\", \"text/xml; charset=utf-8\");\n            httpPostSoap.addHeader(\"SOAPAction\", \"xtk:queryDef#ExecuteQuery\");\n            httpPostSoap.addHeader(\"Authorization\", \"Bearer \"+accessToken);\n \n            // Request body\n            String xmlData = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n\" +\n                    \"<soap:Envelope xmlns:soap=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\">\\n\" +\n                    \"  <soap:Body>\\n\" +\n                    \"    <ExecuteQuery xmlns=\\\"urn:xtk:queryDef\\\">\\n\" +\n                    \"            <sessiontoken></sessiontoken>\\n\" +\n                    \"            <entity>\\n\" +\n                    \"                <queryDef schema=\\\"nms:recipient\\\" operation=\\\"select\\\">\\n\" +\n                    \"                    <!-- fields to retrieve -->\\n\" +\n                    \"                    <select>\\n\" +\n                    \"                        <node expr=\\\"@lastName\\\"/>\\n\" +\n                    \"                        <node expr=\\\"@email\\\"/>\\n\" +\n                    \"                        <node expr=\\\"@firstName\\\"/>\\n\" +\n                    \"                    </select>\\n\" +\n                    \"                    <!-- condition on email -->\\n\" +\n                    \"                    <!-- <where><condition expr=\\\"@email= '\\''joh@com.com'\\''\\\"/>\\n\" +\n                    \"                </where> -->\\n\" +\n                    \"                </queryDef>\\n\" +\n                    \"            </entity>\\n\" +\n                    \"        </ExecuteQuery>\\n\" +\n                    \"  </soap:Body>\\n\" +\n                    \"</soap:Envelope>\";\n            StringEntity requestEntity = new StringEntity(xmlData);\n            httpPostSoap.setEntity(requestEntity);\n \n            // Execute the request\n            CloseableHttpResponse response = httpClientSoap.execute(httpPostSoap);\n            try {\n                // Get the response entity\n                HttpEntity entity = response.getEntity();\n \n                // Print the response\n                if (entity != null) {\n                    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(entity.getContent()));\n                    String line;\n                    while ((line = bufferedReader.readLine()) != null) {\n                        System.out.println(line);\n                    }\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            } finally {\n                response.close();\n            }\n        } finally {\n            httpClientSoap.close();\n        }\n \n    }\n}\n\n```\n\n>[!TAB SampleCodePython]\n\n```python\n\nimport requests\n \noauth_url = 'https://ims-na1.adobelogin.com/ims/token/v3'\ndata = {\n    'grant_type': 'client_credentials',\n    'scope': '<scopes>',\n    'client_id': '<client_id>',\n    'client_secret': '<client_secret>'\n}\n \nheaders = {\n    'Content-Type': 'application/x-www-form-urlencoded',\n    'Accept': 'application/json'\n}\nresponse = requests.post(oauth_url, data=data, headers=headers)\nresponse = response.json()\naccess_token = response['access_token']\n \n \nurl = 'https://<instance_name>.campaign.adobe.com/nl/jsp/soaprouter.jsp'\nheaders = {\n    'Content-Type': 'text/xml; charset=utf-8',\n    'SOAPAction': 'xtk:queryDef#ExecuteQuery',\n    'Authorization': 'Bearer '+access_token\n}\nxml_data = '''<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n  <soap:Body>\n    <ExecuteQuery xmlns=\"urn:xtk:queryDef\">\n            <sessiontoken></sessiontoken>\n            <entity>\n                <queryDef schema=\"nms:recipient\" operation=\"select\">\n                    <!-- fields to retrieve -->\n                    <select>\n                        <node expr=\"@lastName\"/>\n                        <node expr=\"@email\"/>\n                        <node expr=\"@firstName\"/>\n                    </select>\n                    <!-- condition on email -->\n                    <!-- <where><condition expr=\"@email= '\\''joh@com.com'\\''\"/>\n                </where> -->\n                </queryDef>\n            </entity>\n        </ExecuteQuery>\n  </soap:Body>\n</soap:Envelope>\n'''\nresponse = requests.post(url, headers=headers, data=xml_data)\n\n```\n\n>[!ENDTABS]\n\nFor more information, refer to [Adobe Developer Console authentication documentation](https://developer.adobe.com/developer-console/docs/guides/authentication/ServerToServerAuthentication/){target=\"_blank\"}.\n\nBelow are sample SOAP calls showing the before and after migration calls for the third party systems.\n\nOnce the migration process is achieved and validated, the Soap Calls are updated as below:\n\n* Before the migration: there was no support for Technical account access token.\n\n    ```sql\n    POST /nl/jsp/soaprouter.jsp HTTP/1.1\n    Host: localhost:8080\n    Content-Type: application/soap+xml;\n    SOAPAction: \"nms:rtEvent#PushEvent\"\n    charset=utf-8\n    \n    <?xml version=\"1.0\" encoding=\"utf-8\"?>  <soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:urn=\"urn:nms:rtEvent\">\n    <soapenv:Header/>\n    <soapenv:Body>\n        <urn:PushEvent>\n            <urn:sessiontoken>SESSION_TOKEN</urn:sessiontoken>\n            <urn:domEvent>\n                <!--You may enter ANY elements at this point-->\n                <rtEvent type=\"type\" email=\"name@domain.com\"/>\n            </urn:domEvent>\n        </urn:PushEvent>\n    </soapenv:Body>\n    </soapenv:Envelope>\n    ```\n\n* After the migration: there is support for Technical account access token. The access token is expected to be supplied in `Authorization` header as Bearer token. Usage of session token should be ignored here, as shown in the below soap call sample.\n\n    ```sql\n    POST /nl/jsp/soaprouter.jsp HTTP/1.1\n    Host: localhost:8080\n    Content-Type: application/soap+xml;\n    SOAPAction: \"nms:rtEvent#PushEvent\"\n    charset=utf-8\n    Authorization: Bearer <IMS_Technical_Token_Token>\n    \n    <?xml version=\"1.0\" encoding=\"utf-8\"?>  <soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:urn=\"urn:nms:rtEvent\">\n    <soapenv:Header/>\n    <soapenv:Body>\n        <urn:PushEvent>\n            <urn:sessiontoken></urn:sessiontoken>\n            <urn:domEvent>\n                <!--You may enter ANY elements at this point-->\n                <rtEvent type=\"type\" email=\"name@domain.com\"/>\n            </urn:domEvent>\n        </urn:PushEvent>\n    </soapenv:Body>\n    </soapenv:Envelope>\n    ```\n\n\n\n### Step 9 - (optional) Update the technical account operator within the Campaign Client Console {#ims-migration-step-9}\n\nThis step is optional and only available within the Marketing Instance(s), not within any Message Center instance. If specific folder permissions or named rights have been defined for the Technical Operator not via the assigned Operator Group(s). You would now need to update the newly created Technical Account user in the Admin Console to grant the folder permissions or named rights required.\n\nNote that the Technical Account user will NOT exist in Adobe Campaign until at least one API call is made to the Campaign Instance, at which time IMS will create the user within Campaign. If you are unable to locate the technical users within Campaign, ensure you have been able to successfully send an API call as outlined [in Step 7](#ims-migration-step-7).\n\n1. To apply the changes needed for the new Technical Account User, locate them within the Campaign Client Console by email address. This email address was created during the Project Creation and Authentication steps above. \n\n    You can locate this email address by clicking on the **OAuth Server-to-Server** heading in the **Credentials** section of the Project.\n\n    ![](assets/do-not-translate/ims-updates-07.png) \n\n    In the **Credentials details** tab, scroll down to locate the **Technical Account Email** and click the **Copy** button.\n\n    ![](assets/do-not-translate/ims-updates-08.png) \n\n1. You now need to update the newly created technical operator in Adobe Campaign Client Console. You must apply the existing technical operator folder permissions to the new technical operator.\n\n    To update this operator, follow these steps:\n\n    1. From Campaign Client Console explorer, browse to the **Administration > Access Management > Operators**.\n    1. Access the existing technical operator used for APIs.\n    1. Browse to the folder permissions, and check rights.\n    1. Apply the same permissions to the newly created technical operator. This operator's email is the **Technical Account Email** value copied earlier.\n    1. Save your changes.\n\n\n>[!CAUTION]\n>\n>The new technical operator must have made at least one API call to be added to Campaign Client Console.\n>\n\n### Step 10 - Remove the old technical operator from Adobe Campaign {#ims-migration-step-10}\n\nOnce you have migrated all of the third-party systems to use the new Technical Account with IMS Authentication you can delete the old technical operator from the Campaign Client Console. \n\nYou do this by logging into the Campaign Client Console, navigating to **Administration > Access Management > Operators** and locating the old Technical Users and deleting them.\n\n\n>[!MORELIKETHIS]\n>\n>* [Migration of end-users to IMS](migrate-users-to-ims.md)\n>* [Update Campaign interface after IMS migration](impact-ims-migration.md)\n>* [Adobe Campaign Classic v7 latest release notes](../../rn/using/latest-release.md)\n>* [What is Adobe Identity Management System (IMS)](https://helpx.adobe.com/enterprise/using/identity.html){target=\"_blank\"}\n\n","headers":[["title","Migration of technical users to Adobe Developer console"],["description","Learn how to migrate Campaign technical operators to Technical account on Adobe Developer console"],["feature","Technote"]],"sections":[{"section":"Migration of Campaign technical operators to Adobe Developer Console","sectionId":"3cf26467-3196-41bf-bdd7-59e099c5d0f2","paragraphs":["As part of the effort to reinforce security and authentication process, starting with Campaign Classic v7.3.5, the authentication process to Campaign Classic is being improved. Technical operators should now use the Adobe Identity Management System (IMS) to connect to Campaign. Learn more about the new server to server authentication process in Adobe Developer Console documentation. Adobe recommends to perform this migration in v7 to be able to migrate smoothly to Campaign v8.","A technical operator is a Campaign user profile which has been explicitly created for API integration. This article details the steps required to migrate a technical operator to a technical account via the Adobe Developer console."]},{"section":"Are you impacted?","sectionId":"123e7479-e32a-4eb9-9605-966b30a443e6","paragraphs":["If you are making API calls from a system external to Campaign into either your Campaign Marketing instance or the Real-Time Message Center instance, Adobe highly recommends you to migrate the technical operator(s) to technical account(s) through the Adobe Developer Console as detailed below.","This change is applicable starting Campaign Classic v7.3.5 (and latest IMS migration compatible versions) and is mandatory to move to Adobe Campaign v8."]},{"section":"Migration process","sectionId":"13ea0dbb-285e-4bb2-903e-5ee0d48f963b","paragraphs":["Follow the below steps to create technical account(s) within the Adobe Developer Console, and then use those newly created accounts to be able to change the authentication methods for all of your external systems making API calls in Adobe Campaign.","An overview of the steps are:","Create a project within the Adobe Developer Console\nAssign the appropriate API's to the newly created project\nGrant the needed Campaign Product Profiles to the project\nUpdate your APIs to use the newly created technical account credentials\nRemove the legacy technical operators from your Campaign instance"]},{"section":"Prerequisites for the migration","sectionId":"5ed9c044-ee59-41e9-830f-fb26dd153bb5","paragraphs":["Campaign Hosted and Managed Services customers","For API calls into the Message Center instance(s), the product profile (mentioned below) should be created during the upgrade to Campaign v7.4.1 (or other IMS migration compatible version), or during provisioning of the instance. Note that f you do not see the product profile, please reach out to your Transition Manager or Customer Support to get the product profile created before starting the IMS migration. This product profile is named:","campaign - <your campaign marketing instance> - messagecenter","If you have already been using IMS based authentication for user access to Campaign then the product profiles needed for the API calls should already exist within the Admin Console. If you use a custom operator group within Campaign for the API calls to the Marketing instance, you must create that product profile within the Admin Console.","For other cases, you must reach out to your Adobe Transition Manager (for Managed Services users) or to Adobe Customer Care (for other Hosted users), so that Adobe technical teams can migrate your existing Operator groups and Named rights to the Product Profiles within the Admin Console.","Campaign On-premise and Hybrid customers","For API calls into the Message Center instance(s), you must create a product profile named:","campaign - <your campaign instance> - messagecenter","If you have already been using IMS based authentication for user access to Campaign then the product profiles needed for the API calls should already exist within the Admin Console. If you use a custom operator group within Campaign for the API calls to the Marketing instance, you must create that product profile within the Admin Console.","You can learn more about Product Profiles within the Adobe Console in Adobe Developer Console documentation"]},{"section":"Step 1 - Create your Campaign Project within the Adobe Developer Console","sectionId":"ff1e666e-865c-4919-8ec0-eda08ee5f312","paragraphs":["Integrations are created as part of a Project within Adobe Developer Console. Learn more about Projects in Adobe Developer Console documentation.","You can use any project previously created by you or you can create a new project. The steps to create a project are detailed in the Adobe Developer Console documentation. You can find key steps below","To create a new project, click Create new project from the main screen in the Adobe Developer Console.","","You can use the Edit project button to rename this project."]},{"section":"Step 2 - Add APIs to your project","sectionId":"be3cbf00-5ad9-45b0-a815-a7e4c381893a","paragraphs":["From the newly created project screen, add in the API's needed to be able to use this project as a Technical Account for your API calls to Adobe Campaign.","To add APIs to your project, follow these steps:","Click on Add API to select the APIs to add to your project. \n  \nSelect and add the Adobe Campaign API to your Project by checking the box in the upper right corner of Adobe Campaign card which appears when you hover the mouse over the card\n  \nClick Next at the bottom of the screen."]},{"section":"Step 3 - Select the authentication type","sectionId":"a21e4ff5-628f-4878-8418-e88281ca4c4c","paragraphs":["In the Configure API screen, select the authentication type needed. OAuth Server-to-Server Authentication is required for this project. Ensure it is selected and click Next at the bottom of the screen.",""]},{"section":"Step 4 - Select the product profiles","sectionId":"ea76ad17-ed54-49f8-bf54-e96e07e84382","paragraphs":["As described in the prerequisites section you must assign the appropriate product profiles to be used by the project. In this step, you must select the product profile or profiles to be used by the technical account being created.","If this technical account is used to make API calls to the Message Center instance, make sure to select the Adobe product profile, ending with messagecenter, for the Marketing Instance associated to the Message Center.","For API calls to the Marketing instance(s) select the product profile corresponding to the instance and Operator Group, for example campaign - <your campaign marketing instance> - Admin.","Once the needed product profiles have been selected click on Save configured API at the bottom of the screen."]},{"section":"Step 5 - Add the I/O Management API to your project","sectionId":"de9d984b-b2ab-43ad-b956-eded88b675e8","paragraphs":["From the project screen, click the + Add to Project and choose API in the upper left of the screen to be able to add the I/O Management API to this project.","","In the Add an API screen, scroll down to find the I/O Management API card. Select it by clicking the checkbox that appears when you hover over the card. Then click Next at the bottom of the screen.","","In the Configure API screen, the OAuth Server-to-Server authentication is already existing. Click Save configured API at the bottom of the screen.","","This takes you back to the Project screen within the I/O Management API of the newly created project. Click on the project name in the breadcrumbs at the top of the screen to be taken back to the main Project Details page."]},{"section":"Step 6 - Verify the project setup","sectionId":"a663d32b-3009-41ab-9d4a-559d34ce8ace","paragraphs":["Review your project to ensure it looks similar to the below with the I/O Management API and Adobe Campaign API visible in the Products and Services section and OAuth Server-to-Server in the Credentials section.",""]},{"section":"Step 7 - Validate your configuration","sectionId":"4fca9ed7-29d6-42d1-88e3-9fa14ae7f3ce","paragraphs":["To try out the connection, follow the steps detailed in the Adobe Developer Console credentials guide for generating an access token and copy the Sample cURL command provided. You can create a soap call using these credentials to test that you can authenticate and connect to the Adobe Campaign instance(s) correctly. We recommend doing this validation prior to making all of the changes to the third-party API integrations."]},{"section":"Step 8 - Update the third-party API Integrations","sectionId":"139fe533-c3fc-490a-9c06-bf738979ced9","paragraphs":["You must now update all of the API Integrations making calls into Adobe Campaign to use the newly created Technical Account.","For details on API integration steps, please refer to the code samples below.","When using Adobe Identity Management System (IMS) authentication, to generate a WSDL file, you should add the Authorization: Bearer  in the postman call:","curl --location --request POST 'https://<instance_url>/nl/jsp/schemawsdl.jsp?schema=nms:rtEvent' \\--header 'Authorization: Bearer <Technical account access token>'","BEGINTABS","TAB SOAP Call","curl --location --request POST 'https://<instance_name>.campaign.adobe.com/nl/jsp/soaprouter.jsp' \\\n--header 'Content-Type: text/xml; charset=utf-8' \\\n--header 'SOAPAction: xtk:queryDef#ExecuteQuery' \\\n--header 'Authorization: Bearer eyJhw' \\\n--data-raw '<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n  <soap:Body>\n    <ExecuteQuery xmlns=\"urn:xtk:queryDef\">\n            <sessiontoken></sessiontoken>\n            <entity>\n                <queryDef schema=\"nms:recipient\" operation=\"select\">\n                    <!-- fields to retrieve -->\n                    <select>\n                        <node expr=\"@lastName\"/>\n                        <node expr=\"@email\"/>\n                        <node expr=\"@firstName\"/>\n                    </select>\n                    <!-- condition on email -->\n                    <!-- <where><condition expr=\"@email= '\\''joh@com.com'\\''\"/>\n                </where> -->\n                </queryDef>\n            </entity>\n        </ExecuteQuery>\n  </soap:Body>\n</soap:Envelope>\n'","TAB  SampleCode Java","import java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.io.IOException;\nimport com.google.gson.Gson;\nimport com.google.gson.JsonObject;\n \nimport com.google.gson.JsonSyntaxException;\nimport org.apache.hc.client5.http.classic.methods.HttpPost;\nimport org.apache.hc.client5.http.impl.classic.CloseableHttpClient;\nimport org.apache.hc.client5.http.impl.classic.CloseableHttpResponse;\nimport org.apache.hc.client5.http.impl.classic.HttpClients;\nimport org.apache.hc.core5.http.HttpEntity;\nimport org.apache.hc.core5.http.io.entity.StringEntity;\n \n \npublic class TAAccessToken {\n    public static void main(String[] args) throws IOException {\n        String accessToken = null;\n        CloseableHttpClient httpClient = HttpClients.createDefault();\n        try {\n            HttpPost httpPost = new HttpPost(\"https://ims-na1.adobelogin.com/ims/token/v3\");\n \n            // Request headers\n            httpPost.addHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n \n            String clientId = \"<client_id>\";\n            String clientSecret = \"<client_secret>\";\n            String scopes = \"<scopes>\";\n \n            // Define the request body\n            String requestBody = \"client_id=\"+clientId+\"&client_secret=\"+clientSecret+\"&grant_type=client_credentials&scope=\"+scopes+\"\";\n            StringEntity requestEntity = new StringEntity(requestBody);\n            httpPost.setEntity(requestEntity);\n \n            // Execute the request\n            CloseableHttpResponse response = httpClient.execute(httpPost);\n            try {\n                // Get the response entity\n                HttpEntity entity = response.getEntity();\n                int responseCode = response.getCode();\n \n                // Print the response\n                if (entity != null) {\n                    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(entity.getContent()));\n                    String lineImsToken;\n                    StringBuilder responseImsToken = new StringBuilder();\n                    while ((lineImsToken = bufferedReader.readLine()) != null) {\n                        responseImsToken.append(lineImsToken);\n                    }\n \n                    String jsonString = responseImsToken.toString();\n \n                    try {\n                        Gson gson = new Gson();\n                        JsonObject jsonObject = gson.fromJson(jsonString, JsonObject.class);\n \n                        // Get the value of a specific key\n                        accessToken = jsonObject.get(\"access_token\").getAsString();\n                    }\n                    catch (JsonSyntaxException | NullPointerException e) {\n                        System.err.println(\"Error parsing JSON: \" + e.getMessage());\n                        e.printStackTrace();\n                    }\n                    System.out.println(\"Response Code: \" + responseCode);\n                    System.out.println(\"Response Body: \" + accessToken);\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            } finally {\n                response.close();\n            }\n        } finally {\n            httpClient.close();\n        }\n \n        CloseableHttpClient httpClientSoap = HttpClients.createDefault();\n        try {\n            HttpPost httpPostSoap = new HttpPost(\"https://<instance_name>.campaign.adobe.com/nl/jsp/soaprouter.jsp\");\n \n            // Request headers\n            httpPostSoap.addHeader(\"Content-Type\", \"text/xml; charset=utf-8\");\n            httpPostSoap.addHeader(\"SOAPAction\", \"xtk:queryDef#ExecuteQuery\");\n            httpPostSoap.addHeader(\"Authorization\", \"Bearer \"+accessToken);\n \n            // Request body\n            String xmlData = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n\" +\n                    \"<soap:Envelope xmlns:soap=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\">\\n\" +\n                    \"  <soap:Body>\\n\" +\n                    \"    <ExecuteQuery xmlns=\\\"urn:xtk:queryDef\\\">\\n\" +\n                    \"            <sessiontoken></sessiontoken>\\n\" +\n                    \"            <entity>\\n\" +\n                    \"                <queryDef schema=\\\"nms:recipient\\\" operation=\\\"select\\\">\\n\" +\n                    \"                    <!-- fields to retrieve -->\\n\" +\n                    \"                    <select>\\n\" +\n                    \"                        <node expr=\\\"@lastName\\\"/>\\n\" +\n                    \"                        <node expr=\\\"@email\\\"/>\\n\" +\n                    \"                        <node expr=\\\"@firstName\\\"/>\\n\" +\n                    \"                    </select>\\n\" +\n                    \"                    <!-- condition on email -->\\n\" +\n                    \"                    <!-- <where><condition expr=\\\"@email= '\\''joh@com.com'\\''\\\"/>\\n\" +\n                    \"                </where> -->\\n\" +\n                    \"                </queryDef>\\n\" +\n                    \"            </entity>\\n\" +\n                    \"        </ExecuteQuery>\\n\" +\n                    \"  </soap:Body>\\n\" +\n                    \"</soap:Envelope>\";\n            StringEntity requestEntity = new StringEntity(xmlData);\n            httpPostSoap.setEntity(requestEntity);\n \n            // Execute the request\n            CloseableHttpResponse response = httpClientSoap.execute(httpPostSoap);\n            try {\n                // Get the response entity\n                HttpEntity entity = response.getEntity();\n \n                // Print the response\n                if (entity != null) {\n                    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(entity.getContent()));\n                    String line;\n                    while ((line = bufferedReader.readLine()) != null) {\n                        System.out.println(line);\n                    }\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            } finally {\n                response.close();\n            }\n        } finally {\n            httpClientSoap.close();\n        }\n \n    }\n}","TAB SampleCodePython","import requests\n \noauth_url = 'https://ims-na1.adobelogin.com/ims/token/v3'\ndata = {\n    'grant_type': 'client_credentials',\n    'scope': '<scopes>',\n    'client_id': '<client_id>',\n    'client_secret': '<client_secret>'\n}\n \nheaders = {\n    'Content-Type': 'application/x-www-form-urlencoded',\n    'Accept': 'application/json'\n}\nresponse = requests.post(oauth_url, data=data, headers=headers)\nresponse = response.json()\naccess_token = response['access_token']\n \n \nurl = 'https://<instance_name>.campaign.adobe.com/nl/jsp/soaprouter.jsp'\nheaders = {\n    'Content-Type': 'text/xml; charset=utf-8',\n    'SOAPAction': 'xtk:queryDef#ExecuteQuery',\n    'Authorization': 'Bearer '+access_token\n}\nxml_data = '''<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n  <soap:Body>\n    <ExecuteQuery xmlns=\"urn:xtk:queryDef\">\n            <sessiontoken></sessiontoken>\n            <entity>\n                <queryDef schema=\"nms:recipient\" operation=\"select\">\n                    <!-- fields to retrieve -->\n                    <select>\n                        <node expr=\"@lastName\"/>\n                        <node expr=\"@email\"/>\n                        <node expr=\"@firstName\"/>\n                    </select>\n                    <!-- condition on email -->\n                    <!-- <where><condition expr=\"@email= '\\''joh@com.com'\\''\"/>\n                </where> -->\n                </queryDef>\n            </entity>\n        </ExecuteQuery>\n  </soap:Body>\n</soap:Envelope>\n'''\nresponse = requests.post(url, headers=headers, data=xml_data)","ENDTABS","For more information, refer to Adobe Developer Console authentication documentation.","Below are sample SOAP calls showing the before and after migration calls for the third party systems.","Once the migration process is achieved and validated, the Soap Calls are updated as below:","Before the migration: there was no support for Technical account access token.","POST /nl/jsp/soaprouter.jsp HTTP/1.1\nHost: localhost:8080\nContent-Type: application/soap+xml;\nSOAPAction: \"nms:rtEvent#PushEvent\"\ncharset=utf-8","<?xml version=\"1.0\" encoding=\"utf-8\"?>  <soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:urn=\"urn:nms:rtEvent\">\n<soapenv:Header/>\n<soapenv:Body>\n    <urn:PushEvent>\n        <urn:sessiontoken>SESSION_TOKEN</urn:sessiontoken>\n        <urn:domEvent>\n            <!--You may enter ANY elements at this point-->\n            <rtEvent type=\"type\" email=\"name@domain.com\"/>\n        </urn:domEvent>\n    </urn:PushEvent>\n</soapenv:Body>\n</soapenv:Envelope>","After the migration: there is support for Technical account access token. The access token is expected to be supplied in Authorization header as Bearer token. Usage of session token should be ignored here, as shown in the below soap call sample.","POST /nl/jsp/soaprouter.jsp HTTP/1.1\nHost: localhost:8080\nContent-Type: application/soap+xml;\nSOAPAction: \"nms:rtEvent#PushEvent\"\ncharset=utf-8\nAuthorization: Bearer <IMS_Technical_Token_Token>","<?xml version=\"1.0\" encoding=\"utf-8\"?>  <soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:urn=\"urn:nms:rtEvent\">\n<soapenv:Header/>\n<soapenv:Body>\n    <urn:PushEvent>\n        <urn:sessiontoken></urn:sessiontoken>\n        <urn:domEvent>\n            <!--You may enter ANY elements at this point-->\n            <rtEvent type=\"type\" email=\"name@domain.com\"/>\n        </urn:domEvent>\n    </urn:PushEvent>\n</soapenv:Body>\n</soapenv:Envelope>"]},{"section":"Step 9 - (optional) Update the technical account operator within the Campaign Client Console","sectionId":"03b2526b-ef5e-4238-91e3-55c780dce489","paragraphs":["This step is optional and only available within the Marketing Instance(s), not within any Message Center instance. If specific folder permissions or named rights have been defined for the Technical Operator not via the assigned Operator Group(s). You would now need to update the newly created Technical Account user in the Admin Console to grant the folder permissions or named rights required.","Note that the Technical Account user will NOT exist in Adobe Campaign until at least one API call is made to the Campaign Instance, at which time IMS will create the user within Campaign. If you are unable to locate the technical users within Campaign, ensure you have been able to successfully send an API call as outlined in Step 7.","To apply the changes needed for the new Technical Account User, locate them within the Campaign Client Console by email address. This email address was created during the Project Creation and Authentication steps above.","You can locate this email address by clicking on the OAuth Server-to-Server heading in the Credentials section of the Project.","","In the Credentials details tab, scroll down to locate the Technical Account Email and click the Copy button.","","You now need to update the newly created technical operator in Adobe Campaign Client Console. You must apply the existing technical operator folder permissions to the new technical operator.","To update this operator, follow these steps:","From Campaign Client Console explorer, browse to the Administration > Access Management > Operators.\nAccess the existing technical operator used for APIs.\nBrowse to the folder permissions, and check rights.\nApply the same permissions to the newly created technical operator. This operator's email is the Technical Account Email value copied earlier.\nSave your changes.","CAUTION","The new technical operator must have made at least one API call to be added to Campaign Client Console."]},{"section":"Step 10 - Remove the old technical operator from Adobe Campaign","sectionId":"e662ca8a-4338-41d9-a1df-dd65ab39b232","paragraphs":["Once you have migrated all of the third-party systems to use the new Technical Account with IMS Authentication you can delete the old technical operator from the Campaign Client Console.","You do this by logging into the Campaign Client Console, navigating to Administration > Access Management > Operators and locating the old Technical Users and deleting them.","MORELIKETHIS","Migration of end-users to IMS\nUpdate Campaign interface after IMS migration\nAdobe Campaign Classic v7 latest release notes\nWhat is Adobe Identity Management System (IMS)"]}]}